import{c as Q}from"../chunk/app.js";import{w as W}from"../chunk/m78c574d5c3843a3d.js";import{B as O,_ as X}from"../chunk/Button.js";import{_ as Z,c as x,a as V,b as ee,M as se,S as te,R as oe}from"../chunk/RecaptchaInput.vue_vue_type_style_index_0_lang.js";import{c as ae,a as j,d as le,_ as ne,t as B,s as ie}from"../chunk/api.js";import{_ as de}from"../chunk/CloseButton.vue_vue_type_script_setup_true_lang.js";import{M as re}from"../chunk/m3fc8d974e5d8216d.js";import{I as P}from"../chunk/Icon.js";import{b as ce,c as ue,d as pe,e as me,f as fe}from"../chunk/m6cd080c8112b9076.js";import{d as H,o as J,g as K,l as m,m as I,A as he,u as ve,s as R,r as o,q as g,t as E,y as S,b as _,z as G,T as _e,a as q,F as ye,B as be,C as ge,v as $e,x as ke,p as we}from"../chunk/mc55b2a42316522d6.js";import{r as N,u as r}from"../chunk/m6bdda40d8bd2cf5a.js";import{v as L,w as Ce,K as F,J as Se}from"../chunk/ma6cfd38af5d4c661.js";import{a as Be}from"../chunk/strings.js";import"../chunk/m21bbc25c9f3922b4.js";import"../chunk/m64d389f71fee61f4.js";import"../chunk/ma0e3fbddd3785020.js";const Le={class:"modal-content"},Ee={key:0,class:"modal-header"},Fe=["innerHTML"],Re={key:2,class:"modal-footer"},De={class:"d-flex flex-row gap-3"},Me=H({inheritAttrs:!1,__name:"Modal",props:{title:{default:null},center:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},size:{default:null},fullscreen:{type:[Boolean,String],default:!1},backdrop:{type:[Boolean,String],default:"static"},focus:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noFooter:{type:Boolean,default:!1},noClose:{type:Boolean,default:!1},controller:{default:null},closeText:{default:"Close"},tag:{default:"div"},padding:{default:"1rem"}},emits:["close","closed","prevented","open","opened","dismiss"],setup(n,{expose:i,emit:l}){const s=N(null),c=N(null),y=e=>{l("close",e)},b=e=>{l("closed",e),n.controller&&n.controller.removeController()},f=e=>{l("prevented",e)},t=e=>{l("open",e)},u=e=>{l("opened",e)},a=e=>{l("dismiss",e)},d=()=>{var e,p,$,M,k,T,w,z,C,A;c.value=new re(s.value,{backdrop:n.backdrop,focus:n.focus,keyboard:n.keyboard}),(p=(e=s.value)==null?void 0:e.addEventListener)==null||p.call(e,"hide.bs.modal",y),(M=($=s.value)==null?void 0:$.addEventListener)==null||M.call($,"hidden.bs.modal",b),(T=(k=s.value)==null?void 0:k.addEventListener)==null||T.call(k,"hidePrevented.bs.modal",f),(z=(w=s.value)==null?void 0:w.addEventListener)==null||z.call(w,"show.bs.modal",t),(A=(C=s.value)==null?void 0:C.addEventListener)==null||A.call(C,"shown.bs.modal",u)},h=()=>{var e,p;(p=(e=c.value)==null?void 0:e.show)==null||p.call(e)},v=()=>{var e,p;(p=(e=c.value)==null?void 0:e.hide)==null||p.call(e)},D=()=>{var e,p,$,M,k,T,w,z,C,A,U,Y;(p=(e=s.value)==null?void 0:e.removeEventListener)==null||p.call(e,"hide.bs.modal",y),(M=($=s.value)==null?void 0:$.removeEventListener)==null||M.call($,"hidden.bs.modal",b),(T=(k=s.value)==null?void 0:k.removeEventListener)==null||T.call(k,"hidePrevented.bs.modal",f),(z=(w=s.value)==null?void 0:w.removeEventListener)==null||z.call(w,"show.bs.modal",t),(A=(C=s.value)==null?void 0:C.removeEventListener)==null||A.call(C,"shown.bs.modal",u),(Y=(U=s.value)==null?void 0:U.dispose)==null||Y.call(U)};return i({open:h,close:v,dispose:D,update:()=>{var e,p;(p=(e=c.value)==null?void 0:e.handleUpdate)==null||p.call(e)}}),J(()=>{d()}),K(()=>{D()}),(e,p)=>(m(),I(_e,{to:"body"},[(m(),I(he(e.tag),ve({ref_key:"modalRef",ref:s,class:"modal fade",tabindex:"-1"},e.$attrs),{default:R(()=>[o("div",{class:L(["modal-dialog",{"modal-dialog-centered":e.center,"modal-dialog-scrollable":e.scrollable,...e.size?{[`modal-${e.size}`]:!0}:{},...e.fullscreen?{[`modal-fullscreen${typeof e.fullscreen=="string"?`-${e.fullscreen}-down`:""}`]:!0}:{}}])},[o("div",Le,[e.noHeader?S("",!0):(m(),g("div",Ee,[E(e.$slots,"title",{},()=>[o("h5",{class:"modal-title",innerHTML:e.title},null,8,Fe)]),E(e.$slots,"header"),e.noClose?S("",!0):(m(),I(de,{key:0,"data-bs-dismiss":"modal","aria-label":"Close",onClick:a}))])),e.$slots.default?(m(),g("div",{key:1,class:"modal-body",style:Ce({"--bs-modal-padding":e.padding})},[E(e.$slots,"default")],4)):S("",!0),e.noFooter?S("",!0):(m(),g("div",Re,[o("div",De,[e.noClose?S("",!0):(m(),I(O,{key:0,color:"dark","data-bs-dismiss":"modal",onClick:a},{default:R(()=>[_(P,{path:r(ce)},null,8,["path"]),G(F(e.closeText),1)]),_:1})),E(e.$slots,"buttons")])]))])],2)]),_:3},16))]))}}),Te=ae(Me),ze=(n,i,l="No",s="Yes")=>new Promise(async c=>{const y=Be("confirm"),b=await Te({title:n,closeText:l,onOpened:()=>{var f;(f=document.querySelector(`#${y}`))==null||f.addEventListener("click",()=>{b.close(),c(!0)})},onDismiss:()=>{c(!1)}},{...i?{default:()=>q("p",{},i)}:{},buttons:()=>[q(O,{class:["btn","btn-primary"],id:y},[q(P,{path:ue,color:"success"},""),s])]});b.open()});function Ae(n,i){return ze(n,i)}const Ie=n=>(be("data-v-d9bfaf26"),n=n(),ge(),n),Pe={class:"select-file-component"},Ne={class:"file-output"},Ue={class:"extension"},Ve={class:"mime"},He={class:"size"},qe={class:"name"},Oe={key:0,class:"uploading"},Ye=Ie(()=>o("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[o("span",{class:"visually-hidden"},"Loading...")],-1)),je=[Ye],Je={key:1,class:"actions"},Ke={key:1,class:"file-input"},Ge=["accept"],Qe={class:"add-btn"},We=H({__name:"SelectFile",props:{section:{default:"files"},accept:{default:"*"},url:{default:null}},emits:["file","add","remove","done","view","cancel"],setup(n,{emit:i}){const l=n,s=N(l.url||null),c=N(!1),y=a=>{const d=a.target.files;d.length>0?b(d[0]):i("cancel")},b=a=>{i("add","file",a);const d=new FileReader;d.onload=h=>{const v=h.target.result;i("add","base64",v),f(v,a.name)},d.onerror=()=>{console.error(`Error occurred reading file: ${a.name}`)},d.readAsDataURL(a)},f=(a,d)=>{a?(c.value=!0,s.value=a,j().post("/media/file",{section:l.section,base64:a,name:d}).then(({data:h})=>{h={...h},s.value=h,i("file",h)}).finally(()=>{c.value=!1,i("done",a)})):le("Something went wrong")},t=()=>{s.value&&window.open(s.value.url,"_blank")},u=()=>{Ae("Remove File").then(a=>{a&&(s.value=null,i("file",null),i("remove"))})};return(a,d)=>(m(),g("div",Pe,[s.value?(m(),g(ye,{key:0},[o("div",Ne,[o("div",{class:L({icon:!0,[s.value.extension]:!0})},[o("div",Ue,F(s.value.extension),1),o("div",Ve,F(s.value.mime),1),o("div",He,F(s.value.size),1)],2),o("div",qe,F(s.value.name),1)]),c.value?(m(),g("div",Oe,je)):S("",!0),c.value?S("",!0):(m(),g("div",Je,[o("button",{type:"button",class:"btn btn-primary btn-sm eye",onClick:t},[_(P,{path:r(pe)},null,8,["path"])]),o("button",{type:"button",class:"btn btn-danger btn-sm bin",onClick:u},[_(P,{path:r(me)},null,8,["path"])])]))],64)):(m(),g("label",Ke,[o("input",{type:"file",onInput:y,class:"file-input",accept:Array.isArray(a.accept)?a.accept.join(","):a.accept},null,40,Ge),E(a.$slots,"add",{},()=>[o("div",Qe,[_(P,{path:r(fe)},null,8,["path"])])],!0)]))]))}});const Xe=X(We,[["__scopeId","data-v-d9bfaf26"]]),Ze=H({inheritAttrs:!1,__name:"FileInput",props:{field:{},noLabel:{type:Boolean},section:{},accept:{}},setup(n){const i=n,{field:l,noLabel:s=!1,section:c="files",accept:y="*"}=i,b=u=>{l.update(u)},f=(u,a)=>{l.touch({target:{value:a}})},t=u=>{l.blur({target:{value:u}})};return(u,a)=>(m(),I(Z,{field:r(l),"no-label":r(s)},$e({default:R(({id:d})=>[_(Xe,{id:d,accept:r(y),section:r(c),url:r(l).value??null,onAdd:f,onFile:b,onDone:t},{add:R(()=>[E(u.$slots,"add")]),_:2},1032,["id","accept","section","url"])]),_:2},[ke(u.$slots,(d,h)=>({name:h,fn:R(v=>[E(u.$slots,h,Se(we({...v})))])}))]),1032,["field","no-label"]))}}),xe=["onSubmit"],es={class:"row"},ss={class:"col-md-12"},ts={class:"row"},os={class:"col-md-6"},as={class:"col-md-6"},ls={class:"row"},ns={class:"col-md-12"},is={class:"row"},ds={class:"col-md-12"},rs={key:0},cs={class:"submit-captcha pt-4"},us={class:"recaptcha"},ps=H({__name:"RecruitmentForm",props:{redirectUrl:{default:""}},setup(n){const i=N(!1);class l extends se{get name(){var t;return this.field("name",B("Name"),((t=this.initData)==null?void 0:t.name)??"")}get email(){var t;return this.field("email",B("Email"),((t=this.initData)==null?void 0:t.email)??"")}get phone(){var t;return this.field("phone",B("Phone"),((t=this.initData)==null?void 0:t.phone)??"")}get apply(){var t;return this.field("apply",B("Applying for"),((t=this.initData)==null?void 0:t.apply)??"")}get file(){var t;return this.field("file",B("Upload Your CV"),((t=this.initData)==null?void 0:t.file)??"")}get recaptcha(){var t;return this.field("recaptcha",B("ReCaptcha"),((t=this.initData)==null?void 0:t.recaptcha)??"")}get rules(){return[[[this.name,this.apply,this.phone,this.email],te],[[this.name,this.apply,this.file,this.phone,this.email],oe]]}}const[s,c,y]=x(l),b=()=>{var f,t,u;console.log((f=s.value)==null?void 0:f.data),(u=(t=s.value)==null?void 0:t.validate())==null||u.then(a=>{var d;a&&j().post("/recruitment",((d=s.value)==null?void 0:d.data)??{}).then(({data:h})=>{var v;ie("Form Sent"),console.log((v=s.value)==null?void 0:v.data)}).catch(h=>{var v,D;(D=(v=s.value)==null?void 0:v.addRemoteErrors)==null||D.call(v,h)}).finally(()=>{})})};return J(()=>{c()}),K(()=>{y()}),(f,t)=>r(s)?(m(),g("form",{key:0,onSubmit:W(b,["prevent"]),class:"recruitment-form-vue"},[o("div",es,[o("div",ss,[_(V,{field:r(s).name,class:L("name"),placeholder:""},null,8,["field"])])]),o("div",ts,[o("div",os,[_(V,{field:r(s).phone,class:L("number"),placeholder:""},null,8,["field"])]),o("div",as,[_(V,{field:r(s).email,class:L("mail"),placeholder:""},null,8,["field"])])]),o("div",ls,[o("div",ns,[_(V,{field:r(s).apply,class:L("apply"),placeholder:""},null,8,["field"])])]),o("div",is,[o("div",ds,[_(Ze,{field:r(s).file,accept:".pdf",class:L("file"),placeholder:""},null,8,["field","accept"])]),i.value?(m(),g("div",rs,[_(ne,{delay:5e3,animated:!0})])):S("",!0)]),o("div",cs,[o("div",null,[_(O,{type:"submit",color:"primary",class:"submit","spinner-color":"light",ref:"button"},{default:R(()=>[G(F(r(B)("SEND")),1)]),_:1},512)]),o("div",us,[_(ee,{field:r(s).recaptcha},null,8,["field"])])])],40,xe)):S("",!0)}});const ms=Q("recruitmentform",ps);ms.mount();
