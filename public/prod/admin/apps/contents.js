var Fe=Object.defineProperty;var Be=(a,e,t)=>e in a?Fe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var ie=(a,e,t)=>(Be(a,typeof e!="symbol"?e+"":e,t),t);import{c as Oe,a as je}from"../chunk/app.js";import{c as te,u as Le,l as ae,t as he}from"../chunk/index.js";import{_ as de,c as Pe,F as J,C as Ae,f as Re}from"../chunk/ModalForm.vue_vue_type_script_setup_true_lang.js";import{u as ze,B as R,n as We,a as ue,i as Ue}from"../chunk/Button.js";import{I as F}from"../chunk/Icon.js";import{b as Ve,a as le,c as qe,d as He,e as Ge,f as Ke,m as ye,g as _e,h as be,j as Xe,k as Ye,l as Je}from"../chunk/m6cd080c8112b9076.js";import{M as Y,a as $e,_ as Q}from"../chunk/StringInput.vue_vue_type_script_setup_true_lang.js";import{S as ke}from"../chunk/string.js";import{a as j,s as ce}from"../chunk/api.js";import{w as fe,u as Qe}from"../chunk/m78c574d5c3843a3d.js";import{d as N,a as p,f as $,F as O,g as H,v as g,r as P,k as i,A as S,y as M,b as B,o as Ze,i as et,e as h,n as Z,B as tt,C as Ce,T as at,D as lt,E as st,p as nt,q as it,z as De,c as W,G as xe}from"../chunk/mc55b2a42316522d6.js";import{r as C,u as k}from"../chunk/m6bdda40d8bd2cf5a.js";import{n as z,K as A,y as X}from"../chunk/ma6cfd38af5d4c661.js";import{_ as G}from"../chunk/_plugin-vue_export-helper.js";import{_ as we}from"../chunk/TextInput.vue_vue_type_script_setup_true_lang.js";import{_ as rt,a as Te,d as ot,b as ut,C as ct,c as dt}from"../chunk/ContentLoader.vue_vue_type_script_setup_true_lang.js";import{_ as Ie}from"../chunk/RadioInput.vue_vue_type_script_setup_true_lang.js";import{_ as Me}from"../chunk/Modal.vue_vue_type_script_setup_true_lang.js";import{T as ft}from"../chunk/m3fc8d974e5d8216d.js";import{_ as pt}from"../chunk/Seo.vue_vue_type_script_setup_true_lang.js";import{_ as vt}from"../chunk/EditorView.vue_vue_type_style_index_0_lang.js";import"../chunk/m21bbc25c9f3922b4.js";import"../chunk/m64d389f71fee61f4.js";import"../chunk/CloseButton.vue_vue_type_script_setup_true_lang.js";import"../chunk/ma0e3fbddd3785020.js";import"../chunk/m0006e5d5f2f1d6ce.js";import"../chunk/md74f29767a891470.js";import"../chunk/m1f9feaba4f71d948.js";import"../chunk/mf9318287aef1aff7.js";import"../chunk/md825331c71ee2150.js";import"../chunk/m3f31cae271cb9419.js";import"../chunk/m70a804eabc7aca6a.js";import"../chunk/mb498c278f04b6af0.js";import"../chunk/m9d53afba68c66192.js";import"../chunk/me2dc73ba3ddff3a0.js";import"../chunk/m91cc365b03266d60.js";import"../chunk/m83ea0bef6cab8431.js";import"../chunk/m2386e084f602c82c.js";import"../chunk/mb8063646094169aa.js";import"../chunk/m739ab1bf02c2db17.js";import"../chunk/mdbebdd5e57731077.js";import"../chunk/mab64b07d054bfd6d.js";import"../chunk/m7d7a7c6d011d9316.js";import"../chunk/mfe9c7759b05c1c34.js";import"../chunk/m00b1a7b3e0dbba07.js";import"../chunk/m89ff8ec026ac6cd4.js";import"../chunk/m5ac4d662e96449dd.js";import"../chunk/m80659984369ac5fa.js";import"../chunk/mf3f120fc158c659b.js";import"../chunk/m110db13e4dc1cf62.js";const[me,ht]=Oe({});class U extends Y{static generate(e,t,l={},c="content"){var b,D,m,T;let n=e,u=e.split(/\[(.*)\](.*)/).filter(y=>y);u.length>1&&(n=u[1]);const s=((T=(m=(D=(b=te())==null?void 0:b[c][n])==null?void 0:D.attrs)==null?void 0:m.find(y=>`${y.column}`==`${t}`))==null?void 0:T.fields)??[];return new U(l,y=>{ht(y,s)})}get attrs(){return me(this)}beforeCreate(){me(this).forEach(t=>{var c;this.createField(t.name,t.label,((c=this.initData)==null?void 0:c[t.name])??t.defaultValue??"");const l=this[t.name];this.setField(l)})}get rules(){return[]}}class mt extends Y{constructor(){super(...arguments);ie(this,"type","default")}get id(){var t;return this.field("id","ID",((t=this.initData)==null?void 0:t.id)??null)}get contentId(){var t;return this.field("content_id","Content ID",((t=this.initData)==null?void 0:t.content_id)??null)}get language(){var t;return this.field("language","Language",((t=this.initData)==null?void 0:t.language)??"en")}get title(){var t;return this.field("title","Title",((t=this.initData)==null?void 0:t.title)??"")}get excerpt(){var t;return this.field("excerpt","Excerpt",((t=this.initData)==null?void 0:t.excerpt)??"")}get blocks(){var t;return this.field("blocks","Text",((t=this.initData)==null?void 0:t.blocks)??{})}get attrs(){return this.hasOne("attrs",t=>U.generate(this.type,"local",t))}get rules(){return[[[this.title],ke],[[this.title],$e]]}}class gt extends Y{get id(){var e;return this.field("id","ID",((e=this.initData)==null?void 0:e.id)??null)}get type(){var e;return this.field("type","Type",((e=this.initData)==null?void 0:e.type)??"default")}get status(){var e;return this.field("status","Status",((e=this.initData)==null?void 0:e.status)??"active")}get position(){var e;return this.field("position","Position",((e=this.initData)==null?void 0:e.position)??"0")}get categories(){var e;return this.field("categories","Categories",((e=this.initData)==null?void 0:e.categories)??[])}get attrs1(){return this.hasOne("attrs1",e=>{var t;return U.generate(((t=this.initData)==null?void 0:t.type)??"default","1",this.initData.attrs)})}get attrs2(){return this.hasOne("attrs2",e=>{var t;return U.generate(((t=this.initData)==null?void 0:t.type)??"default","2",this.initData.attrs)})}get attrs3(){return this.hasOne("attrs3",e=>{var t;return U.generate(((t=this.initData)==null?void 0:t.type)??"default","3",this.initData.attrs)})}get locals(){return this.hasLocals(e=>new mt(e,t=>{t.type=this.initData.type??"default"}))}get rules(){return[]}controlData(e){return e.attrs={...e.attrs1,...e.attrs2,...e.attrs3},delete e.attrs1,delete e.attrs2,delete e.attrs3,e}}const yt=["id","onClick","disabled"],pe=N({__name:"Navs",props:{type:{default:"nav"},tabs:{},alignment:{default:"start"},vertical:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},justified:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:e}){var c;const t=C(((c=a.tabs[0])==null?void 0:c.name)??""),l=n=>{t.value=n.name,e("select",n)};return(n,u)=>(p(),$("ul",{class:z(["nav",{"nav-tabs":n.type==="tabs","nav-pills":n.type==="pills","nav-fill":n.fill,"nav-justified":n.justified,"flex-column":n.vertical,"justify-content-start":n.alignment==="start","justify-content-center":n.alignment==="center","justify-content-end":n.alignment==="end","flex-sm-row":n.responsive}]),role:"tablist"},[(p(!0),$(O,null,H(n.tabs,(s,o)=>(p(),$("li",{key:o,class:z(["nav-item",{"flex-sm-fill":n.responsive,"text-sm-center":n.responsive}])},[g("a",{href:"#",class:z(["nav-link",{disabled:s.disabled??!1,active:t.value===s.name}]),id:`tab-${s.name}`,"aria-current":"page",onClick:fe(b=>l(s),["prevent"]),disabled:s.disabled},[P(n.$slots,`${s.name}-tab`,{tab:s},()=>[s.icon?(p(),$(O,{key:0},[i(F,{path:s.icon},null,8,["path"]),S(" Â ")],64)):M("",!0),g("span",null,A(s.label),1)])],10,yt)],2))),128))],2))}}),_t={class:"tab-content"},bt=["aria-labelledby","tabindex"],$t=N({__name:"TabContent",props:{type:{default:"nav"},tabs:{},alignment:{default:"start"},vertical:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},justified:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1},disableNavs:{type:Boolean,default:!1}},setup(a,{expose:e}){var c;const t=C(((c=a.tabs[0])==null?void 0:c.name)??""),l=n=>{t.value=n.name};return e({select:l}),(n,u)=>(p(),$(O,null,[n.disableNavs?M("",!0):(p(),B(pe,{key:0,type:n.type,tabs:n.tabs,alignment:n.alignment,vertical:n.vertical,fill:n.fill,justified:n.justified,responsive:n.responsive,onSelect:l},null,8,["type","tabs","alignment","vertical","fill","justified","responsive"])),g("div",_t,[(p(!0),$(O,null,H(n.tabs,(s,o)=>(p(),$("div",{key:o,class:z(["tab-pane fade",{show:t.value===s.name,active:t.value===s.name}]),role:"tabpanel","aria-labelledby":`tab-${s.name}`,tabindex:o},[P(n.$slots,s.name,{tab:s},void 0,!0)],10,bt))),128))])],64))}});const Se=G($t,[["__scopeId","data-v-f4ea6047"]]),K=N({inheritAttrs:!1,__name:"AttrsInput",props:{model:{}},setup(a){return(e,t)=>(p(!0),$(O,null,H(e.model.attrs,l=>{var c;return p(),$("div",{key:l.name,class:"mb-3"},[i(rt,{type:l.type,field:(c=e.model)==null?void 0:c[l.name],attributes:l.attributes,props:l.props},null,8,["type","field","attributes","props"])])}),128))}}),kt=N({__name:"Wait",props:{time:{}},setup(a){const e=C(!1),t=setTimeout(()=>{e.value=!0},a.time);return Ze(()=>{clearTimeout(t)}),(l,c)=>e.value?P(l.$slots,"default",{key:0}):M("",!0)}}),Ct=a=>{let e=a,t=null,l=a.split(/\[(.*)\](.*)/).filter(c=>c);return l.length>1&&(t=+l[0],e=l[1]),{id:t,name:e}};function Dt(a){var l;const{name:e}=Ct(a);let t=!0;return Object.entries((l=te())==null?void 0:l.content).forEach(([c,n])=>{var s,o,b;c.split(".")[0]===e&&(t=t&&((b=(o=(s=te())==null?void 0:s.content)==null?void 0:o[c])==null?void 0:b.max)>0)}),t}class xt extends Y{constructor(){super(...arguments);ie(this,"type","default")}get id(){var t;return this.field("id","ID",((t=this.initData)==null?void 0:t.id)??null)}get categoryId(){var t;return this.field("category_id","Category ID",((t=this.initData)==null?void 0:t.category_id)??null)}get language(){var t;return this.field("language","Language",((t=this.initData)==null?void 0:t.language)??"en")}get title(){var t;return this.field("title","Title",((t=this.initData)==null?void 0:t.title)??"")}get excerpt(){var t;return this.field("excerpt","Excerpt",((t=this.initData)==null?void 0:t.excerpt)??"")}get attrs(){return this.hasOne("attrs",t=>U.generate(this.type,"local",t,"category"))}get rules(){return[[[this.title],ke],[[this.title],$e]]}}class wt extends Y{get id(){var e;return this.field("id","ID",((e=this.initData)==null?void 0:e.id)??null)}get type(){var e;return this.field("type","Type",((e=this.initData)==null?void 0:e.type)??"default")}get parentId(){var e;return this.field("parent_id","Parent ID",((e=this.initData)==null?void 0:e.parent_id)??null)}get path(){var e;return this.field("path","Path",((e=this.initData)==null?void 0:e.path)??null)}get status(){var e;return this.field("status","Status",((e=this.initData)==null?void 0:e.status)??"active")}get position(){var e;return this.field("position","Position",((e=this.initData)==null?void 0:e.position)??"0")}get locals(){return this.hasLocals(e=>new xt(e,t=>{t.type=this.initData.type??"default"}))}get attrs(){return this.hasOne("attrs",e=>{var t;return U.generate(((t=this.initData)==null?void 0:t.type)??"default","settings",this.initData.attrs,"category")})}get rules(){return[]}}const Tt={class:"node-header"},It={class:"prefix"},Mt=["onClick"],St={class:"title"},Nt={key:0,class:"node-body"},Et={key:1,class:"text-muted px-3"},Ft=N({__name:"Node",props:{model:{},index:{},refresh:{type:Function},level:{default:0},defaultMsg:{type:Boolean,default:!1}},setup(a){const e=C(!1),t=C([]),l=C(null),c=()=>{e.value=!e.value,Z(()=>{e.value&&!t.length&&u()})},n=et("dataFactory"),u=()=>{var o;(o=l.value)==null||o.start(),n({parent:a.model,level:a.level+1,index:a.index},b=>{var D;t.value=b,(D=l.value)==null||D.stop()})},s=()=>{t.value=[],Z(()=>{u()})};return(o,b)=>(p(),$("div",{class:z(["node",{expanded:e.value}])},[g("div",Tt,[g("div",It,[g("div",{class:"toggle-icon",onClick:fe(c,["stop"])},[i(F,{path:e.value?k(Ve):k(le)},null,8,["path"])],8,Mt)]),g("div",St,[P(o.$slots,"default",{model:o.model,level:o.level,index:o.index,refresh:o.refresh},void 0,!0)])]),e.value?(p(),$("div",Nt,[i(Te,{ref_key:"loader",ref:l,title:"Data",class:"ps-4"},{default:h(()=>[t.value.length>0?(p(),B(Ne,{key:0,parent:o.model,children:t.value,level:o.level+1,"default-msg":o.defaultMsg,refresh:s},{default:h(({model:D,level:m,index:T,refresh:y})=>[P(o.$slots,"default",{model:D,level:m,index:T,refresh:y},void 0,!0)]),_:3},8,["parent","children","level","default-msg"])):o.defaultMsg?(p(),$("div",Et,"There are no children yet")):M("",!0)]),_:3},512)])):M("",!0)],2))}});const Bt=G(Ft,[["__scopeId","data-v-8b779731"]]),Ot={key:0,class:"nodes"},jt=N({__name:"Nodes",props:{parent:{default:null},children:{},level:{default:0},defaultMsg:{type:Boolean,default:!1},refresh:{type:Function}},setup(a){return(e,t)=>e.children.length>0?(p(),$("div",Ot,[(p(!0),$(O,null,H(e.children,(l,c)=>(p(),B(Bt,{key:c,model:l,index:c,level:e.level,"default-msg":e.defaultMsg,refresh:e.refresh},{default:h(({model:n,level:u,index:s,refresh:o})=>[P(e.$slots,"default",{model:n,level:u,index:s,refresh:o},void 0,!0)]),_:2},1032,["model","index","level","default-msg","refresh"]))),128))])):M("",!0)}});const Ne=G(jt,[["__scopeId","data-v-bb41fc34"]]),Lt={key:0,class:"tree"},Pt=N({__name:"Tree",props:{dataFactory:{type:Function},defaultMsg:{type:Boolean,default:!1}},setup(a,{expose:e}){tt("dataFactory",a.dataFactory);const t=C([]),l=()=>{a.dataFactory({parent:null,level:0,index:0},n=>{t.value=n})},c=()=>{t.value=[],Z(()=>{l()})};return l(),e({refresh:c}),(n,u)=>t.value.length>0?(p(),$("div",Lt,[i(Ne,{children:t.value,refresh:c,"default-msg":n.defaultMsg},{default:h(({model:s,level:o,index:b,refresh:D})=>[P(n.$slots,"default",{model:s,level:o,index:b,refresh:D},void 0,!0)]),_:3},8,["children","default-msg"])])):M("",!0)}});const At=G(Pt,[["__scopeId","data-v-c60a5bd6"]]),Rt={beforeMount(a,e,t){a.clickOutsideEvent=function(l){!(a===l.target||a.contains(l.target))&&e.value&&e.value(l,a)},document.addEventListener("click",a.clickOutsideEvent),document.addEventListener("touchstart",a.clickOutsideEvent)},unmounted(a){document.removeEventListener("click",a.clickOutsideEvent),document.removeEventListener("touchstart",a.clickOutsideEvent)}},zt=Rt,Wt=a=>(lt("data-v-7a001ff1"),a=a(),st(),a),Ut=Wt(()=>g("div",{class:"fallback"},"No content found",-1)),Vt=N({__name:"ContextMenu",emits:["open","close"],setup(a,{expose:e,emit:t}){Qe(m=>({"15147f59":s.value,"15147f58":u.value}));const l=C(!1),c=C(null),n=C(null),u=C(0),s=C(0),o=m=>{l.value=!0,document.body.click(),Z(()=>{D(m.clientX,m.clientY),t("open")})},b=()=>{l.value=!1,t("close")},D=(m,T)=>{u.value=m,s.value=T;const y=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),v=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);if(c.value){const{width:_,height:r}=c.value.getBoundingClientRect();_+u.value>y&&u.value-_<0?u.value=Math.ceil((_+u.value)/2):_+u.value>y&&(u.value-=_),r+s.value>v&&s.value-r<0?s.value=Math.ceil((r+s.value)/2):r+s.value>v&&(s.value-=r)}u.value=`${u.value}px`,s.value=`${s.value}px`};return e({open:o,close:b}),(m,T)=>(p(),$(O,null,[P(m.$slots,"default",{ref_key:"element",ref:n,open:y=>o(y)},void 0,!0),(p(),B(at,{to:"body"},[l.value?Ce((p(),$("div",{key:0,ref_key:"contextMenu",ref:c,class:"context-menu"},[P(m.$slots,"contextmenu",{},()=>[Ut],!0)])),[[k(zt),b]]):M("",!0)]))],64))}});const qt=G(Vt,[["__scopeId","data-v-7a001ff1"]]),re=new Map,Ht={beforeMount(a,e,t){var c;let l={};typeof e.value=="object"?(a.setAttribute("title",((c=e.value)==null?void 0:c.title)??null),l={...l,...e.value}):typeof e.value=="string"&&(a.setAttribute("title",e.value),l.title=e.value),re.set(a,new ft(a,l))},beforeUnmount(a){var e;(e=re.get(a))==null||e.dispose(),re.delete(a)}},Gt=Ht,Kt=["onContextmenu"],Xt={key:0,class:"text-danger"},Yt={key:0,class:"list-group list-group-flush"},Jt=["onClick"],Qt={class:"item"},Zt={class:"name"},ea={key:1,class:"text-muted"},oe={},ge=[],ta=N({__name:"Ref",props:{value:{},startWith:{}},setup(a,{expose:e}){const t=it();ge.push(t);const l=C(null),c=C(null),n=C(null),u=C(null),s=(m=!1)=>new Promise(T=>{var y;(y=c.value)==null||y.start(),l.value=null,!m&&Object.hasOwn(oe,a.startWith)?Z(()=>{var v;l.value=[...oe[a.startWith]],b(),(v=c.value)==null||v.stop(),T(l.value)}):j().get(`/settings/references?startWith=${a.startWith}`).then(({data:v})=>{l.value=oe[a.startWith]=v.map(_=>o(_)),b(),T(l.value)}).finally(()=>{var v;(v=c.value)==null||v.stop()})}),o=m=>({...m,label:m.name.split(".").reverse().map(T=>ze(T)).join(" ")}),b=()=>{n.value=null,l.value.forEach(m=>{+m.value==+a.value&&(n.value={...o(m)})})},D=m=>{var v;const T=((v=n.value)==null?void 0:v.id)??0,y=m.id;T!==y&&(j().post("/settings/references",{oldId:T,newId:y,value:a.value}).finally(()=>{var _;(_=u.value)==null||_.close(),s(!0).then(()=>{ge.forEach((r,I)=>{var E;(r==null?void 0:r.uid)!==(t==null?void 0:t.uid)&&((E=r==null?void 0:r.exposed)==null||E.fetch())})})}),n.value={...m,value:a.value})};return nt(()=>{s()}),e({fetch:s}),(m,T)=>k(Le)().type==="developer"?(p(),B(qt,{key:0,ref_key:"contextMenu",ref:u},{default:h(({open:y})=>[g("span",{onContextmenu:fe(v=>y(v),["right","prevent"])},[P(m.$slots,"default",{},()=>[S(A(m.value),1)],!0),n.value&&+n.value.value==+m.value?Ce((p(),$("sup",Xt,[S("*")])),[[k(Gt),`${n.value.label}
${n.value.name}`]]):M("",!0)],40,Kt)]),contextmenu:h(()=>[i(Te,{ref_key:"loader",ref:c,title:"References"},{default:h(()=>[l.value&&l.value.length>0?(p(),$("ul",Yt,[(p(!0),$(O,null,H(l.value,y=>(p(),$("li",{key:y.id,class:"list-group-item p-0",onClick:v=>D(y)},[g("div",Qt,[n.value&&+n.value.value==+y.value?(p(),B(F,{key:0,path:k(qe),color:"success"},null,8,["path"])):(p(),B(F,{key:1,path:k(He),color:"muted"},null,8,["path"])),g("span",Zt,A(y.label),1)])],8,Jt))),128))])):(p(),$("div",ea,"There are no references yet"))]),_:1},512)]),_:3},512)):P(m.$slots,"default",{key:1},()=>[S(A(m.value),1)],!0)}});const Ee=G(ta,[["__scopeId","data-v-57e576fc"]]),se=N({inheritAttrs:!1,__name:"FriendlyUrlModal",props:{target:{},name:{},route:{},params:{}},setup(a){const e=C(null),t=C(null);class l extends Y{get id(){var s;return this.field("id","ID",((s=this.initData)==null?void 0:s.id)??null)}get target(){var s;return this.field("target","Target",((s=this.initData)==null?void 0:s.target)??"default")}get name(){var s;return this.field("name","Name",((s=this.initData)==null?void 0:s.name)??"")}get pattern(){var s;return this.field("pattern","Pattern",((s=this.initData)==null?void 0:s.pattern)??"")}get route(){var s;return this.field("route","Route",((s=this.initData)==null?void 0:s.route)??"")}get params(){var s;return this.field("params","Params",((s=this.initData)==null?void 0:s.params)??{})}get rules(){return[]}}const c=()=>{var u,s;(s=(u=e.value)==null?void 0:u.start)==null||s.call(u),j().get(`/friendlyUrl?filter[target]=${a.target}`).then(({data:o})=>{var b,D;(D=(b=t.value)==null?void 0:b.open)==null||D.call(b,o[0]??{target:a.target,name:a.name,route:a.route,params:a.params})}).finally(()=>{var o,b;(b=(o=e.value)==null?void 0:o.stop)==null||b.call(o)})},n=(u,s)=>{let o;u.isNewRecord?o=j().post("/friendlyUrl",u.data):o=j().put(`/friendlyUrl/${u.id.value}`,u.data),o.then(()=>{ce(`${a.name} url Saved Successfully`),s()}).catch(b=>{var D;s(!0),(D=u==null?void 0:u.addRemoteErrors)==null||D.call(u,b)})};return(u,s)=>(p(),$(O,null,[i(R,De({ref_key:"btn",ref:e,onClick:c},u.$attrs,{"spinner-small":""}),{default:h(()=>[i(F,{path:k(Ge)},null,8,["path"]),S("Url")]),_:1},16),i(de,{ref_key:"modal",ref:t,name:k(We)(u.name),"model-class":l,onSave:n},{default:h(({model:o})=>[i(Q,{field:o.pattern},null,8,["field"])]),_:1},8,["name"])],64))}}),ne=N({inheritAttrs:!1,__name:"SeoModal",props:{target:{default:""},title:{default:""}},setup(a){const e=C(null),t=()=>{var l;(l=e.value)==null||l.open()};return(l,c)=>(p(),$(O,null,[i(R,De(l.$attrs,{onClick:t}),{default:h(()=>[i(F,{path:k(Ke)},null,8,["path"]),S(" Seo ")]),_:1},16),i(Me,{ref_key:"modal",ref:e,title:`${l.title??l.target} SEO`,size:"xl"},{default:h(()=>[i(pt,{target:l.target},null,8,["target"])]),_:1},8,["title"])],64))}}),aa={class:"actions d-flex flex-row gap-3"},la={class:"categories"},sa={class:"category-node"},na={class:"name"},ia={class:"node-actions"},ra={class:"box mb-3"},oa={class:"h6"},ua={class:"mb-3"},ca={class:"mb-3"},da={class:"mb-3"},fa={class:"mb-3"},pa=N({__name:"Categories",props:{type:{},id:{default:0}},setup(a){const e=C(null),t=C(null),l=C(null),c=C(null),n=(v,_)=>{u(v.parent).then(r=>{_(r)})},u=v=>new Promise(_=>{j().get(`/categories?expand=local,locals&filter[type][like]=${a.id>0?`[${a.id}]`:""}${a.type}&filter[parent_id]=${(v==null?void 0:v.id)??null}&sort=position,local.name`).then(({data:r})=>{_(r)})}),s=(v,_=null)=>{var r,I;l.value=v,(I=(r=e.value)==null?void 0:r.open)==null||I.call(r,{type:`${a.id>0?`[${a.id}]`:""}${a.type}`,parent_id:(_==null?void 0:_.id)??null,path:_!=null&&_.id?`${[_.id].reduce((E,V)=>(E.push(V),E),_.path?_.path.split(","):[]).join(",")}`:null})},o=(v,_)=>{var r,I;l.value=v,(I=(r=e.value)==null?void 0:r.open)==null||I.call(r,_)},b=(v,_)=>{let r;v.isNewRecord?r=j().post("/categories",v.data):r=j().put(`/categories/${v.id.value}`,v.data),r.then(()=>{_(),l.value&&(l.value(),l.value=null)})},D=W(()=>[...ae().map(v=>({name:v.value,label:v.label,icon:_e})),{name:"settings",label:"Settings",icon:be}]),m=W(()=>[{value:"active",label:"Active"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"deleted",label:"Deleted"}]),T=v=>{c.value.select(v)},y=W(()=>`${a.id>0?`[${a.id}]`:""}${a.type}`);return(v,_)=>(p(),$(O,null,[g("div",aa,[t.value?(p(),B(R,{key:0,color:"primary",onClick:_[0]||(_[0]=r=>s(t.value.refresh))},{default:h(()=>[i(F,{path:k(le)},null,8,["path"]),S("Add New Category ")]),_:1})):M("",!0),i(se,{target:`content:${y.value}`,name:v.type,route:"/default/categories",params:{type:y.value}},null,8,["target","name","params"]),i(ne,{target:`categories:${y.value}-`,title:v.type,color:"primary"},null,8,["target","title"])]),g("div",la,[i(At,{ref_key:"tree",ref:t,"data-factory":n,"default-msg":""},{default:h(({model:r,level:I,index:E,refresh:V})=>{var ee,q;return[g("div",sa,[g("div",na,[(p(),B(Ee,{key:r.id,value:r.id,"start-with":`cms.categories.${y.value}`},{default:h(()=>[S(A(r.local.title),1)]),_:2},1032,["value","start-with"]))]),g("div",ia,[i(se,{target:`category:${r.id}`,name:((ee=r.local)==null?void 0:ee.title)??k(ue)(),route:"/default/content",params:{id:r.id},color:"danger",size:"sm"},null,8,["target","name","params"]),i(ne,{target:`category:${r.id}-`,title:(q=r==null?void 0:r.local)==null?void 0:q.title,color:"warning",size:"sm"},null,8,["target","title"]),i(R,{color:"success",size:"sm",onClick:f=>s(V,r)},{default:h(()=>[i(F,{path:k(le)},null,8,["path"])]),_:2},1032,["onClick"]),i(R,{color:"info",size:"sm",onClick:f=>o(V,r)},{default:h(()=>[i(F,{path:k(ye)},null,8,["path"])]),_:2},1032,["onClick"])])])]}),_:1},512)]),i(de,{name:"Category","model-class":k(wt),size:"lg",ref_key:"modal",ref:e,onSave:b},{header:h(()=>[i(pe,{type:"pills",tabs:D.value,alignment:"center",onSelect:T,style:{flex:"auto"}},null,8,["tabs"])]),default:h(({model:r})=>[i(Se,{tabs:D.value,type:"tabs","disable-navs":"",ref_key:"tabContent",ref:c},xe({navs:h(()=>[]),settings:h(({tab:I})=>[i(K,{model:r.attrs},null,8,["model"]),g("div",da,[i(Q,{field:r.position,type:"number"},null,8,["field"])]),g("div",fa,[i(Ie,{field:r.status,options:m.value,inline:""},null,8,["field","options"])])]),_:2},[H(k(ae)(),(I,E)=>({name:I.value,fn:h(({tab:V})=>[g("div",ra,[g("div",oa,A(I.label),1),g("div",{style:X([I.value==="ar"?{direction:"rtl"}:{direction:"ltr"}])},[g("div",ua,[i(Q,{field:r.locals[E].title,style:X([I.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"}])},null,8,["field","style"])]),g("div",ca,[i(we,{field:r.locals[E].excerpt,style:X([I.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"}])},null,8,["field","style"])]),i(K,{model:r.locals[E].attrs},null,8,["model"])],4)])])}))]),1032,["tabs"])]),_:1},8,["model-class"])],64))}});const va=G(pa,[["__scopeId","data-v-e669fa06"]]),ha={class:"col-md-3"},ma={class:"position-sticky top-0"},ga={class:"mb-3"},ya={class:"mb-3"},_a={class:"row h-100"},ba={class:"categories-checks"},$a={class:"mb-3"},ka={class:"mb-3"},Ca=N({__name:"Contents",props:{type:{},id:{default:0}},setup(a){const e=C(null),t=C(null),l=C(null),c=C(null),n=C(null),u=C([]),s=Pe({type:J.Number,name:"id",label:"ID",fitable:!0,sortable:!0,searchable:!0},{type:J.String,name:"title",label:"Title",searchable:!0,sortable:!0},{type:J.String,name:"status",label:"Status",fitable:!0,searchable:!0,sortable:!0},{type:J.Number,name:"position",label:"Position",fitable:!0,searchable:!0,sortable:!0},{type:J.Number,name:"type",label:"Type",fitable:!0,searchable:!0,sortable:!0}),o=W(()=>{var f,w,d;return((d=(w=(f=te())==null?void 0:f.type)==null?void 0:w.find(x=>x.name===a.type))==null?void 0:d.label)??a.type}),b=()=>{var f,w;(w=(f=t.value)==null?void 0:f.open)==null||w.call(f,{type:`${a.id>0?`[${a.id}]`:""}${a.type}`})},D=f=>{var d,x;const w={...f};w.categories&&(w.categories=w.categories.map(L=>L.id)),(x=(d=t.value)==null?void 0:d.open)==null||x.call(d,w)},m=(f,w)=>{let d;f.isNewRecord?d=j().post("/contents",f.data):d=j().put(`/contents/${f.id.value}`,f.data),d.then(()=>{var x;ce(`${o.value} ${f.locals[0].title.value} Saved Successfully`),(x=e.value)==null||x.refresh(),w()})},T=f=>{dt(`Delete ${f.locals[0].title}`).then(w=>{w&&j().delete(`/contents/${f.id}`).then(()=>{var d;ce(`Content "${f.locals[0].title}" deleted successfully`),(d=e.value)==null||d.refresh()})})},y=W(()=>[...ae().map(f=>({name:f.value,label:f.label,icon:_e})),{name:"settings",label:"Settings",icon:be}]),v=f=>{c.value.select(f)},_=f=>{u.value.push(f)},r=W(()=>[{value:"active",label:"Active"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"deleted",label:"Deleted"}]),I=W(()=>Array.isArray(n.value)&&n.value.length>0?"col-md-3":"col-md-4"),E=()=>{n.value=[],j().get(`/categories?expand=local&filter[type]=${a.type}&sort=position,local.name`).then(async({data:f})=>{n.value=ot((w,d,x,L)=>({value:w.id,label:`${d}&nbsp;${w.local.title}`,title:w.local.title}),f,{delimiter:Ue({path:Je})})})},V=()=>{var f,w;(w=(f=l.value)==null?void 0:f.open)==null||w.call(f)},ee=()=>{E()},q=W(()=>`${a.id>0?`[${a.id}]`:""}${a.type}`);return E(),(f,w)=>(p(),$(O,null,[i(Ae,{ref_key:"crud",ref:e,fields:k(s),fetch:k(Re)("/contents","local,locals,categories",{filter:{type:{like:q.value}}})},{topActions:h(()=>[k(Dt)(f.type)?M("",!0):(p(),$(O,{key:0},[i(se,{target:`content:${q.value}`,name:f.type,route:"/default/contents",params:{type:q.value}},null,8,["target","name","params"]),i(ne,{target:`contents:${q.value}-`,title:f.type,color:"primary"},null,8,["target","title"]),i(R,{color:"primary",onClick:V},{default:h(()=>[i(F,{path:k(Xe),color:"info"},null,8,["path"]),S(A(k(he)("Categories")),1)]),_:1}),i(R,{color:"primary",onClick:b},{default:h(()=>[i(F,{path:k(le),color:"info"},null,8,["path"]),S(A(`${k(he)("Add New")} ${o.value}`),1)]),_:1})],64))]),actions:h(({item:d})=>{var x,L;return[i(se,{target:`content:${d.id}`,name:((x=d.local)==null?void 0:x.title)??k(ue)(),route:"/default/content",params:{id:d.id},color:"success",size:"sm"},null,8,["target","name","params"]),i(ne,{target:`content:${d.id}-`,title:(L=d==null?void 0:d.local)==null?void 0:L.title,color:"warning",size:"sm"},null,8,["target","title"]),i(R,{color:"info",class:"text-light",onClick:ve=>D(d),size:"sm"},{default:h(()=>[i(F,{path:k(ye),color:"light"},null,8,["path"]),S("Edit ")]),_:2},1032,["onClick"]),i(R,{color:"danger",class:"text-light",onClick:ve=>T(d),size:"sm"},{default:h(()=>[i(F,{path:k(Ye),color:"light"},null,8,["path"]),S("Delete ")]),_:2},1032,["onClick"])]}),idValue:h(({item:d})=>[d.id?(p(),B(Ee,{key:d.id,value:d.id,"start-with":`cms.contents.${f.id>0?`${f.id}.`:""}${f.type}`},{default:h(()=>[S(A(d.id),1)]),_:2},1032,["value","start-with"])):M("",!0)]),titleValue:h(({item:d})=>{var x;return[S(A(((x=d.local)==null?void 0:x.title)??k(ue)()),1)]}),details:h(({item:d})=>{var x;return[i(vt,{content:(x=d.local)==null?void 0:x.blocks},null,8,["content"])]}),_:1},8,["fields","fetch"]),i(de,{name:o.value,"model-class":k(gt),fullscreen:"",ref_key:"modal",ref:t,onSave:m},{header:h(()=>[i(pe,{type:"pills",tabs:y.value,alignment:"center",onSelect:v,style:{flex:"auto"}},null,8,["tabs"])]),default:h(({model:d})=>[i(Se,{tabs:y.value,type:"tabs","disable-navs":"",ref_key:"tabContent",ref:c},xe({settings:h(({tab:x})=>[g("div",_a,[n.value.length>0?(p(),$("div",{key:0,class:z({[I.value]:!0})},[g("div",ba,[n.value.length>0?(p(),B(ct,{key:0,field:d.categories,options:n.value},null,8,["field","options"])):M("",!0)])],2)):M("",!0),g("div",{class:z({[I.value]:!0})},[i(K,{model:d.attrs1},null,8,["model"]),g("div",$a,[i(Q,{field:d.position},null,8,["field"])]),g("div",ka,[i(Ie,{field:d.status,inline:"",options:r.value},null,8,["field","options"])])],2),d.attrs2.length>0?(p(),$("div",{key:1,class:z({[I.value]:!0})},[i(K,{model:d.attrs2},null,8,["model"])],2)):M("",!0),d.attrs3.length>0?(p(),$("div",{key:2,class:z({[I.value]:!0})},[i(K,{model:d.attrs3},null,8,["model"])],2)):M("",!0)])]),_:2},[H(k(ae)(),(x,L)=>({name:x.value,fn:h(({tab:ve})=>[g("div",{class:"row h-100",style:X([x.value==="ar"?{direction:"rtl"}:{direction:"ltr"}])},[g("div",ha,[g("div",ma,[g("div",ga,[i(Q,{field:d.locals[L].title,style:X([x.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"}])},null,8,["field","style"])]),g("div",ya,[i(we,{field:d.locals[L].excerpt,style:X([x.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"},{height:"300px"}])},null,8,["field","style"])]),i(K,{model:d.locals[L].attrs},null,8,["model"])])]),g("div",{class:"col-md-9",ref:_},[u.value[L]?(p(),B(kt,{key:0,time:800},{default:h(()=>[i(ut,{field:d.locals[L].blocks,rtl:x.value==="ar",altitude:u.value[0].clientHeight-18,"no-label":""},null,8,["field","rtl","altitude"])]),_:2},1024)):M("",!0)])],4)])}))]),1032,["tabs"])]),_:1},8,["name","model-class"]),i(Me,{ref_key:"categoriesModal",ref:l,title:`Categories of ${o.value} `,size:"lg",onClose:ee},{default:h(()=>[i(va,{type:f.type,id:f.id},null,8,["type","id"])]),_:1},8,["title"])],64))}}),Da=N({__name:"Contents",props:{type:{}},setup(a){return(e,t)=>(p(),B(Ca,{type:e.type},null,8,["type"]))}}),xa=je("contents",Da);xa.mount();
