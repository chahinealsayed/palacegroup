var st=Object.defineProperty;var rt=(t,l,e)=>l in t?st(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e;var pe=(t,l,e)=>(rt(t,typeof l!="symbol"?l+"":l,e),e);import{I as O}from"./Icon.js";import{u as Fe,a as Ae,r as it,s as ut,k as _e,D as ct,E as Ie,F as dt,G as pt,H as vt,i as Ve}from"./m6cd080c8112b9076.js";import{M as Qe,b as ae,_ as Le,a as ft,c as ht,R as Ze}from"./StringInput.vue_vue_type_script_setup_true_lang.js";import{B as ie,b as Se,c as mt}from"./Button.js";import{c as gt}from"./app.js";import{d as N,p as ue,a as p,b as T,G as W,g as I,e as E,r as P,t as K,f as b,F as R,v as d,k as A,w as De,z as ne,y as U,c as G,A as le,o as ye,T as Ft,n as xe,H as Ce,D as et,E as tt,C as ve,j as _t}from"./mc55b2a42316522d6.js";import{r as k,u as s}from"./m6bdda40d8bd2cf5a.js";import{J,n as H,K as V,y as yt}from"./ma6cfd38af5d4c661.js";import{_ as bt}from"./TextInput.vue_vue_type_script_setup_true_lang.js";import{_ as Ct}from"./RadioInput.vue_vue_type_script_setup_true_lang.js";import{_ as se}from"./_plugin-vue_export-helper.js";import{_ as be,D as $t,a as wt}from"./Modal.vue_vue_type_script_setup_true_lang.js";import{w as Z,u as Te,v as at,a as Pe,c as Et}from"./m78c574d5c3843a3d.js";import{i as te,t as Dt,m as fe,b as kt}from"./index.js";import{P as Bt}from"./m3fc8d974e5d8216d.js";import{C as At}from"./md74f29767a891470.js";import{c as It,d as ke,a as ge}from"./api.js";import{_ as lt}from"./md825331c71ee2150.js";import{_ as Lt}from"./m3f31cae271cb9419.js";import{v as St}from"./mb498c278f04b6af0.js";import{f as xt}from"./m9d53afba68c66192.js";import{_ as Tt}from"./EditorView.vue_vue_type_style_index_0_lang.js";import{H as Rt}from"./me2dc73ba3ddff3a0.js";import{L as Mt}from"./m91cc365b03266d60.js";import{R as Vt}from"./m83ea0bef6cab8431.js";import{E as Pt}from"./m2386e084f602c82c.js";import{C as Nt}from"./mb8063646094169aa.js";import{I as Ht}from"./m739ab1bf02c2db17.js";import{T as zt}from"./mdbebdd5e57731077.js";import{P as jt}from"./mab64b07d054bfd6d.js";import{C as Ne}from"./m7d7a7c6d011d9316.js";import{N as Ut}from"./mfe9c7759b05c1c34.js";import{U as Ot}from"./m00b1a7b3e0dbba07.js";import{T as Yt}from"./m89ff8ec026ac6cd4.js";import{D as qt}from"./m5ac4d662e96449dd.js";import{W as Wt}from"./m0006e5d5f2f1d6ce.js";import{A as Gt}from"./m80659984369ac5fa.js";import{i as Kt,p as He,g as Jt,a as Xt}from"./mf3f120fc158c659b.js";const[ze,Qt]=gt({});class Re extends Qe{static generate(l,e={}){return new Re(e,o=>{Qt(o,l)})}beforeCreate(){ze(this).forEach(e=>{var o;this.createField(e.name,e.label,((o=this.initData)==null?void 0:o[e.name])??e.defaultValue??"");const a=this[e.name];this.setField(a)})}get attrs(){return ze(this)}get rules(){return[]}}const Zt={class:"col-md-10"},ea={class:"repeater-item d-flex flex-column gap-3"},ta={class:"col-md-2"},aa=N({inheritAttrs:!1,__name:"RepeaterInput",props:{field:{},noLabel:{type:Boolean},base:{},layout:{}},setup(t){const l=t,{field:e,noLabel:a=!1,base:o=12,layout:i}=l;let n=[];const c=k(0),v=(f={})=>{const _=[];i==null||i.forEach(C=>{C.forEach(w=>{_.push(w)})});const F=Re.generate(_,f);F.events.afterUpdate.listen(()=>{u()}),n.push(F),u(),c.value++},h=f=>{n.splice(f,1),n=n.filter(_=>_),u(),c.value++},u=()=>{e.update(n.map(f=>f.data))},r=(f,_)=>(f.fields.find(F=>F.name===_),f.fields.find(F=>F.name===_));return ue(()=>{Array.isArray(e.value)&&e.value.length>0?e.value.forEach(f=>{v(f)}):v()}),(f,_)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:F})=>[(p(),b("div",{key:c.value,class:"repeater-layout d-flex flex-column gap-3"},[(p(!0),b(R,null,I(s(n),(C,w)=>(p(),b("div",{key:w,class:"row"},[d("div",Zt,[d("div",ea,[(p(!0),b(R,null,I(s(i),(D,x)=>(p(),b("div",{key:x,class:"row"},[(p(!0),b(R,null,I(D,(M,z)=>(p(),b("div",{key:z,class:H({[`col-md-${s(o)/D.length}`]:!0})},[A(fn,{type:M.type,field:r(C,M.name),attributes:M.attributes,props:M.props},null,8,["type","field","attributes","props"])],2))),128))]))),128))])]),d("div",ta,[w>0?(p(),T(ie,{key:0,color:"danger",onClick:D=>h(w)},{default:E(()=>[A(O,{path:s(Fe)},null,8,["path"])]),_:2},1032,["onClick"])):(p(),T(ie,{key:1,color:"success",onClick:v},{default:E(()=>[A(O,{path:s(Ae)},null,8,["path"])]),_:1}))])]))),128))]))]),_:2},[I(f.$slots,(F,C)=>({name:C,fn:E(w=>[P(f.$slots,C,J(K({...w})))])}))]),1032,["field","no-label"]))}}),la={class:"options"},na=["name","id","value","checked"],oa=["for"],sa=["innerHTML"],ra=N({inheritAttrs:!1,__name:"checkInput",props:{field:{},noLabel:{type:Boolean,default:!1},options:{},inline:{type:Boolean,default:!1}},emits:["change","remove"],setup(t,{emit:l}){const e=k(t.options);De(()=>t.options,n=>{e.value=n},{deep:!0});const a=n=>{let c=t.field.value;if(Array.isArray(c)||(c=[]),n.target.checked)c=[...new Set([...c,n.target.value])];else{const v=c.findIndex(h=>`${h}`==`${n.target.value}`);v>=0&&c.splice(v,1)}t.field.update(c),l("change",c)},o=n=>{t.field.touch(n)},i=n=>{t.field.blur(n)};return(n,c)=>(p(),T(ae,{field:n.field,"no-label":n.noLabel},W({default:E(({id:v})=>[d("div",la,[(p(!0),b(R,null,I(e.value,(h,u)=>{var r,f;return p(),b(R,{key:u},[h==="delimiter"?(p(),b("div",{key:0,class:H({delimiter:!0,inline:n.inline})},null,2)):(p(),b("div",{key:1,class:H(["form-check",{"form-check-inline":n.inline}])},[d("input",ne({class:"form-check-input",type:"checkbox",name:`${n.field.name}[${u}]`,id:`${v}-${u}`,value:h.value},n.$attrs,{onInput:a,onFocus:o,onBlur:i,checked:((f=(r=n.field)==null?void 0:r.value)==null?void 0:f.includes(h.value))??!1}),null,16,na),d("label",{class:"form-check-label position-relative",for:`${v}-${u}`},[d("div",{innerHTML:h.label,class:H({"ps-3":h.deletable})},null,10,sa),h.deletable?(p(),T(O,{key:0,path:s(Fe),color:"danger",class:"position-absolute top-0 start-0"},null,8,["path"])):U("",!0)],8,oa)],2))],64)}),128))])]),_:2},[I(n.$slots,(v,h)=>({name:h,fn:E(u=>[P(n.$slots,h,J(K({...u})),void 0,!0)])}))]),1032,["field","no-label"]))}});const ia=se(ra,[["__scopeId","data-v-aa08c792"]]);function he(t,l){const e=[];let a=0;for(;a<t.length;)e.push(t.slice(a,l+a)),a+=l;return e}function ua(t,l,{filterBy:e="parent_id",filterValue:a=null,prefix:o="",level:i=0,delimiter:n="|__"}){let c=[];return l.filter(h=>h[e]===a).forEach(h=>{const u=ua(t,l,{filterBy:e,filterValue:h.id,prefix:`${o}${n}`,level:i+1,delimiter:n});c.push(t(h,o,i,u.length>0)),c=[...c,...u]}),c}function je(t,l){return t<0?(t=11,l--):t>11&&(t=0,l++),32-new Date(l,t,32).getDate()}function ca(t,l){let a=new Date(l,t,1).getDay()-1;return a<0&&(a=6),a}function da(t,l,e){const a=new Date,o=[],i=je(t,l),n=ca(t,l),c=je(t-1,l);let v=0,h=c-n;for(let r=0;r<n;r++){h++;let f=$e(l,t,h,"--");o.push({text:h,today:f.toDateString()===a.toDateString(),type:"previous",date:me(f),day:f.getDate(),active:we(f,e)}),v++}for(let r=1;r<=i;r++){let f=$e(l,t,r);o.push({text:r,today:f.toDateString()===a.toDateString(),type:"current",date:me(f),day:f.getDate(),active:we(f,e)}),v++}let u=42-v;for(let r=0;r<u;r++){let f=$e(l,t,r+1,"++");o.push({text:r+1,today:f.toDateString()===a.toDateString(),type:"next",date:me(f),day:f.getDate(),active:we(f,e)})}return o}function $e(t,l,e,a=""){return a==="--"?l--:a==="++"&&l++,l<0?(l=11,t--):l>11&&(l=0,t++),new Date(t,l,e)}function me(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}function we(t,l){return t.getFullYear()===l.getFullYear()&&t.getMonth()===l.getMonth()&&t.getDate()===l.getDate()}const pa={class:"calendar-component"},va={class:"card"},fa={class:"card-header"},ha={class:"row"},ma={class:"col text-center"},ga={class:"col-sm-8"},Fa={class:"heading"},_a={class:"col text-center"},ya={class:"card-body"},ba=["onClick"],Ca=["onClick"],$a={class:"row"},wa={class:"day-name"},Ea=["onClick"],Da=N({__name:"Calendar",props:{date:{type:[String,Object],default:()=>new Date}},emits:["change","done"],setup(t,{emit:l}){const e=t;let a=k(e.date?e.date instanceof Date?e.date:new Date(e.date):new Date);const o=k(a.value.getDate()),i=k(a.value.getMonth()),n=k(a.value.getFullYear()),c=k("dates"),v=k(n.value);De(a,L=>{l("change",me(L))},{immediate:!0}),De(n,L=>{v.value=L});const h=L=>{c.value=L},u=L=>{n.value=L,a.value=new Date(n.value,i.value,o.value),h("months")},r=(L,j)=>{i.value=L,n.value=j,a.value=new Date(n.value,i.value,o.value),h("dates")},f=L=>{a.value=new Date(L),o.value=a.value.getDate(),i.value=a.value.getMonth(),n.value=a.value.getFullYear(),l("done")},_=G(()=>({from:v.value-7,to:v.value+7})),F=G(()=>{const L=[];for(let j=_.value.from;j<=_.value.to;j++)L.push(j);return he(L,3)}),C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w=G(()=>{const L=C.map((j,Y)=>({value:Y,name:j}));return he(L,3)}),D=()=>{c.value==="years"?v.value-=15:c.value==="months"?n.value--:c.value==="dates"&&(i.value--,i.value<0&&(i.value=11,n.value--)),a.value=new Date(n.value,i.value,o.value)},x=()=>{c.value==="years"?v.value+=15:c.value==="months"?n.value++:c.value==="dates"&&(i.value++,i.value>11&&(i.value=0,n.value++)),a.value=new Date(n.value,i.value,o.value)},M=["Mo","Tu","We","Th","Fr","Sa","Su"],z=G(()=>he(da(i.value,n.value,a.value),7));return(L,j)=>(p(),b("div",pa,[d("div",va,[d("div",fa,[d("div",ha,[d("div",ma,[A(O,{path:s(it),onClick:j[0]||(j[0]=Z(Y=>D(),["stop","prevent"]))},null,8,["path"])]),d("div",ga,[d("div",Fa,[c.value==="years"?(p(),b(R,{key:0},[d("strong",{class:H({"text-dark":!s(te)(),"text-light":s(te)()})},V(_.value.from),3),le(" - "),d("strong",{class:H({"text-dark":!s(te)(),"text-light":s(te)()})},V(_.value.to),3)],64)):U("",!0),c.value==="months"?(p(),b("strong",{key:1,class:H({"text-dark":!s(te)(),"text-light":s(te)()}),onClick:j[1]||(j[1]=Z(Y=>h("years"),["stop","prevent"]))},V(n.value),3)):U("",!0),c.value==="dates"?(p(),b("div",{key:2,onClick:j[2]||(j[2]=Z(Y=>h("months"),["stop","prevent"]))},[d("strong",{class:H({"text-dark":!s(te)(),"text-light":s(te)()})},V(s(a).getDate().toString().padStart(2,"0")),3),le("   "),d("strong",{class:H({"text-dark":!s(te)(),"text-light":s(te)()})},V(C[s(a).getMonth()]),3),le("   "),d("strong",{class:H({"text-dark":!s(te)(),"text-light":s(te)()})},V(s(a).getFullYear()),3)])):U("",!0)])]),d("div",_a,[A(O,{path:s(ut),onClick:j[3]||(j[3]=Z(Y=>x(),["stop","prevent"]))},null,8,["path"])])])]),d("div",ya,[d("div",{class:H(["view-layout view-years",{active:c.value==="years"}])},[(p(!0),b(R,null,I(F.value,(Y,g)=>(p(),b("div",{key:g,class:"row no-full-height"},[(p(!0),b(R,null,I(Y,y=>(p(),b("div",{key:y,class:"col"},[d("a",{href:"#",class:H(["item year",{active:y===n.value}]),onClick:Z(m=>u(y),["stop","prevent"])},V(y),11,ba)]))),128))]))),128))],2),d("div",{class:H(["view-layout view-months",{active:c.value==="months"}])},[(p(!0),b(R,null,I(w.value,(Y,g)=>(p(),b("div",{key:g,class:"row no-full-height"},[(p(!0),b(R,null,I(Y,y=>(p(),b("div",{key:y,class:"col"},[d("a",{href:"#",class:H(["item month",{active:y.value===i.value}]),onClick:Z(m=>r(y.value,n.value),["stop","prevent"])},V(y.name),11,Ca)]))),128))]))),128))],2),d("div",{class:H(["view-layout view-dates",{active:c.value==="dates"}])},[d("div",$a,[(p(),b(R,null,I(M,Y=>d("div",{key:Y,class:"col px-0"},[d("div",wa,V(Y),1)])),64))]),(p(!0),b(R,null,I(z.value,(Y,g)=>(p(),b("div",{key:g,class:"row"},[(p(!0),b(R,null,I(Y,y=>(p(),b("div",{key:y.date,class:"col px-0"},[d("div",{class:H(["day-date",{active:y.active,today:y.today,[y.type]:!0}]),onClick:Z(m=>f(y.date),["stop","prevent"])},V(y.text),11,Ea)]))),128))]))),128))],2)])])]))}});const nt=se(Da,[["__scopeId","data-v-6303e883"]]),ka=N({inheritAttrs:!1,__name:"DateModalInput",props:{field:{},noLabel:{type:Boolean},noValue:{type:Boolean},cleanable:{type:Boolean}},emits:["open","change","close"],setup(t,{expose:l,emit:e}){const a=t,{field:o,noLabel:i=!1,noValue:n=!1,cleanable:c=!1}=a,v=k(!n),h=k(null),u=()=>{h.value.open(),e("open")},r=C=>{v.value&&(o.update(C),e("change",C)),v.value=!0},f=()=>{e("close",o.value)},_=()=>{var C,w;(w=(C=h.value)==null?void 0:C.close)==null||w.call(C)},F=()=>{o.update(null),e("change",null),_()};return l({open:u,close:_}),(C,w)=>(p(),b(R,null,[A(Le,{field:s(o),"no-label":s(i),onFocus:w[0]||(w[0]=D=>u())},W({_:2},[I(C.$slots,(D,x)=>({name:x,fn:E(M=>[P(C.$slots,x,J(K({...M})))])}))]),1032,["field","no-label"]),A(be,{title:s(o).label,"default-size":"",ref_key:"calendarRef",ref:h,onClose:f,padding:"0"},W({default:E(()=>[A(nt,{date:s(o).value,onChange:r,onDone:_},null,8,["date"])]),_:2},[s(c)?{name:"buttons",fn:E(()=>[A(ie,{color:"danger",onClick:F},{default:E(()=>[A(O,{path:s(_e)},null,8,["path"]),le("Remove ")]),_:1})]),key:"0"}:void 0]),1032,["title"])],64))}}),Ee=()=>{const t=k(null);return[t,e=>{t.value=e}]},Ba=d("div",{class:"popover-arrow"},null,-1),Aa=d("h3",{class:"popover-header"},null,-1),Ia=d("div",{class:"popover-body"},null,-1),La=[Ba,Aa,Ia],Sa=N({inheritAttrs:!1,__name:"Popover",props:{title:{default:""},trigger:{default:"hover"},animation:{type:Boolean,default:!1},delay:{default:0},customClass:{default:""},container:{default:!1},disabled:{type:Boolean,default:!1},placement:{default:"auto"},offset:{type:[String,Function,Array],default:[0,8]},width:{default:"auto"},controller:{default:null},padding:{default:"1rem"}},emits:["open","opened","close","closed","inserted"],setup(t,{expose:l,emit:e}){const a=k(null),[o,i]=Ee(),[n,c]=Ee(),[v,h]=Ee(),u=k(null),r=Se("popover"),f=$=>{e("close",$)},_=$=>{e("closed",$),t.controller&&t.controller.removeController()},F=$=>{e("open",$)},C=$=>{e("opened",$);const B=document.querySelector(`.${r}`);if(B){B.style.setProperty("--bs-popover-max-width",t.width),B.style.setProperty("width",t.width);const S=B.querySelector(".popover-body");S&&(S.style.setProperty("--bs-popover-body-padding-x",t.padding),S.style.setProperty("--bs-popover-body-padding-y",t.padding))}},w=$=>{e("inserted",$)},D=()=>{a.value=new Bt(o.value,{title:t.title,content:n.value,trigger:t.trigger,animation:t.animation,delay:t.delay,customClass:t.customClass,container:t.container,placement:t.placement,template:v.value.outerHTML,offset:t.offset,html:!0}),xe(()=>{var $,B,S,q,ee,Q;($=o.value)==null||$.addEventListener("show.bs.popover",F),(B=o.value)==null||B.addEventListener("shown.bs.popover",C),(S=o.value)==null||S.addEventListener("hide.bs.popover",f),(q=o.value)==null||q.addEventListener("hidden.bs.popover",_),(ee=o.value)==null||ee.addEventListener("inserted.bs.popover",w),(Q=u.value)==null||Q.remove()})},x=()=>{a.value.toggle()},M=()=>{a.value.show()},z=()=>{a.value.hide()},L=()=>{var $,B,S,q,ee,Q,X,ce,oe,re,de;(B=($=o.value)==null?void 0:$.removeEventListener)==null||B.call($,"hide.bs.popover",f),(q=(S=o.value)==null?void 0:S.removeEventListener)==null||q.call(S,"hidden.bs.popover",_),(Q=(ee=o.value)==null?void 0:ee.removeEventListener)==null||Q.call(ee,"show.bs.popover",F),(ce=(X=o.value)==null?void 0:X.removeEventListener)==null||ce.call(X,"shown.bs.popover",C),(oe=o.value)==null||oe.addEventListener("inserted.bs.popover",w),(de=(re=a.value)==null?void 0:re.dispose)==null||de.call(re)};return l({open:M,close:z,toggle:x,dispose:L,disable:()=>{a.value.disable()},enable:()=>{a.value.enable()},updateContent:($=null,B=null)=>{a.value.setContent()},toggleEnabled:()=>{a.value.toggleEnabled()},update:()=>{a.value.update()}}),ue(()=>{D(),setTimeout(()=>{var B,S;const $=((S=(B=n.value)==null?void 0:B.parentElement)==null?void 0:S.parentElement)??null;$&&($.style.width="100%",$.style.maxWidth=t.width)},500)}),ye(()=>{L()}),($,B)=>(p(),b(R,null,[P($.$slots,"default",{element:s(i)},()=>[A(ie,{ref:s(i)},{default:E(()=>[le(V($.title),1)]),_:1},512)]),(p(),T(Ft,{to:"body"},[d("div",{style:{display:"none"},ref_key:"toX",ref:u},[P($.$slots,"content",{element:s(c)}),P($.$slots,"template",{element:s(h)},()=>[d("div",{class:H({popover:!0,[`popover-${$.width}`]:!0,[s(r)]:!0}),role:"tooltip",ref:s(h),style:yt({"--bs-popover-max-width":"auto",width:$.width})},La,6)])],512)]))],64))}}),xa={class:"d-flex flex-horizontal gap-3 p-3 mt-3 justify-content-end border-top"},Ta=N({inheritAttrs:!1,__name:"DatePopoverInput",props:{field:{},noLabel:{type:Boolean},noValue:{type:Boolean},cleanable:{type:Boolean}},emits:["open","change","close"],setup(t,{expose:l,emit:e}){const a=t,{field:o,noLabel:i=!1,noValue:n=!1,cleanable:c=!1}=a,v=k(!n),h=k(null),u=()=>{h.value.open(),e("open")},r=C=>{v.value&&(o.update(C),e("change",C)),v.value=!0},f=()=>{e("close",o.value)},_=()=>{var C,w;(w=(C=h.value)==null?void 0:C.close)==null||w.call(C)},F=()=>{o.update(null),e("change",null),_()};return l({open:u,close:_}),(C,w)=>(p(),T(Sa,{title:s(o).label,ref_key:"calendarRef",ref:h,onClose:f,trigger:"manual",width:"500px",padding:"0"},{default:E(({element:D})=>[d("div",{ref:D},[A(Le,{field:s(o),"no-label":s(i),onClick:u},W({_:2},[I(C.$slots,(x,M)=>({name:M,fn:E(z=>[P(C.$slots,M,J(K({...z})))])}))]),1032,["field","no-label"])],512)]),content:E(({element:D})=>[d("div",{ref:D},[A(nt,{date:s(o).value,onChange:r,onDone:_},null,8,["date"]),d("div",xa,[A(ie,{color:"dark",onClick:_},{default:E(()=>[A(O,{path:s(Fe)},null,8,["path"]),le("Close ")]),_:1}),s(c)?(p(),T(ie,{key:0,color:"danger",onClick:F},{default:E(()=>[A(O,{path:s(_e)},null,8,["path"]),le("Remove ")]),_:1})):U("",!0)])],512)]),_:3},8,["title"]))}}),Ra=N({inheritAttrs:!1,__name:"DateInput",props:{field:{},noLabel:{type:Boolean},noValue:{type:Boolean},cleanable:{type:Boolean},popover:{type:Boolean}},emits:["open","change","close"],setup(t,{expose:l,emit:e}){const a=t,{field:o,noLabel:i=!1,noValue:n=!1,cleanable:c=!1,popover:v=!1}=a;k(!n);const h=k(null),u=()=>{h.value.open(),e("open")},r=()=>{e("close",o.value)};return l({openCalendar:u,closeCalendar:()=>{var _,F;(F=(_=h.value)==null?void 0:_.close)==null||F.call(_)}}),(_,F)=>s(v)?(p(),T(Ta,{key:0,ref_key:"calendarRef",ref:h,field:s(o),"no-label":s(i),"no-value":s(n),cleanable:s(c),onClose:r},null,8,["field","no-label","no-value","cleanable"])):(p(),T(ka,{key:1,ref_key:"calendarRef",ref:h,field:s(o),"no-label":s(i),"no-value":s(n),cleanable:s(c),onClose:r},null,8,["field","no-label","no-value","cleanable"]))}}),Ma=It(be),Va=(t,l,e="No",a="Yes")=>new Promise(async o=>{const i=Se("confirm"),n=await Ma({title:t,closeText:e,onOpened:()=>{var c;(c=document.querySelector(`#${i}`))==null||c.addEventListener("click",()=>{n.close(),o(!0)})},onDismiss:()=>{o(!1)}},{...l?{default:()=>Ce("p",{},l)}:{},buttons:()=>[Ce(ie,{class:["btn","btn-primary"],id:i},[Ce(O,{path:ct,color:"success"},""),a])]});n.open()});function Me(t,l){return Va(t,l)}const Pa=t=>(et("data-v-ca9d277f"),t=t(),tt(),t),Na=["src"],Ha={key:0,class:"uploading"},za=Pa(()=>d("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[d("span",{class:"visually-hidden"},"Loading...")],-1)),ja=[za],Ua={key:1,class:"actions"},Oa={key:0,class:"drop-zone"},Ya=["accept"],qa={class:"add-btn"},Wa=N({inheritAttrs:!1,__name:"ImageUploader",props:{section:{default:"images"},crop:{type:Boolean,default:!1},aspectRatio:{type:[Number,Boolean],default:!1},accept:{default:"image/jpeg"},width:{default:null},height:{default:null},url:{default:null},gallery:{default:()=>-1}},emits:["image","add","remove","done","view","cancel"],setup(t,{expose:l,emit:e}){Te(g=>({"3dc091e3":Y.value,"4ff39c35":j.value}));const a=k(null),o=k(null),i=k(null),n=k(t.url||null),c=k(!1),v=k(!1),h=g=>{const y=g.target.files;y.length>0?_(y[0]):e("cancel")},u=g=>{g.preventDefault(),v.value=!0},r=g=>{g.preventDefault(),v.value=!1},f=g=>{var m;g.preventDefault(),v.value=!1;const y=((m=g.dataTransfer)==null?void 0:m.files)??[];y.length>0?_(y[0]):e("cancel")},_=g=>{e("add","file",g);const y=new FileReader;y.onload=m=>{const $=m.target.result;e("add","base64",$),t.crop&&!["image/svg+xml"].includes(g.type)?F($):w($).then(B=>{x($,B)})},y.onerror=()=>{console.error(`Error occurred reading file: ${g.name}`)},y.readAsDataURL(g)},F=g=>{var y;(y=a.value)==null||y.open(),xe(()=>{setTimeout(()=>{i.value=At.create({parent:o.value,image:g,bounds:{width:"100%",height:"auto"},backgroundColors:["#ffffff","#f3f3f3"],selection:{color:"#045892",activeColor:"#034b7c",aspectRatio:t.aspectRatio,minWidth:t.width||200,minHeight:t.height||300,width:t.width||400,height:t.height||500,x:0,y:0},onInit:()=>{console.log("Initial")}}),i.value.on("start",function(m){console.log("Start",m)}).on("move",function(m){console.log("Move",m)}).on("resize",function(m){console.log("Resize",m)}).on("change",function(m){console.log("Change",m)}).on("end",function(m){console.log("End",m)})},300)})},C=()=>{var g,y,m,$,B,S,q,ee,Q;if(i.value){const X=((m=(y=(g=i.value)==null?void 0:g.selectionLayer)==null?void 0:y.selection)==null?void 0:m.region)??null;if(X){const ce=(S=(B=($=i.value)==null?void 0:$.image)==null?void 0:B.src)==null?void 0:S.split(";")[0].split("/")[1],oe=document.createElement("canvas");oe.width=X.right-X.left,oe.height=X.bottom-X.top;const re=oe.getContext("2d");re.drawImage((ee=(q=i.value)==null?void 0:q.image)==null?void 0:ee.source,-X.left,-X.top);const de=re.getImageData(0,0,oe.width,oe.height);(Q=a.value)==null||Q.close(),x((oe==null?void 0:oe.toDataURL(`image/${ce}`))??null,de)}else ke("Something went wrong")}},w=g=>new Promise(y=>{const m=document.createElement("canvas"),$=m.getContext("2d"),B=new Image;B.onload=function(){$.drawImage(B,0,0);const S=$.getImageData(0,0,m.width,m.height);y(S)},B.src=g}),D=g=>Object.entries(he([...g.data],4).map(([y,m,$,B])=>`rgba(${y},${m},${$},${B})`).reduce((y,m)=>(Object.hasOwn(y,m)||(y[m]=0),y[m]++,y),{})).filter(([y,m])=>m>1).sort(([,y],[,m])=>m-y).slice(0,10).map(([y])=>y),x=(g,y)=>{g?(c.value=!0,n.value=g,ge().post("/media/image",{section:t.section,base64:g}).then(({data:m})=>{m={...m,palette:y?D(y):[]},n.value=m,e("image",m)}).finally(()=>{c.value=!1,e("done",g)})):ke("Something went wrong")},M=()=>{i.value=null,o.value&&(o.value.innerHTML="")},z=()=>{var g;if(t.gallery!==void 0&&t.gallery>=0)e("view",t.gallery);else{const y=lt.show([{src:((g=n.value)==null?void 0:g.url)??n.value,caption:typeof n.value=="object"?`Size: <span class="text-primary">${n.value.size}</span>, Dimension: <span class="text-primary">${n.value.width}x${n.value.height}</span>, Bits: <span class="text-primary">${n.value.bits}</span>, Mime: <span class="text-primary">${n.value.mime}</span>`:void 0}]);e("view",y)}},L=()=>{Me("Remove Image").then(g=>{g&&(n.value=null,e("image",null),e("remove"))})},j=G(()=>t.aspectRatio?`${200/t.aspectRatio}px`:"100px"),Y=G(()=>{if(n.value&&Array.isArray(n.value.palette)&&n.value.palette.length>0){const g=["to top left","to top","to top right","to left","to bottom left","to right","to bottom left","to bottom","to bottom right","to top right"];return`${n.value.palette.map((y,m)=>`linear-gradient(${g[m]},  transparent, ${y})`).join(", ")}`}return"#ffffff"});return l({image:()=>n.value}),(g,y)=>{var m;return p(),b(R,null,[n.value?(p(),b("div",ne({key:0,class:["image",{[n.value.extension]:!0}]},g.$attrs),[d("img",{src:((m=n.value)==null?void 0:m.url)??n.value,loading:"lazy",class:"img-fluid"},null,8,Na),c.value?(p(),b("div",Ha,ja)):U("",!0),c.value?U("",!0):(p(),b("div",Ua,[d("button",{type:"button",class:"btn btn-primary btn-sm",onClick:z},[A(O,{path:s(Ie)},null,8,["path"])]),d("button",{type:"button",class:"btn btn-danger btn-sm",onClick:L},[A(O,{path:s(_e)},null,8,["path"])])]))],16)):(p(),b("label",ne({key:1,class:"media-input-wrapper",onDragover:u,onDragleave:r,onDrop:f},g.$attrs),[v.value?(p(),b("div",Oa,"Drop an image to upload")):(p(),b(R,{key:1},[d("input",{type:"file",onInput:h,class:"file-input",accept:Array.isArray(g.accept)?g.accept.join(","):g.accept},null,40,Ya),P(g.$slots,"add",{},()=>[d("div",qa,[A(O,{path:s(Ae)},null,8,["path"])])],!0)],64))],16)),g.crop?(p(),T(be,{key:2,title:"Crop Image",ref_key:"cropperModal",ref:a,size:"xl",onClose:M},{buttons:E(()=>[d("button",{type:"button",class:"btn btn-primary",onClick:C},[A(O,{path:s(dt)},null,8,["path"]),le(" "+V(s(Dt)("Crop")),1)])]),default:E(()=>[d("div",{class:"image-crop-wrapper",ref_key:"cropperWrapper",ref:o},null,512)]),_:1},512)):U("",!0)],64)}}});const Be=se(Wa,[["__scopeId","data-v-ca9d277f"]]),ot=N({inheritAttrs:!1,__name:"ImageInput",props:{field:{},noLabel:{type:Boolean},section:{},crop:{type:Boolean},aspectRatio:{type:[Number,Boolean]},accept:{},width:{},height:{}},setup(t){const l=t,{field:e,noLabel:a=!1,section:o="images",crop:i=!1,aspectRatio:n=!1,accept:c="image/jpeg",width:v=null,height:h=null}=l,u=_=>{e.update(_)},r=(_,F)=>{e.touch({target:{value:F}})},f=_=>{e.blur({target:{value:_}})};return(_,F)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:C})=>[A(Be,{accept:s(c),"aspect-ratio":s(n),crop:s(i),height:s(h),section:s(o),width:s(v),url:s(e).value??null,onAdd:r,onImage:u,onDone:f},{add:E(()=>[P(_.$slots,"add")]),_:3},8,["accept","aspect-ratio","crop","height","section","width","url"])]),_:2},[I(_.$slots,(C,w)=>({name:w,fn:E(D=>[P(_.$slots,w,J(K({...D})))])}))]),1032,["field","no-label"]))}}),Ga=t=>(et("data-v-d9bfaf26"),t=t(),tt(),t),Ka={class:"select-file-component"},Ja={class:"file-output"},Xa={class:"extension"},Qa={class:"mime"},Za={class:"size"},el={class:"name"},tl={key:0,class:"uploading"},al=Ga(()=>d("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[d("span",{class:"visually-hidden"},"Loading...")],-1)),ll=[al],nl={key:1,class:"actions"},ol={key:1,class:"file-input"},sl=["accept"],rl={class:"add-btn"},il=N({__name:"SelectFile",props:{section:{default:"files"},accept:{default:"*"},url:{default:null}},emits:["file","add","remove","done","view","cancel"],setup(t,{emit:l}){const e=t,a=k(e.url||null),o=k(!1),i=u=>{const r=u.target.files;r.length>0?n(r[0]):l("cancel")},n=u=>{l("add","file",u);const r=new FileReader;r.onload=f=>{const _=f.target.result;l("add","base64",_),c(_,u.name)},r.onerror=()=>{console.error(`Error occurred reading file: ${u.name}`)},r.readAsDataURL(u)},c=(u,r)=>{u?(o.value=!0,a.value=u,ge().post("/media/file",{section:e.section,base64:u,name:r}).then(({data:f})=>{f={...f},a.value=f,l("file",f)}).finally(()=>{o.value=!1,l("done",u)})):ke("Something went wrong")},v=()=>{a.value&&window.open(a.value.url,"_blank")},h=()=>{Me("Remove File").then(u=>{u&&(a.value=null,l("file",null),l("remove"))})};return(u,r)=>(p(),b("div",Ka,[a.value?(p(),b(R,{key:0},[d("div",Ja,[d("div",{class:H({icon:!0,[a.value.extension]:!0})},[d("div",Xa,V(a.value.extension),1),d("div",Qa,V(a.value.mime),1),d("div",Za,V(a.value.size),1)],2),d("div",el,V(a.value.name),1)]),o.value?(p(),b("div",tl,ll)):U("",!0),o.value?U("",!0):(p(),b("div",nl,[d("button",{type:"button",class:"btn btn-primary btn-sm eye",onClick:v},[A(O,{path:s(Ie)},null,8,["path"])]),d("button",{type:"button",class:"btn btn-danger btn-sm bin",onClick:h},[A(O,{path:s(_e)},null,8,["path"])])]))],64)):(p(),b("label",ol,[d("input",{type:"file",onInput:i,class:"file-input",accept:Array.isArray(u.accept)?u.accept.join(","):u.accept},null,40,sl),P(u.$slots,"add",{},()=>[d("div",rl,[A(O,{path:s(Ae)},null,8,["path"])])],!0)]))]))}});const ul=se(il,[["__scopeId","data-v-d9bfaf26"]]),cl=N({inheritAttrs:!1,__name:"FileInput",props:{field:{},noLabel:{type:Boolean},section:{},accept:{}},setup(t){const l=t,{field:e,noLabel:a=!1,section:o="files",accept:i="*"}=l,n=h=>{e.update(h)},c=(h,u)=>{e.touch({target:{value:u}})},v=h=>{e.blur({target:{value:h}})};return(h,u)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:r})=>[A(ul,{id:r,accept:s(i),section:s(o),url:s(e).value??null,onAdd:c,onFile:n,onDone:v},{add:E(()=>[P(h.$slots,"add")]),_:2},1032,["id","accept","section","url"])]),_:2},[I(h.$slots,(r,f)=>({name:f,fn:E(_=>[P(h.$slots,f,J(K({..._})))])}))]),1032,["field","no-label"]))}}),dl=["id","value","list"],pl=["id"],vl=["value","label"],fl=N({inheritAttrs:!1,__name:"RangeInput",props:{field:{},noLabel:{type:Boolean},options:{}},setup(t){const l=t,{field:e,noLabel:a=!1,options:o=[]}=l,i=v=>{e.update(v.target.value)},n=v=>{e.touch(v)},c=v=>{e.blur(v)};return(v,h)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:u})=>[d("input",ne({id:u,class:{"is-invalid":s(e).hasErrors},value:s(e).value,type:"range"},v.$attrs,{onInput:i,onFocus:n,onBlur:c,autocomplete:"off",spellcheck:"false",list:`list-of-${u}`}),null,16,dl),s(o).length>0?(p(),b("datalist",{key:0,id:`list-of-${u}`},[(p(!0),b(R,null,I(s(o),r=>(p(),b("option",{key:r,value:r,label:`${r}`},null,8,vl))),128))],8,pl)):U("",!0)]),_:2},[I(v.$slots,(u,r)=>({name:r,fn:E(f=>[P(v.$slots,r,J(K({...f})))])}))]),1032,["field","no-label"]))}}),hl=["id"],ml=["value","selected"],gl=N({inheritAttrs:!1,__name:"SelectInput",props:{field:{},noLabel:{type:Boolean},options:{},prompt:{type:[String,Boolean]}},setup(t){const l=t,{field:e,noLabel:a=!1,options:o,prompt:i=!1}=l,n=u=>{e.update(u.target.value)},c=u=>{e.touch(u)},v=u=>{e.blur(u)},h=G(()=>i?[{value:"",label:i},...o]:o);return(u,r)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:f})=>[d("select",ne({id:f,class:["form-control",{"is-invalid":s(e).hasErrors}]},u.$attrs,{onInput:n,onClick:c,onBlur:v}),[(p(!0),b(R,null,I(h.value,_=>(p(),b("option",{key:_.value,value:_.value,selected:_.value===s(e).value},V(_.label),9,ml))),128))],16,hl)]),_:2},[I(u.$slots,(f,_)=>({name:_,fn:E(F=>[P(u.$slots,_,J(K({...F})))])}))]),1032,["field","no-label"]))}}),Fl={class:"form-check form-switch"},_l=["id","value","checked"],yl=["for"],bl=N({inheritAttrs:!1,__name:"ToggleInput",props:{field:{},trueValue:{},falseValue:{}},setup(t){const l=t,{field:e,trueValue:a=1,falseValue:o=0}=l,i=v=>{e.update(v.target.checked?a:o)},n=v=>{e.touch(v)},c=v=>{e.blur(v)};return(v,h)=>(p(),T(ae,{field:s(e),"no-label":""},W({default:E(({id:u})=>[d("div",Fl,[d("input",ne({id:u,class:["form-check-input",{"is-invalid":s(e).hasErrors}],type:"checkbox",role:"switch",value:s(a)},v.$attrs,{onInput:i,onFocus:n,onBlur:c,checked:s(e).value===s(a)}),null,16,_l),d("label",{class:"form-check-label",for:u},[P(v.$slots,"default",{},()=>[le(V(s(e).label),1)])],8,yl)])]),_:2},[I(v.$slots,(u,r)=>({name:r,fn:E(f=>[P(v.$slots,r,J(K({...f})))])}))]),1032,["field"]))}}),Cl=N({__name:"GalleryUploader",props:{list:{default:()=>[]},section:{default:"gallery"},crop:{type:Boolean,default:!1},aspectRatio:{type:[Number,Boolean],default:!1},accept:{default:"image/jpeg"},width:{default:null},height:{default:null},max:{type:[Number,Boolean],default:!1},direction:{default:"row"}},emits:["touch","blur","update","remove","view"],setup(t,{emit:l}){Te(r=>({"3aeaba5b":r.direction}));const e=k(t.list||[]),a=k(0),o=r=>{e.value.push(r),a.value++,l("update",e.value,r)},i=(r,f)=>{l("touch",e.value,r,f)},n=r=>{l("blur",e.value,r)},c=r=>{const f=e.value[r];e.value.splice(r,1),e.value=e.value.filter(_=>_),a.value++,l("update",e.value,f),l("remove",e.value,f)},v=r=>{var _;const f=lt.show((_=e.value)==null?void 0:_.map(F=>({src:(F==null?void 0:F.url)??F,type:"image",caption:typeof F.value=="object"?`Size: <span class="text-primary">${F.value.size}</span>, Dimension: <span class="text-primary">${F.value.width}x${F.value.height}</span>, Bits: <span class="text-primary">${F.value.bits}</span>, Mime: <span class="text-primary">${F.value.mime}</span>`:null})),{startIndex:r});l("view",f)},h={group:Se()},u=r=>{const{oldIndex:f,newIndex:_}=r,F=[...e.value],C=F.splice(f,1).at(0);F.splice(_,0,C),e.value=[...F],a.value++,l("update",e.value,C)};return(r,f)=>(p(),b("div",ne({class:"gallery",key:a.value},r.$attrs),[A(s(Lt),{list:e.value,"item-key":"url",class:"inner",onUpdate:u,options:h},{item:E(({element:_,index:F})=>[d("div",null,[_?(p(),T(Be,{key:0,accept:r.accept,"aspect-ratio":r.aspectRatio,crop:r.crop,height:r.height,section:r.section,width:r.width,url:_,gallery:F,onAdd:i,onImage:o,onDone:n,onRemove:()=>c(F),onView:C=>v(F)},null,8,["accept","aspect-ratio","crop","height","section","width","url","gallery","onRemove","onView"])):U("",!0)])]),_:1},8,["list"]),!r.max||r.max&&e.value.length<r.max?(p(),T(Be,{key:0,accept:r.accept,"aspect-ratio":r.aspectRatio,crop:r.crop,height:r.height,section:r.section,width:r.width,onAdd:i,onImage:o,onDone:n,class:H({"add-item":e.value.length>0})},null,8,["accept","aspect-ratio","crop","height","section","width","class"])):U("",!0)],16))}});const $l=N({inheritAttrs:!1,__name:"GalleryInput",props:{field:{},noLabel:{type:Boolean,default:!1},section:{default:"gallery"},crop:{type:Boolean,default:!1},aspectRatio:{type:[Number,Boolean],default:!1},accept:{default:"image/jpeg"},width:{default:null},height:{default:null},max:{type:[Number,Boolean],default:!1},direction:{default:"row"}},setup(t){const l=(o,i)=>{t.field.update(o)},e=(o,i,n)=>{t.field.touch({target:{value:o}})},a=(o,i)=>{t.field.blur({target:{value:o}})};return(o,i)=>(p(),T(ae,{field:o.field,"no-label":o.noLabel},W({default:E(({id:n})=>[A(Cl,{list:o.field.value,accept:o.accept,"aspect-ratio":o.aspectRatio,crop:o.crop,height:o.height,section:o.section,width:o.width,max:o.max,direction:o.direction,onAdd:e,onUpdate:l,onDone:a},null,8,["list","accept","aspect-ratio","crop","height","section","width","max","direction"])]),_:2},[I(o.$slots,(n,c)=>({name:c,fn:E(v=>[P(o.$slots,c,J(K({...v})))])}))]),1032,["field","no-label"]))}}),wl={beforeMount(t,l,e){Object.keys(l.value).forEach(a=>{t.style.setProperty(a,l.value[a])})}},Ue=wl,El=St.vue3Debounce({lock:!0}),Dl={class:"tags"},kl={class:"name"},Bl=["onClick"],Al={class:"input-tags"},Il={key:0,class:"results"},Ll=["onClick"],Sl=["onClick"],xl={key:1,class:"selected text-muted"},Tl={key:2,class:"loader text-muted"},Rl=N({inheritAttrs:!1,__name:"TagsInput",props:{field:{},noLabel:{type:Boolean}},setup(t){const l=t,{field:e,noLabel:a=!1}=l,o=["#F44336","#FF1744","#B71C1C","#EC407A","#880E4F","#F50057","#C51162","#AB47BC","#8E24AA","#4A148C","#AA00FF","#673AB7","#311B92","#6200EA","#651FFF","#3F51B5","#1A237E","#3D5AFE","#283593","#304FFE","#0097A7","#00838F","#006064","#00B8D4","#00897B","#00796B","#00695C","#004D40","#43A047","#388E3C","#1B5E20","#C0CA33","#AFB42B","#827717","#FDD835","#FBC02D","#F9A825","#F57F17","#FF6F00","#6D4C41","#5D4037","#3E2723"],i=k(""),n=k(null),c=k(e.value),v=F=>{n.value=null,ge().get(`/tags?filter[name][like]=${F}`).then(({data:C})=>{const w=c.value.map(D=>+D.id);n.value=(C==null?void 0:C.filter(D=>!w.includes(+D.id)))??[]})},h=G(()=>{var F,C,w,D,x,M;return((w=(C=(F=n.value)==null?void 0:F.filter)==null?void 0:C.call(F,z=>z.name.toLowerCase()===i.value.toLowerCase()))==null?void 0:w.length)===0&&((M=(x=(D=c.value)==null?void 0:D.filter)==null?void 0:x.call(D,z=>z.name.toLowerCase()===i.value.toLowerCase()))==null?void 0:M.length)===0}),u=G(()=>{var F,C,w;return((w=(C=(F=c.value)==null?void 0:F.filter)==null?void 0:C.call(F,D=>D.name.toLowerCase()===i.value.toLowerCase()))==null?void 0:w.length)>0}),r=()=>{ge().post("/tags",{name:i.value,color:o[mt(0,o.length-1)]}).then(({data:F})=>{F.name=F.name.toLowerCase(),f(F)})},f=F=>{c.value.push(F),i.value="",n.value=null,e.update(c.value)},_=async F=>{if(await Me(`Remove "${F.name}" Tag`,"Are you Sure?")){const w=c.value.findIndex(D=>+D.id==+F.id);w>=0&&(c.value.splice(w,1),e.update(c.value))}};return(F,C)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:w})=>[d("div",Dl,[c.value.length>0?(p(!0),b(R,{key:0},I(c.value,D=>ve((p(),b("div",{key:D.id,class:"tag"},[d("span",kl,V(D.name),1),d("a",{href:"#",onClick:Z(x=>_(D),["prevent"]),class:"close"},[A(O,{path:s(Fe)},null,8,["path"])],8,Bl)])),[[s(Ue),{"--color":D.color}]])),128)):U("",!0),d("div",Al,[ve(d("input",{type:"text","onUpdate:modelValue":C[0]||(C[0]=D=>i.value=D),placeholder:"Search Tags..."},null,512),[[at,i.value],[s(El),v,"300ms"]]),i.value?(p(),b("div",Il,[n.value?(p(),b(R,{key:0},[(p(!0),b(R,null,I(n.value,D=>ve((p(),b("a",{key:D.id,href:"#",onClick:Z(x=>f(D),["prevent"]),class:"item"},[le(V(D.name),1)],8,Ll)),[[s(Ue),{"--color":D.color}]])),128)),h.value?(p(),b("a",{key:0,href:"#",class:"item new",onClick:Z(r,["prevent"])},[le("Add "),d("strong",null,V(i.value),1)],8,Sl)):U("",!0)],64)):U("",!0),u.value?(p(),b("div",xl,"Already Selected")):i.value&&!n.value?(p(),b("div",Tl,"Loading...")):U("",!0)])):U("",!0)])])]),_:2},[I(F.$slots,(w,D)=>({name:D,fn:E(x=>[P(F.$slots,D,J(K({...x})),void 0,!0)])}))]),1032,["field","no-label"]))}});const Ml=se(Rl,[["__scopeId","data-v-991e4c57"]]);class Vl extends Qe{get name(){var l;return this.field("name","Name",((l=this.initData)==null?void 0:l.name)??"","The complete name of author")}get bio(){var l;return this.field("bio","Bio",((l=this.initData)==null?void 0:l.bio)??"")}get image(){var l;return this.field("image","Image",((l=this.initData)==null?void 0:l.image)??null)}get rules(){return[[[this.name],ft]]}}const Pl=["id","innerHTML"],Nl=N({inheritAttrs:!1,__name:"EditableInput",props:{field:{},noLabel:{type:Boolean}},setup(t){const l=t,{field:e,noLabel:a=!1}=l,o=e.value,i=k(null),n=r=>{const f=/<div>(.*?)<\/div>/gm;r=r.replace(f,function(_,F){return`
${F}`}),e.update(r)},c=r=>{n(r.target.innerHTML)},v=r=>{e.touch(r)},h=r=>{e.blur(r)};let u=null;return ue(()=>{u=new MutationObserver((r,f)=>{n(i.value.innerHTML)}),u.observe(i.value,{subtree:!0,childList:!0})}),ye(()=>u&&u.disconnect()),(r,f)=>(p(),T(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:_})=>[d("div",ne({id:_,contenteditable:"true",class:["form-control",{"is-invalid":s(e).hasErrors}]},r.$attrs,{onInput:c,onFocus:v,onBlur:h,autocomplete:"off",spellcheck:"false",innerHTML:s(o),ref_key:"input",ref:i}),null,16,Pl)]),_:2},[I(r.$slots,(_,F)=>({name:F,fn:E(C=>[P(r.$slots,F,J(K({...C})),void 0,!0)])}))]),1032,["field","no-label"]))}});const Oe=se(Nl,[["__scopeId","data-v-421ca236"]]),Hl={key:0,class:"row py-4 m-3 border"},zl={class:"col-md-6"},jl={class:"col-md-6"},Ul=N({__name:"Author",props:{data:{default:()=>({})}},setup(t,{expose:l}){const[e,a,o]=ht(Vl);return a(t.data),l({validate:()=>{var i;return(i=e.value)==null?void 0:i.validate()},form:()=>{var i;return(i=e.value)==null?void 0:i.data},messages:()=>{var i;return(i=e.value)==null?void 0:i.errors}}),ye(()=>{o()}),(i,n)=>s(e)?(p(),b("div",Hl,[d("div",zl,[d("div",null,[A(Oe,{field:s(e).name,onKeydown:n[0]||(n[0]=Pe(Z(()=>{},["stop"]),["enter"]))},null,8,["field"]),A(Oe,{field:s(e).bio,onKeydown:n[1]||(n[1]=Pe(Z(()=>{},["stop"]),["enter"]))},null,8,["field"])])]),d("div",jl,[A(ot,{field:s(e).image},null,8,["field"])])])):U("",!0)}}),Ol='<svg width="17" height="15" viewBox="0 0 336 276" xmlns="http://www.w3.org/2000/svg"><path d="M291 150V79c0-19-15-34-34-34H79c-19 0-34 15-34 34v42l67-44 81 72 56-29 42 30zm0 52l-43-30-56 30-81-67-66 39v23c0 19 15 34 34 34h178c17 0 31-13 34-29zM79 0h178c44 0 79 35 79 79v118c0 44-35 79-79 79H79c-44 0-79-35-79-79V79C0 35 35 0 79 0z"/></svg>';class Yl{constructor({api:l,config:e,data:a,block:o}){pe(this,"appInstance");pe(this,"data");this.data=a}static get toolbox(){return{title:"Author",icon:Ol}}render(){const l=document.createElement("div"),e=Et(Ul,{data:this.data});return this.appInstance=e.mount(l),l}async save(l){var a,o;return await((a=this.appInstance)==null?void 0:a.validate())?{...(o=this.appInstance)==null?void 0:o.form()}:{}}}const ql=["#F44336","#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#E53935","#D32F2F","#C62828","#B71C1C","#FF8A80","#FF5252","#FF1744","#D50000","#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F","#FF80AB","#FF4081","#F50057","#C51162","#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C","#EA80FC","#E040FB","#D500F9","#AA00FF","#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0","#311B92","#B388FF","#7C4DFF","#651FFF","#6200EA","#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E","#8C9EFF","#536DFE","#3D5AFE","#304FFE","#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1","#82B1FF","#448AFF","#2979FF","#2962FF","#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B","#80D8FF","#40C4FF","#00B0FF","#0091EA","#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F","#006064","#84FFFF","#18FFFF","#00E5FF","#00B8D4","#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40","#A7FFEB","#64FFDA","#1DE9B6","#00BFA5","#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32","#1B5E20","#B9F6CA","#69F0AE","#00E676","#00C853","#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E","#CCFF90","#B2FF59","#76FF03","#64DD17","#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24","#827717","#F4FF81","#EEFF41","#C6FF00","#AEEA00","#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17","#FFFF8D","#FFFF00","#FFEA00","#FFD600","#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00","#FF6F00","#FFE57F","#FFD740","#FFC400","#FFAB00","#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100","#FFD180","#FFAB40","#FF9100","#FF6D00","#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315","#BF360C","#FF9E80","#FF6E40","#FF3D00","#DD2C00","#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E","#3E2723","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#212121","#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F","#263238","#000000"];var qe,We,Ge,Ke,Je,Xe;const Wl={textVariant:Yt,delimiter:qt,header:{class:Rt,shortcut:"CMD+SHIFT+H",inlineToolbar:!0},paragraph:{class:jt,shortcut:"CMD+SHIFT+P",inlineToolbar:!0},list:{class:Ut,shortcut:"CMD+SHIFT+L",inlineToolbar:!0,config:{defaultStyle:"unordered"}},checklist:{class:Nt,inlineToolbar:!0},table:{class:zt,shortcut:"CMD+SHIFT+T",inlineToolbar:!0},embed:{class:Pt,inlineToolbar:!0,config:{services:{youtube:!0,facebook:!0,twitter:!0,instagram:!0,pinterest:!0,codepen:!0,miro:!0,vimeo:!0,gfycat:!0,imgur:!0,vine:!0,aparat:!0,coub:!0,"yandex-music-track":!0,"twitch-video":!0}}},image:{class:Ht,config:{endpoints:{byFile:`${(We=(qe=fe())==null?void 0:qe.url)==null?void 0:We.api}/uploadImage`,byUrl:`${(Ke=(Ge=fe())==null?void 0:Ge.url)==null?void 0:Ke.api}/uploadImage`}}},raw:Vt,warning:Wt,alert:Gt,linkTool:{class:Mt,config:{endpoint:`${(Xe=(Je=fe())==null?void 0:Je.url)==null?void 0:Xe.api}/fetchUrl`}},underline:Ot,Color:{class:Ne,config:{colorCollections:ql,defaultColor:"#FF1300",type:"text"}},Marker:{class:Ne,config:{defaultColor:"#FFBF00",type:"marker"}},Author:{class:Yl,inlineToolbar:!0}},Gl={class:"actions"},Kl=["onClick"],Jl=["onClick"],Xl=N({inheritAttrs:!1,__name:"EditorInput",props:{field:{},noLabel:{type:Boolean},rtl:{type:Boolean},altitude:{}},setup(t){const l=t;Te(w=>({"285e6594":f.value}));const{field:e,noLabel:a=!1,rtl:o=!1,altitude:i=400}=l,n=k(null),c=k(null),v=k(null),h=k(null),u=k(!1),r=k(null),f=G(()=>`${i}px`),_=()=>{r.value=e.value,xe(()=>{var w;(w=v.value)==null||w.open()})},F=()=>{r.value=null},C=()=>{u.value=!u.value};return ue(()=>{h.value=new xt({holder:c.value,tools:Wl,data:e.value,i18n:{direction:o?"rtl":"ltr"},tunes:["textVariant"],onChange:(w,D)=>{var x,M,z;(z=(M=(x=h.value)==null?void 0:x.save())==null?void 0:M.then(L=>{e.update(L)}))==null||z.catch(L=>{console.log("Saving failed: ",L)})}})}),ye(()=>{var w;(w=h.value)==null||w.destroy()}),(w,D)=>{var x;return p(),b(R,null,[A(ae,{field:s(e),"no-label":s(a)},W({default:E(({id:M})=>[d("div",ne({class:["editor-wrapper",{fullscreen:u.value}]},w.$attrs,{ref_key:"container",ref:n}),[d("div",{class:"editor-js",ref_key:"element",ref:c},null,512),d("div",Gl,[d("a",{href:"#",onClick:Z(_,["prevent"])},[A(O,{path:s(Ie)},null,8,["path"])],8,Kl),d("a",{href:"#",onClick:Z(C,["prevent"])},[A(O,{path:u.value?s(pt):s(vt)},null,8,["path"])],8,Jl)])],16)]),_:2},[I(w.$slots,(M,z)=>({name:z,fn:E(L=>[P(w.$slots,z,J(K({...L})))])}))]),1032,["field","no-label"]),r.value&&((x=r.value.blocks)==null?void 0:x.length)>0?(p(),T(be,{key:0,ref_key:"previewModal",ref:v,title:"Preview",onClose:F,size:"xl"},{default:E(()=>[A(Tt,{content:r.value,rtl:s(o)},null,8,["content","rtl"])]),_:1},512)):U("",!0)],64)}}});const Ql={},Zl={class:"dropdown-divider"};function en(t,l){return p(),b("hr",Zl)}const tn=se(Ql,[["render",en]]);class an extends Ze{get defaultMessage(){return"Invalid {attribute}"}validate(){return new Promise(l=>{l(Kt(this.field.value))})}}const ln={class:"d-flex gap-3"},nn={class:"country"},on={class:"calling-code"},sn=["id","value","placeholder"],rn=N({inheritAttrs:!1,__name:"PhoneInput",props:{field:{},noLabel:{type:Boolean},placeholder:{},allowedCountries:{},ignoredCountries:{},preferredCountries:{}},setup(t,{expose:l}){const e=t,{field:a,noLabel:o=!1,placeholder:i=e.field.label,allowedCountries:n=[],ignoredCountries:c=[],preferredCountries:v=[]}=e;a.parent.validationRules.push(an.assign(a));const h=k(He(a.value)),u=k(""),r=G(()=>{var g;return((g=h.value)==null?void 0:g.country)??"XX"}),f=G(()=>{var g;return((g=h.value)==null?void 0:g.countryCallingCode)??null}),_=G(()=>{var g;return((g=h.value)==null?void 0:g.nationalNumber)??null}),F=G(()=>{var g;return((g=h.value)==null?void 0:g.number)??null});a.events.afterUpdate.listen(()=>{h.value=He(a.value)});const C=()=>h.value.formatNational(),w=()=>h.value.formatInternational(),D=G(()=>{const g=new Intl.DisplayNames([kt()],{type:"region"}),y=Jt().filter(m=>{var $,B,S,q;return!["IL"].includes(m)&&(!n.length||n.includes(m))&&(!c.length||!c.includes(m))&&(!u.value||((q=(S=(B=($=g.of(m))==null?void 0:$.toLowerCase)==null?void 0:B.call($))==null?void 0:S.includes)==null?void 0:q.call(S,u.value)))}).map(m=>({code:m,name:g.of(m),callingCode:Xt(m)}));if(v.length>0){const m=[];return y.forEach(($,B)=>{if(v.includes($.code)){const S=v.findIndex(q=>q===$.code);S>=0&&(m[S]={...$},y.splice(B,1))}}),[...m,...y.length>0&&m.length>0?["--"]:[],...y].filter($=>$)}return y}),x=g=>{a.touch(),a.update(`+${g.callingCode}${a.value.replace(`+${f.value}`,"")}`)},M=g=>{var m;const y=g.target.parentElement.querySelector(".search-input");(m=y==null?void 0:y.focus)==null||m.call(y)},z=g=>{var m;const y=g.target.parentElement.querySelector(".search-input");(m=y==null?void 0:y.blur)==null||m.call(y),u.value=""},L=g=>{g.target.value.startsWith("+")?a.update(g.target.value):a.update(`+${f.value}${g.target.value}`)},j=g=>{a.touch(g)},Y=g=>{a.blur(g)};return l({code:()=>r.value,countryCallingCode:()=>f.value,nationalNumber:()=>_.value,number:()=>F.value,formatNational:C,formatInternational:w}),(g,y)=>(p(),T(ae,{field:s(a),"no-label":s(o)},W({buttonBefore:E(()=>[A($t,{div:"",onOpened:M,onClosed:z},{button:E(()=>{var m,$;return[d("span",{class:H({fi:!0,[`fi-${($=(m=r.value)==null?void 0:m.toLowerCase)==null?void 0:$.call(m)}`]:!0})},null,2),le(" "+V(f.value?`+${f.value}`:"--"),1)]}),default:E(()=>[ve(d("input",{type:"search","onUpdate:modelValue":y[0]||(y[0]=m=>u.value=m),class:"form-control border-0 rounded-0 search-input mb-2",placeholder:"Search..."},null,512),[[at,u.value]]),(p(!0),b(R,null,I(D.value,(m,$)=>{var B,S,q,ee;return p(),b(R,{key:(m==null?void 0:m.code)??$},[m==="--"?(p(),T(tn,{key:0})):(p(),T(wt,{key:1,onClick:Q=>x(m),class:H({"country-item":!0,active:((S=(B=m.code)==null?void 0:B.toLowerCase)==null?void 0:S.call(B))===((ee=(q=r.value)==null?void 0:q.toLowerCase)==null?void 0:ee.call(q))})},{default:E(()=>{var Q,X;return[d("div",ln,[d("span",{class:H({fi:!0,[`fi-${(X=(Q=m.code)==null?void 0:Q.toLowerCase)==null?void 0:X.call(Q)}`]:!0})},null,2),d("span",nn,V(m.name),1),d("span",on,V(`(+${m.callingCode})`.padStart(6," ")),1)])]}),_:2},1032,["onClick","class"]))],64)}),128))]),_:1})]),default:E(({id:m})=>[d("input",ne({id:m,class:["form-control",{"is-invalid":s(a).hasErrors}],value:s(a).value.replace(`+${f.value}`,"")},g.$attrs,{onInput:L,onFocus:j,onBlur:Y,autocomplete:"off",spellcheck:"false",placeholder:s(i)}),null,16,sn)]),_:2},[I(g.$slots,(m,$)=>({name:$,fn:E(B=>[P(g.$slots,$,J(K({...B})),void 0,!0)])}))]),1032,["field","no-label"]))}});const un=se(rn,[["__scopeId","data-v-21b74a7c"]]);class cn extends Ze{constructor(){super(...arguments);pe(this,"widget",null)}get defaultMessage(){return"{attribute} not verified"}validate(){return new Promise(e=>{const a=window.grecaptcha.getResponse(this.widget);e(a)})}}const dn=["id"],pn=()=>{const t="https://www.google.com/recaptcha/api.js";let l=document.querySelector(`script[src="${t}"]`);l||(l=document.createElement("script"),l.async=!0,l.src=t,document.head.appendChild(l)),typeof window.grecaptcha>"u"&&(window.grecaptcha={}),window.grecaptcha.ready=e=>{if(typeof window.grecaptcha>"u"){const a="___grecaptcha_cfg";window[a]=window[a]||{},(window[a].fns=window[a].fns||[]).push(e)}else e()}};pn();const vn=N({inheritAttrs:!1,__name:"RecaptchaInput",props:{field:{}},setup(t){const l=t,{field:e}=l,a=k(null),o=k(null);return ue(()=>{var i,n;(n=(i=window.grecaptcha)==null?void 0:i.ready)==null||n.call(i,()=>{var v,h,u;o.value=(u=(v=window.grecaptcha)==null?void 0:v.render)==null?void 0:u.call(v,a.value,{sitekey:(h=fe())==null?void 0:h.recaptchaSiteKey,theme:te()?"dark":"light"});const c=cn.assign(e);e.parent.validationRules.push(c),c.widget=o.value})}),(i,n)=>(p(),T(ae,{field:s(e),"no-label":""},W({default:E(({id:c})=>[d("div",{id:c,ref_key:"container",ref:a},null,8,dn)]),_:2},[I(i.$slots,(c,v)=>({name:v,fn:E(h=>[P(i.$slots,v,J(K({...h})))])}))]),1032,["field"]))}});const Ye={string:Le,text:bt,radio:Ct,checkbox:ia,date:Ra,image:ot,file:cl,range:fl,select:gl,toggle:bl,gallery:$l,tags:Ml,editor:Xl,repeater:aa,phone:un,recaptcha:vn},fn=N({__name:"AttrsInput",props:{type:{},field:{},attributes:{default:()=>({})},props:{default:()=>({})},icon:{type:[Boolean,String],default:!1}},setup(t){const l=G(()=>({...t.attributes??{},...t.props??{}}));return(e,a)=>s(Ye)[e.type]?(p(),T(_t(s(Ye)[e.type]),ne({key:0,field:e.field},l.value),W({_:2},[I(e.$slots,(o,i)=>({name:i,fn:E(n=>[P(e.$slots,i,J(K({...n})))])})),e.icon&&Object.hasOwn(Ve,e.icon)?{name:"before",fn:E(()=>[A(O,{path:Ve[e.icon]},null,8,["path"])]),key:"0"}:void 0]),1040,["field"])):U("",!0)}}),hn=d("div",{class:"spinner-border text-secondary",role:"status"},[d("span",{class:"visually-hidden"},"Loading...")],-1),mn={class:"text-muted"},ao=N({inheritAttrs:!1,__name:"ContentLoader",props:{title:{default:"Content"}},setup(t,{expose:l}){const e=k(!1);return l({start:()=>{e.value=!0},stop:()=>{e.value=!1}}),(i,n)=>e.value?(p(),b("div",ne({key:0,class:"d-flex flex-row gap-4 align-items-center"},i.$attrs),[hn,d("div",mn,V(i.title)+" Loading...",1)],16)):P(i.$slots,"default",{key:1})}});export{ia as C,fn as _,ao as a,Xl as b,Me as c,ua as d};
