var D=(a,t,o)=>{if(!t.has(a))throw TypeError("Cannot "+o)};var u=(a,t,o)=>(D(a,t,"read from private field"),o?o.call(a):t.get(a)),T=(a,t,o)=>{if(t.has(a))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(a):t.set(a,o)},C=(a,t,o,i)=>(D(a,t,"write to private field"),i?i.call(a,o):t.set(a,o),o);import{a as H}from"./m3fc8d974e5d8216d.js";import{_ as X}from"./CloseButton.vue_vue_type_script_setup_true_lang.js";import{d as F,w as K,c as G,a as A,f as P,v as I,r as E,x as _,p as ee,o as te,b as M,k as se,y as J,z as ae,T as oe,q as re,H as Q,n as ne}from"./mc55b2a42316522d6.js";import{r as N}from"./m6bdda40d8bd2cf5a.js";import{n as ie,y as x,K as le}from"./ma6cfd38af5d4c661.js";import{c as ue}from"./m78c574d5c3843a3d.js";import{$ as de}from"./ma0e3fbddd3785020.js";import{m as B}from"./index.js";const ce=["aria-valuenow","aria-valuemin","aria-valuemax"],pe=F({__name:"Progress",props:{value:{},min:{default:0},max:{default:100},height:{default:"1rem"},color:{default:"primary"},striped:{type:Boolean,default:!1},animated:{type:Boolean,default:!1},stacked:{type:Boolean,default:!1}},emits:["done"],setup(a,{emit:t}){const o=N(a.value);K(()=>a.value,s=>{o.value=s});const i=G(()=>o.value*100/a.max);return K(()=>i.value,()=>{i.value>=100&&setTimeout(()=>{t("done")},500)}),(s,p)=>(A(),P("div",{class:"progress",role:"progressbar","aria-label":"Basic example","aria-valuenow":i.value,"aria-valuemin":s.min,"aria-valuemax":s.max,style:x({height:s.height,width:s.stacked?`${i.value}%`:"100%"})},[I("div",{class:ie(["progress-bar overflow-visible",{"progress-bar-striped":s.striped,"progress-bar-animated":s.animated,[`bg-${s.color}`]:!0}]),style:x({width:s.stacked?"100%":`${i.value}%`})},[E(s.$slots,"default",{percentage:i.value,progress:o.value,min:s.min,max:s.max})],6)],12,ce))}}),fe={key:0,class:"toast-header"},me={class:"me-auto"},he={key:1,class:"toast-body"},ve=F({inheritAttrs:!1,__name:"Toast",props:{title:{type:[Boolean,String],default:!1},position:{default:"bottom-end"},color:{default:null},animated:{type:Boolean,default:!1},autohide:{type:Boolean,default:!1},delay:{default:5e3},controller:{default:null}},emits:["init","create","close","closed","open","opened"],setup(a,{expose:t,emit:o}){const i=re();_();const s=N(null),p=N(null),r=N(0),n=G(()=>`container-${a.position}`);o("init",i);const f=e=>{o("close",e)},v=e=>{o("closed",e),a.controller&&a.controller.removeController()},d=e=>{o("open",e)},y=e=>{R(),o("opened",e)},z=()=>{let e=document.querySelector("#aria-polite");return e||(e=document.createElement("div"),e.setAttribute("id","aria-polite"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.classList.add("position-relative"),document.body.appendChild(e)),e},Y=()=>{if(!document.querySelector(`#${n.value}`)){const e=z(),l=a.position.split("-"),m=a.position==="center"?"translate-middle":l[0]==="center"?"translate-middle-y":l[1]==="center"?"translate-middle-x":null;let h=l[0];h==="center"?h="top-50":h=`${h}-0`;let c=l[1];!c||c==="center"?c="start-50":c=`${c}-0`;const g=document.createElement("div");g.setAttribute("id",n.value),g.classList.add("toast-container","position-fixed",c,h,m,"p-3"),e.appendChild(g)}},Z=()=>{var e,l,m,h,c,g,b,L;p.value=new H(s.value,{animation:a.animated,autohide:!1,delay:0}),(l=(e=s.value)==null?void 0:e.addEventListener)==null||l.call(e,"hide.bs.toast",f),(h=(m=s.value)==null?void 0:m.addEventListener)==null||h.call(m,"hidden.bs.toast",v),(g=(c=s.value)==null?void 0:c.addEventListener)==null||g.call(c,"show.bs.toast",d),(L=(b=s.value)==null?void 0:b.addEventListener)==null||L.call(b,"shown.bs.toast",y),o("create",p.value,s.value,i)},q=()=>{var e,l;(l=(e=p.value)==null?void 0:e.show)==null||l.call(e)},U=()=>{var e,l;(l=(e=p.value)==null?void 0:e.hide)==null||l.call(e)},j=()=>{var e,l;(l=(e=p.value)==null?void 0:e.isShown)==null||l.call(e)},V=()=>{var e,l,m,h,c,g,b,L;(l=(e=s.value)==null?void 0:e.removeEventListener)==null||l.call(e,"hide.bs.toast",f),(h=(m=s.value)==null?void 0:m.removeEventListener)==null||h.call(m,"hidden.bs.toast",v),(g=(c=s.value)==null?void 0:c.removeEventListener)==null||g.call(c,"show.bs.toast",d),(L=(b=s.value)==null?void 0:b.removeEventListener)==null||L.call(b,"shown.bs.toast",y)},R=()=>{if(a.autohide&&a.color&&a.delay>0){const e=setInterval(()=>{r.value>=a.delay?clearInterval(e):r.value+=50},50)}};return Y(),t({open:q,close:U,isShown:j,dispose:V}),ee(()=>{Z()}),te(()=>{V()}),(e,l)=>(A(),M(oe,{to:`#${n.value}`},[I("div",ae({ref_key:"toastRef",ref:s,class:["toast overlow-hidden",{[`text-bg-${e.color}`]:e.color!==null,"border-0":e.color!==null}],role:"alert","aria-live":"assertive","aria-atomic":"true"},e.$attrs),[e.title||e.$slots.title?(A(),P("div",fe,[E(e.$slots,"titleStart"),E(e.$slots,"title",{},()=>[I("strong",me,le(e.title),1)]),E(e.$slots,"titleEnd"),se(X,{"data-bs-dismiss":"toast"})])):J("",!0),e.$slots.default?(A(),P("div",he,[E(e.$slots,"default")])):J("",!0),e.autohide&&e.color&&e.delay>0?(A(),M(pe,{key:2,value:r.value,height:"3px",min:0,max:e.delay,color:e.color,striped:"",animated:"",class:"rounded-0 border-top",onDone:U},null,8,["value","max","color"])):J("",!0)],16)],8,["to"]))}}),ye=a=>(t={},o={})=>new Promise(i=>{const s=document.createElement("div");document.body.appendChild(s);const p=ue({components:{component:a},data(){return{active:{type:Boolean,default:()=>!0}}},mounted(){Object.keys(this.$refs.wrapper).forEach(n=>{this[n]=this.$refs.wrapper[n]})},render(){if(this.active)return Q(a,{...t,controller:this,ref:"wrapper"},o)},methods:{removeController(){this.active=!1,this.$nextTick(()=>{var n,f;p.unmount(),(f=(n=s==null?void 0:s.parentElement)==null?void 0:n.removeChild)==null||f.call(n,s)})}}},{}),r=p.mount(s);ne(()=>{i(r)})}),ge=ye(ve),W=async(a,t,o=null)=>{(await ge({position:"bottom-end",color:o,title:a,autohide:!0,delay:5e3},{...t?{default:()=>Q("p",{innerHTML:t,class:"m-0"},[])}:{}})).open()},Je=async(a,t)=>await W(a,t,"success"),be=async(a,t)=>await W(a,t,"danger"),ke=de.ajax;function we(a){var o,i;return`${(i=(o=B())==null?void 0:o.url)==null?void 0:i.api}${a}`}function O(a,t){return new Promise((o,i)=>{const s={};s.type=t.type,s.cache=!1,["get","delete"].includes(t.type)?s.data=t.params??{}:["post","put"].includes(t.type)&&(s.data=t.data??{}),s.dataType=t.dataType??"json",s.headers={accept:t.contentType??"application/json"},t.skipAuthorization&&(s.headers["skip-authorization"]="on"),t.track&&(s.headers.track="on"),s.url=we(a),s.beforeSend=r=>{var f;const n=(f=B())==null?void 0:f.token;n&&r.setRequestHeader("Authorization",`Bearer ${n}`),window.sessionId&&r.setRequestHeader("session-id",window.sessionId)},s.complete=(r,n)=>{["success","nocontent"].includes(n.toLowerCase())&&o({data:r.responseJSON,header:r.getResponseHeader})},s.error=(r,n)=>{var f,v;if([401].includes(r.status))t.noLogout||(document.location.href=`${(v=(f=B())==null?void 0:f.url)==null?void 0:v.self}/Logout`);else if([200,204].includes(r.status))o({data:r.responseText,header:r.getResponseHeader});else{let d="";if(r.responseJSON&&r.responseJSON.title)d=r.responseJSON.title;else if(r.status===0)d="Not connect, Verify Network.";else if(r.status==404)d="Requested page not found. [404]";else if(r.status==500){d="Internal Server Error [500].";try{const y=JSON.parse(r.statusText);y.hasOwnProperty("title")&&(n=y.title,y.hasOwnProperty("details")&&(d=Object.keys(y.details).map(z=>`${y.details[z].join(", ")}`).join(", ")))}catch{}}else n==="parsererror"?d="Requested JSON parse failed.":n==="timeout"?d="Time out error.":n==="abort"?d="Ajax request aborted.":d="Uncaught Error : "+r.responseText;t.silent||Se({msg:d,xhr:r,exception:n}),i({msg:d,xhr:r,exception:n})}};const p=ke(s);t.request&&typeof t.request=="function"&&t.request(p)})}var k,w,$,S;class $e{constructor(){T(this,k,!1);T(this,w,!1);T(this,$,!1);T(this,S,!1)}silent(){return C(this,k,!0),this}skipAuthorization(){return C(this,w,!0),this}track(){return C(this,$,!0),this}noLogout(){return C(this,S,!0),this}get(t,o={}){return O(t,{...o,type:"get",silent:u(this,k),skipAuthorization:u(this,w),track:u(this,$),noLogout:u(this,S)})}post(t,o){return O(t,{type:"post",data:o,silent:u(this,k),skipAuthorization:u(this,w),track:u(this,$),noLogout:u(this,S)})}put(t,o){return O(t,{type:"put",data:o,silent:u(this,k),skipAuthorization:u(this,w),track:u(this,$),noLogout:u(this,S)})}delete(t){return O(t,{type:"delete",silent:u(this,k),skipAuthorization:u(this,w),track:u(this,$),noLogout:u(this,S)})}}k=new WeakMap,w=new WeakMap,$=new WeakMap,S=new WeakMap;function Pe(){return new $e}function Se(a){var p,r,n,f;const{msg:t,xhr:o,exception:i}=a;let s=`<p>${t}</p>`;if(((p=B())==null?void 0:p.env)==="dev"){(r=o.responseJSON)!=null&&r.message&&(s+=`<p>${(n=o.responseJSON)==null?void 0:n.message}</p>`);let v=[];if((f=o.responseJSON)!=null&&f.details)for(const d in o.responseJSON.details)v=[...v,...o.responseJSON.details[d]];v.length>0&&(s+=`<ul><li>${v.join("</li><li>")}</li></ul>`)}be(i.toUpperCase(),s)}export{Pe as a,ye as c,be as d,Je as s};
