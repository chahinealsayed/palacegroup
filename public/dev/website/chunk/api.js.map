{"version":3,"file":"api.js","sources":["../../../../resources/js/lib/metadata.ts","../../../../resources/js/modules/bootstrap/components/Progress.vue","../../../../resources/js/modules/bootstrap/components/Toast.vue","../../../../resources/js/lib/create-component.ts","../../../../resources/js/modules/bootstrap/controllers/toast-controller.ts","../../../../resources/js/modules/bootstrap/lib/toast.ts","../../../../resources/js/lib/api.ts"],"sourcesContent":["let _initData: any = null;\n\nexport type Url = {\n  api: string;\n  self: string;\n  base: {\n    absolute: string;\n    relative: string;\n  };\n};\n\nexport type Cms = {\n  type: { name: string; label: string }[];\n  category: any;\n  content: any;\n};\n\nexport type SettingsItem = {\n  type: string;\n  key?: string;\n  name: string;\n  label: string;\n  icon?: string;\n  defaultValue?: any;\n  attributes?: { [name: string]: any };\n  props?: { [name: string]: any };\n};\n\nexport type SettingsCategory = {\n  name: string;\n  label: string;\n  items: Array<SettingsItem>;\n};\n\nexport type Settings = Array<SettingsCategory>;\n\nexport type Language = {\n  value: string;\n  label: string;\n};\n\nexport type Metadata = {\n  env?: string;\n  id?: string;\n  name?: string;\n  language?: string;\n  languages?: Language[];\n  tier?: string;\n  token?: null | string;\n  user?: null | any;\n  isAuth?: boolean;\n  isGuest?: boolean;\n  route?: string;\n  translations?: { [msg: string]: string };\n  permissions?: any;\n  url?: Url;\n  isMobile?: boolean;\n  isTablet?: boolean;\n  isDesktop?: boolean;\n  cms?: Cms;\n  settings?: Settings;\n  balancesGroups?: string[][];\n  currenciesSort?: string[];\n  recaptchaSiteKey?: string;\n};\n\nfunction decodeData(): any {\n  if (!_initData) {\n    const z = Math.pow(2, 3) + 2;\n    const t = Math.pow(2, 1);\n    const m = z * t * 5 + Math.pow(10, 2);\n    const n = [78, 80, 101, 82, 102, 90, 91]\n      .map((x) => String.fromCharCode(m - x))\n      .join(\"\");\n    const d = window;\n    const q = d[n];\n    const res = JSON.parse(\n      window.atob(\n        q\n          .map((value: any, i: any) =>\n            i > 0 ? String.fromCharCode(q.slice(0, 1).shift() - value) : null\n          )\n          .filter((x: any) => x !== null)\n          .join(\"\")\n      )\n    );\n    _initData = res;\n  }\n  return _initData;\n}\n\nlet _meta: null | Metadata = null;\n\nexport function metadata(): null | Metadata {\n  if (!_meta) {\n    _meta = decodeData();\n  }\n  return _meta;\n}\n\nlet _translations: any = null;\n\nexport function translate(message: string, ...params: any): string {\n  if (!_translations) {\n    _translations = metadata()?.translations;\n  }\n  if (_translations) {\n    message = _translations?.[message] ?? message;\n\n    if (Array.isArray(params)) {\n      params.forEach((item) => {\n        message = message.replace(\":?\", item);\n      });\n    }\n  }\n  return message;\n}\n\nexport function user(): null | any {\n  return metadata()?.user ?? null;\n}\n\nexport function token(): null | string {\n  return metadata()?.token ?? null;\n}\n\nlet _permissions: any = null;\n\nexport function can(permission: any): boolean {\n  if ([\"developer\", \"master\"].includes(user()?.type)) {\n    return true;\n  }\n\n  if (!_permissions) {\n    _permissions = metadata()?.permissions;\n  }\n\n  let permitted = false;\n  if (_permissions) {\n    permission.split(\"|\").forEach((perm: string) => {\n      permitted = permitted || _permissions.hasOwnProperty(perm);\n    });\n  }\n  return permitted;\n}\n\nexport function language(): string {\n  return metadata()?.language ?? \"en\";\n}\n\nexport function languages(): Language[] {\n  return metadata()?.languages ?? [];\n}\n\nexport function cms(): Cms | null {\n  return metadata()?.cms ?? null;\n}\n\nexport function settings(): Settings | null {\n  return metadata()?.settings ?? null;\n}\n\nexport function route(): string {\n  return metadata()?.route ?? \"\";\n}\n","<script setup lang=\"ts\">\nimport { ref, watch, computed, nextTick } from \"vue\";\nimport { ProgressColor } from \"../types\";\n\ntype Props = {\n  value: number;\n  min?: number;\n  max?: number;\n  height?: string;\n  color?: ProgressColor;\n  striped?: boolean;\n  animated?: boolean;\n  stacked?: boolean;\n};\n\nconst {\n  value,\n  min = 0,\n  max = 100,\n  height = \"1rem\",\n  color = \"primary\",\n  striped = false,\n  animated = false,\n  stacked = false,\n} = defineProps<Props>();\n\nconst progress = ref<number>(value);\n\nwatch(\n  () => value,\n  (newValue: number) => {\n    progress.value = newValue;\n  }\n);\n\nconst percentage = computed(() => {\n  return (progress.value * 100) / max;\n});\n\nconst emit = defineEmits([\"done\"]);\n\nwatch(\n  () => percentage.value,\n  () => {\n    if (percentage.value >= 100) {\n      setTimeout(() => {\n        emit(\"done\");\n      }, 500);\n    }\n  }\n);\n</script>\n<template>\n  <div\n    class=\"progress\"\n    role=\"progressbar\"\n    aria-label=\"Basic example\"\n    :aria-valuenow=\"percentage\"\n    :aria-valuemin=\"min\"\n    :aria-valuemax=\"max\"\n    :style=\"{ height, width: stacked ? `${percentage}%` : '100%' }\"\n  >\n    <div\n      class=\"progress-bar overflow-visible\"\n      :class=\"{\n        'progress-bar-striped': striped,\n        'progress-bar-animated': animated,\n        [`bg-${color}`]: true,\n      }\"\n      :style=\"{ width: stacked ? '100%' : `${percentage}%` }\"\n    >\n      <slot\n        :percentage=\"percentage\"\n        :progress=\"progress\"\n        :min=\"min\"\n        :max=\"max\"\n      ></slot>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, ref, onMounted, onUnmounted, getCurrentInstance } from \"vue\";\nimport Toast from \"bootstrap/js/src/toast\";\nimport { ToastPosition, ToastColor } from \"../types\";\nimport CloseButton from \"./CloseButton.vue\";\nimport Progress from \"./Progress.vue\";\n\nconst instance = getCurrentInstance();\n\ndefineOptions({\n  inheritAttrs: false,\n});\n\nexport type Slots = {\n  default?: any;\n  title?: any;\n  titleStart?: any;\n  titleEnd?: any;\n};\nconst slots = defineSlots<Slots>();\n\nexport type Expose = {\n  open: () => void;\n  close: () => void;\n  isShown: () => boolean;\n  dispose: () => void;\n};\n\nexport type Props = {\n  title?: false | string;\n  position?: ToastPosition;\n  color?: null | ToastColor;\n  animated?: boolean;\n  autohide?: boolean;\n  delay?: number;\n  controller?: any;\n};\n\nconst {\n  title = false,\n  position = \"bottom-end\",\n  color = null,\n  animated = false,\n  autohide = false,\n  delay = 5000,\n  controller = null,\n} = defineProps<Props>();\n\nconst toastRef = ref<any>(null);\nconst toast = ref<any>(null);\nconst progress = ref<number>(0);\n\nconst containerId = computed(() => `container-${position}`);\n\ntype Emits = {\n  init: any;\n  create: any;\n  close: any;\n  closed: any;\n  open: any;\n  opened: any;\n};\nconst emit = defineEmits<Emits>();\n\nemit(\"init\", instance);\n\nconst onClose = (e) => {\n  emit(\"close\", e);\n};\n\nconst onClosed = (e) => {\n  emit(\"closed\", e);\n  if (controller) {\n    controller.removeController();\n  }\n};\n\nconst onOpen = (e) => {\n  emit(\"open\", e);\n};\n\nconst onOpened = (e) => {\n  playProgress();\n  emit(\"opened\", e);\n};\n\nconst createAriaPolite = () => {\n  let container = document.querySelector(`#aria-polite`);\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.setAttribute(\"id\", \"aria-polite\");\n    container.setAttribute(\"aria-live\", \"polite\");\n    container.setAttribute(\"aria-atomic\", \"true\");\n    container.classList.add(\"position-relative\");\n    document.body.appendChild(container);\n  }\n  return container;\n};\n\nconst createContainer = () => {\n  if (!document.querySelector(`#${containerId.value}`)) {\n    const politeContainer = createAriaPolite();\n    const parts = position.split(\"-\");\n    const middle: any =\n      position === \"center\"\n        ? \"translate-middle\"\n        : parts[0] === \"center\"\n          ? \"translate-middle-y\"\n          : parts[1] === \"center\"\n            ? \"translate-middle-x\"\n            : null;\n    let y = parts[0];\n    if (y === \"center\") {\n      y = \"top-50\";\n    } else {\n      y = `${y}-0`;\n    }\n\n    let x = parts[1];\n    if (!x || x === \"center\") {\n      x = \"start-50\";\n    } else {\n      x = `${x}-0`;\n    }\n\n    const container = document.createElement(\"div\");\n    container.setAttribute(\"id\", containerId.value);\n    container.classList.add(\n      \"toast-container\",\n      \"position-fixed\",\n      x,\n      y,\n      middle,\n      \"p-3\"\n    );\n    politeContainer.appendChild(container);\n  }\n};\n\nconst create = () => {\n  toast.value = new Toast(toastRef.value, {\n    animation: animated,\n    autohide: false,\n    delay: 0,\n  });\n  toastRef.value?.addEventListener?.(\"hide.bs.toast\", onClose);\n  toastRef.value?.addEventListener?.(\"hidden.bs.toast\", onClosed);\n  toastRef.value?.addEventListener?.(\"show.bs.toast\", onOpen);\n  toastRef.value?.addEventListener?.(\"shown.bs.toast\", onOpened);\n  emit(\"create\", toast.value, toastRef.value, instance);\n};\n\nconst open = () => {\n  toast.value?.show?.();\n};\n\nconst close = () => {\n  toast.value?.hide?.();\n};\n\nconst isShown = () => {\n  toast.value?.isShown?.();\n};\n\nconst dispose = () => {\n  toastRef.value?.removeEventListener?.(\"hide.bs.toast\", onClose);\n  toastRef.value?.removeEventListener?.(\"hidden.bs.toast\", onClosed);\n  toastRef.value?.removeEventListener?.(\"show.bs.toast\", onOpen);\n  toastRef.value?.removeEventListener?.(\"shown.bs.toast\", onOpened);\n};\n\nconst playProgress = () => {\n  if (autohide && color && delay > 0) {\n    const id = setInterval(() => {\n      if (progress.value >= delay) {\n        clearInterval(id);\n      } else {\n        progress.value += 50;\n      }\n    }, 50);\n  }\n};\n\ncreateContainer();\n\ndefineExpose({ open, close, isShown, dispose });\n\nonMounted(() => {\n  create();\n});\n\nonUnmounted(() => {\n  dispose();\n});\n</script>\n<template>\n  <Teleport :to=\"`#${containerId}`\">\n    <div ref=\"toastRef\" class=\"toast overlow-hidden\" :class=\"{\n      [`text-bg-${color}`]: color !== null,\n      'border-0': color !== null,\n    }\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" v-bind=\"$attrs\">\n      <div v-if=\"title || $slots.title\" class=\"toast-header\">\n        <slot name=\"titleStart\"></slot>\n        <slot name=\"title\">\n          <strong class=\"me-auto\">{{ title }}</strong>\n        </slot>\n        <slot name=\"titleEnd\"></slot>\n        <CloseButton data-bs-dismiss=\"toast\" />\n      </div>\n      <div v-if=\"$slots.default\" class=\"toast-body\">\n        <slot></slot>\n      </div>\n      <template v-if=\"autohide && color && delay > 0\">\n        <Progress :value=\"progress\" height=\"3px\" :min=\"0\" :max=\"delay\" :color=\"color\" striped animated\n          class=\"rounded-0 border-top\" @done=\"close\" />\n      </template>\n    </div>\n  </Teleport>\n</template>\n","import { App, createApp, h, nextTick } from \"vue\";\n\nexport const createComponent = <\n  Props extends Record<string, unknown>,\n  Expose extends Record<string, unknown>,\n  Slots extends Record<string, unknown>,\n>(\n  component: any\n) => {\n  return (props: {} | Props = {}, slots: {} | Slots = {}): Promise<Expose> => {\n    return new Promise<Expose>((resolve) => {\n      const mountElement = document.createElement(\"div\");\n      document.body.appendChild(mountElement);\n      const app: App<Element> = createApp(\n        {\n          components: { component },\n          data() {\n            return {\n              active: {\n                type: Boolean,\n                default: () => true,\n              },\n            };\n          },\n          mounted() {\n            Object.keys(this.$refs.wrapper).forEach((name: string) => {\n              this[name] = this.$refs.wrapper[name];\n            });\n          },\n          render() {\n            if (this.active) {\n              return h(\n                component,\n                { ...props, controller: this, ref: \"wrapper\" },\n                slots\n              );\n            }\n          },\n          methods: {\n            removeController() {\n              this.active = false;\n              this.$nextTick(() => {\n                app.unmount();\n                mountElement?.parentElement?.removeChild?.(mountElement);\n              });\n            },\n          },\n        },\n        {}\n      );\n      const instance = app.mount(mountElement);\n      nextTick(() => {\n        resolve(instance as any);\n      });\n    });\n  };\n};\n","import Toast from \"../components/Toast.vue\";\nimport type { Expose, Props, Slots } from \"../components/Toast.vue\";\nimport { createComponent } from \"@/lib/create-component\";\n\n\nexport const ToastController = createComponent<Props, Expose, Slots>(Toast)\n","import { ToastController } from \"@/modules/bootstrap/controllers/toast-controller\";\nimport { h } from \"vue\";\nimport { ToastColor } from \"../types\";\n\nconst createToast = async (\n  title: string,\n  message?: string,\n  color: null | ToastColor = null\n) => {\n  const toast = await ToastController(\n    {\n      position: \"bottom-end\",\n      color,\n      title,\n      autohide: true,\n      delay: 5000,\n    },\n    {\n      ...(message\n        ? {\n            default: () => h(\"p\", { innerHTML: message, class: \"m-0\" }, []),\n          }\n        : {}),\n    }\n  );\n  toast.open();\n};\n\nexport const toast = async (title: string, message?: string) => {\n  return await createToast(title, message);\n};\n\nexport const primaryToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"primary\");\n};\n\nexport const secondaryToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"secondary\");\n};\n\nexport const infoToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"info\");\n};\n\nexport const successToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"success\");\n};\n\nexport const warningToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"warning\");\n};\n\nexport const dangerToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"danger\");\n};\n\nexport const lightToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"light\");\n};\n\nexport const darkToast = async (title: string, message?: string) => {\n  return await createToast(title, message, \"dark\");\n};\n","import { dangerToast } from \"@/modules/bootstrap/lib/toast\";\nimport $ from \"jquery\";\nimport { metadata } from \"./metadata\";\n\nconst ajax = $.ajax;\n\ndeclare var window;\n\nexport enum RequestType {\n  GET = \"get\",\n  POST = \"post\",\n  PUT = \"put\",\n  DELETE = \"delete\",\n}\n\nexport enum RequestDataType {\n  XML = \"xml\",\n  JSON = \"json\",\n  JSONP = \"jsonp\",\n  SCRIPT = \"script\",\n  HTML = \"html\",\n  TEXT = \"text\",\n}\n\nexport enum RequestContentType {\n  XML = \"text/xml\",\n  JSON = \"application/json\",\n  JSONP = \"application/jsonp\",\n  HTML = \"text/html\",\n  TEXT = \"text/plain\",\n}\n\nexport interface RequestOptions {\n  params?: { [key: string]: any };\n  data?: { [key: string]: any };\n  type: RequestType;\n  dataType?: RequestDataType;\n  contentType?: RequestContentType;\n  silent?: boolean;\n  skipAuthorization?: boolean;\n  track?: boolean;\n  noLogout?: boolean;\n  request?: (xhr: any) => {};\n}\n\nexport function resolveUrl(path: string) {\n  const baseUrl = metadata()?.url?.api;\n  return `${baseUrl}${path}`;\n}\n\nfunction request(path: string, options: RequestOptions) {\n  return new Promise((resolve, reject) => {\n    const settings: any = {};\n    settings.type = options.type;\n    settings.cache = false;\n    if ([RequestType.GET, RequestType.DELETE].includes(options.type)) {\n      settings.data = options.params ?? {};\n    } else if ([RequestType.POST, RequestType.PUT].includes(options.type)) {\n      settings.data = options.data ?? {};\n    }\n    settings.dataType = options.dataType ?? RequestDataType.JSON;\n    settings.headers = {\n      accept: options.contentType ?? RequestContentType.JSON,\n    };\n    if (options.skipAuthorization) {\n      settings.headers[\"skip-authorization\"] = \"on\";\n    }\n    if (options.track) {\n      settings.headers[\"track\"] = \"on\";\n    }\n    settings.url = resolveUrl(path);\n\n    settings.beforeSend = (xhr) => {\n      const token = metadata()?.token;\n      if (token) {\n        xhr.setRequestHeader(\"Authorization\", `Bearer ${token}`);\n      }\n      if (window.sessionId) {\n        xhr.setRequestHeader(\"session-id\", window.sessionId);\n      }\n    };\n    settings.complete = (XMLHttpRequest, textStatus) => {\n      if ([\"success\", \"nocontent\"].includes(textStatus.toLowerCase())) {\n        resolve({\n          data: XMLHttpRequest.responseJSON,\n          header: XMLHttpRequest.getResponseHeader,\n        });\n      }\n    };\n    settings.error = (jqXHR: any, exception: any) => {\n      if ([401].includes(jqXHR.status)) {\n        if (!options.noLogout) {\n          document.location.href = `${metadata()?.url?.self}/Logout`;\n        }\n      } else if ([200, 204].includes(jqXHR.status)) {\n        resolve({\n          data: jqXHR.responseText,\n          header: jqXHR.getResponseHeader,\n        });\n      } else {\n        let msg = \"\";\n        if (jqXHR.responseJSON && jqXHR.responseJSON.title) {\n          msg = jqXHR.responseJSON.title;\n        } else if (jqXHR.status === 0) {\n          msg = \"Not connect, Verify Network.\";\n        } else if (jqXHR.status == 404) {\n          msg = \"Requested page not found. [404]\";\n        } else if (jqXHR.status == 500) {\n          msg = \"Internal Server Error [500].\";\n          try {\n            const data = JSON.parse(jqXHR.statusText);\n            if (data.hasOwnProperty(\"title\")) {\n              exception = data.title;\n              if (data.hasOwnProperty(\"details\")) {\n                msg = Object.keys(data.details)\n                  .map((name) => {\n                    return `${data.details[name].join(\", \")}`;\n                  })\n                  .join(\", \");\n              }\n            }\n          } catch (e) { }\n        } else if (exception === \"parsererror\") {\n          msg = \"Requested JSON parse failed.\";\n        } else if (exception === \"timeout\") {\n          msg = \"Time out error.\";\n        } else if (exception === \"abort\") {\n          msg = \"Ajax request aborted.\";\n        } else {\n          msg = \"Uncaught Error : \" + jqXHR.responseText;\n        }\n        if (!options.silent) {\n          apiError({ msg, xhr: jqXHR, exception });\n        }\n        reject({ msg, xhr: jqXHR, exception });\n      }\n    };\n    const xhr = ajax(settings);\n    if (options.request && typeof options.request === \"function\") {\n      options.request(xhr);\n    }\n  });\n}\n\nclass Api {\n  #silent = false;\n  #skipAuthorization = false;\n  #track = false;\n  #noLogout = false;\n\n  silent() {\n    this.#silent = true;\n    return this;\n  }\n\n  skipAuthorization() {\n    this.#skipAuthorization = true;\n    return this;\n  }\n\n  track() {\n    this.#track = true;\n    return this;\n  }\n\n  noLogout() {\n    this.#noLogout = true;\n    return this;\n  }\n\n  get(path: string, options: any = {}) {\n    return request(path, {\n      ...options,\n      ...{\n        type: RequestType.GET,\n        silent: this.#silent,\n        skipAuthorization: this.#skipAuthorization,\n        track: this.#track,\n        noLogout: this.#noLogout,\n      },\n    });\n  }\n\n  post(path: string, data: { [key: string]: any }) {\n    return request(path, {\n      type: RequestType.POST,\n      data,\n      silent: this.#silent,\n      skipAuthorization: this.#skipAuthorization,\n      track: this.#track,\n      noLogout: this.#noLogout,\n    });\n  }\n\n  put(path: string, data: { [key: string]: any }) {\n    return request(path, {\n      type: RequestType.PUT,\n      data,\n      silent: this.#silent,\n      skipAuthorization: this.#skipAuthorization,\n      track: this.#track,\n      noLogout: this.#noLogout,\n    });\n  }\n\n  delete(path: string) {\n    return request(path, {\n      type: RequestType.DELETE,\n      silent: this.#silent,\n      skipAuthorization: this.#skipAuthorization,\n      track: this.#track,\n      noLogout: this.#noLogout,\n    });\n  }\n}\n\nexport function api() {\n  return new Api();\n}\n\nexport function apiError(data: any) {\n  const { msg, xhr, exception } = data;\n\n  let message = `<p>${msg}</p>`;\n  if (metadata()?.env === \"dev\") {\n    if (xhr.responseJSON?.message) {\n      message += `<p>${xhr.responseJSON?.message}</p>`;\n    }\n    let text: any[] = [];\n    if (xhr.responseJSON?.details) {\n      for (const name in xhr.responseJSON.details) {\n        text = [...text, ...xhr.responseJSON.details[name]];\n      }\n    }\n    if (text.length > 0) {\n      message += `<ul><li>${text.join(`</li><li>`)}</li></ul>`;\n    }\n  }\n\n  dangerToast(exception.toUpperCase(), message);\n}\n"],"names":["_initData","decodeData","z","m","n","x","q","value","i","_meta","metadata","_translations","translate","message","params","_a","item","progress","ref","__props","watch","newValue","percentage","computed","emit","instance","getCurrentInstance","_useSlots","toastRef","toast","containerId","onClose","onClosed","onOpen","onOpened","playProgress","createAriaPolite","container","createContainer","politeContainer","parts","middle","y","create","Toast","_b","_d","_c","_f","_e","_h","_g","open","close","isShown","dispose","id","__expose","onMounted","onUnmounted","createComponent","component","props","slots","resolve","mountElement","app","createApp","name","h","nextTick","ToastController","createToast","title","color","successToast","dangerToast","ajax","$","resolveUrl","path","request","options","reject","settings","xhr","token","XMLHttpRequest","textStatus","jqXHR","exception","msg","data","apiError","Api","__privateAdd","_silent","_skipAuthorization","_track","_noLogout","__privateSet","__privateGet","api","text"],"mappings":"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"}