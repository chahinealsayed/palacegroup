{"version":3,"file":"string.js","sources":["../../../../resources/js/modules/form/rules/string.ts"],"sourcesContent":["import { createPrivateField } from \"@/lib/private\";\nimport { Rule } from \"../lib/rule\";\n\nconst [trim, setTrim] = createPrivateField<StringRule, true>();\nconst [min, setMin] = createPrivateField<StringRule, number>();\nconst [max, setMax] = createPrivateField<StringRule, number>();\nconst [length, setLength] = createPrivateField<StringRule, number>();\n\nexport class StringRule extends Rule {\n  #trim: boolean;\n  #min: number;\n  #max: number;\n  #length: number;\n\n  get isString(): boolean {\n    return typeof this.field.value === \"string\";\n  }\n\n  execute(): void {\n    if (this.isString && trim(this)) {\n      this.field.silentUpdate(this.field.value.trim());\n    }\n  }\n\n  trim() {\n    setTrim(this, true);\n    return this;\n  }\n\n  min(value: number) {\n    setMin(this, value);\n    return this;\n  }\n\n  max(value: number) {\n    setMax(this, value);\n    return this;\n  }\n\n  length(value: number) {\n    setLength(this, value);\n    return this;\n  }\n\n  get defaultMessage(): string {\n    if (!this.isString) {\n      return \"{attribute} should be a string\";\n    } else if (\n      typeof min(this) !== \"undefined\" &&\n      typeof max(this) !== \"undefined\" &&\n      (this.field.value.length < min(this) ||\n        this.field.value.length > max(this))\n    ) {\n      return `{attribute} should be between ${min(this)} and ${max(\n        this\n      )} characters.`;\n    } else if (\n      typeof min(this) !== \"undefined\" &&\n      this.field.value.length < min(this)\n    ) {\n      return `{attribute} should be bigger than or equal ${min(\n        this\n      )} characters.`;\n    } else if (\n      typeof max(this) !== \"undefined\" &&\n      this.field.value.length > max(this)\n    ) {\n      return `{attribute} should be less than or equal $max(this)} characters.`;\n    } else if (\n      typeof length(this) !== \"undefined\" &&\n      this.field.value.length !== length(this)\n    ) {\n      return `{attribute} should be equal ${length(this)} characters.`;\n    }\n    return \"\";\n  }\n  validate(): Promise<boolean> {\n    return new Promise((resolve) => {\n      resolve(\n        this.isString &&\n          ((!this.field.value && this.isSkipOnEmpty) ||\n            ((typeof min(this) === \"undefined\" ||\n              this.field.value.length >= min(this)) &&\n              (typeof max(this) === \"undefined\" ||\n                this.field.value.length <= max(this)) &&\n              (typeof length(this) === \"undefined\" ||\n                this.field.value.length === length(this))))\n      );\n    });\n  }\n}\n"],"names":["trim","setTrim","createPrivateField","min","setMin","max","setMax","length","setLength","StringRule","Rule","__privateAdd","_trim","_min","_max","_length","value","resolve"],"mappings":"6MAGA,KAAM,CAACA,EAAMC,CAAO,EAAIC,IAClB,CAACC,EAAKC,CAAM,EAAIF,IAChB,CAACG,EAAKC,CAAM,EAAIJ,IAChB,CAACK,EAAQC,CAAS,EAAIN,gBAErB,MAAMO,UAAmBC,CAAK,CAA9B,kCACLC,EAAA,KAAAC,EAAA,QACAD,EAAA,KAAAE,EAAA,QACAF,EAAA,KAAAG,EAAA,QACAH,EAAA,KAAAI,EAAA,QAEA,IAAI,UAAoB,CACf,OAAA,OAAO,KAAK,MAAM,OAAU,QACrC,CAEA,SAAgB,CACV,KAAK,UAAYf,EAAK,IAAI,GAC5B,KAAK,MAAM,aAAa,KAAK,MAAM,MAAM,MAAM,CAEnD,CAEA,MAAO,CACL,OAAAC,EAAQ,KAAM,EAAI,EACX,IACT,CAEA,IAAIe,EAAe,CACjB,OAAAZ,EAAO,KAAMY,CAAK,EACX,IACT,CAEA,IAAIA,EAAe,CACjB,OAAAV,EAAO,KAAMU,CAAK,EACX,IACT,CAEA,OAAOA,EAAe,CACpB,OAAAR,EAAU,KAAMQ,CAAK,EACd,IACT,CAEA,IAAI,gBAAyB,CACvB,GAAC,KAAK,SAEV,IACE,OAAOb,EAAI,IAAI,EAAM,KACrB,OAAOE,EAAI,IAAI,EAAM,MACpB,KAAK,MAAM,MAAM,OAASF,EAAI,IAAI,GACjC,KAAK,MAAM,MAAM,OAASE,EAAI,IAAI,GAEpC,MAAO,iCAAiCF,EAAI,IAAI,CAAC,QAAQE,EACvD,IACD,CAAA,eAED,GAAA,OAAOF,EAAI,IAAI,EAAM,KACrB,KAAK,MAAM,MAAM,OAASA,EAAI,IAAI,EAElC,MAAO,8CAA8CA,EACnD,IACD,CAAA,eAED,GAAA,OAAOE,EAAI,IAAI,EAAM,KACrB,KAAK,MAAM,MAAM,OAASA,EAAI,IAAI,EAE3B,MAAA,mEAEP,GAAA,OAAOE,EAAO,IAAI,EAAM,KACxB,KAAK,MAAM,MAAM,SAAWA,EAAO,IAAI,EAEhC,MAAA,+BAA+BA,EAAO,IAAI,CAAC,mBA1B3C,OAAA,iCA4BF,MAAA,EACT,CACA,UAA6B,CACpB,OAAA,IAAI,QAASU,GAAY,CAC9BA,EACE,KAAK,WACD,CAAC,KAAK,MAAM,OAAS,KAAK,gBACxB,OAAOd,EAAI,IAAI,EAAM,KACrB,KAAK,MAAM,MAAM,QAAUA,EAAI,IAAI,KAClC,OAAOE,EAAI,IAAI,EAAM,KACpB,KAAK,MAAM,MAAM,QAAUA,EAAI,IAAI,KACpC,OAAOE,EAAO,IAAI,EAAM,KACvB,KAAK,MAAM,MAAM,SAAWA,EAAO,IAAI,GAAA,CACjD,CACD,CACH,CACF,CAjFEK,EAAA,YACAC,EAAA,YACAC,EAAA,YACAC,EAAA"}