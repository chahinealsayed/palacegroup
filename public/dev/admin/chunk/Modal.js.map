{"version":3,"file":"Modal.js","sources":["../../../../resources/js/modules/bootstrap/components/Dropdown.vue","../../../../resources/js/modules/bootstrap/components/DropdownItem.vue","../../../../resources/js/modules/bootstrap/components/Modal.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport Button from \"@/modules/bootstrap/components/Button.vue\";\nimport { DropdownDirection, DropdownAlignment } from \"../types\";\nimport Dropdown from \"bootstrap/js/src/dropdown\";\nimport { ref, onMounted, onUnmounted, computed, watch } from \"vue\";\nimport Wrapper from \"@/components/Wrapper.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n});\n\ntype Slots = {\n  button: any;\n  default: any;\n};\ndefineSlots<Slots>();\n\ntype Props = {\n  title?: string;\n  split?: boolean;\n  center?: boolean;\n  direction?: DropdownDirection;\n  alignment?: DropdownAlignment;\n  smStart?: boolean;\n  mdStart?: boolean;\n  lgStart?: boolean;\n  xlStart?: boolean;\n  xxlStart?: boolean;\n  smEnd?: boolean;\n  mdEnd?: boolean;\n  lgEnd?: boolean;\n  xlEnd?: boolean;\n  xxlEnd?: boolean;\n  autoClose?: boolean | \"inside\" | \"outside\";\n  offset?: [number, number];\n  menuOptions?: { [name: string]: any };\n  div?: boolean;\n  flat?: boolean;\n  noArrow?: boolean;\n};\nconst {\n  title = \"\",\n  split = false,\n  center = false,\n  direction = \"down\",\n  alignment = \"start\",\n  smStart = false,\n  mdStart = false,\n  lgStart = false,\n  xlStart = false,\n  xxlStart = false,\n  smEnd = false,\n  mdEnd = false,\n  lgEnd = false,\n  xlEnd = false,\n  xxlEnd = false,\n  autoClose = false,\n  offset = [0, 2],\n  menuOptions = {},\n  div = false,\n  flat = false,\n  noArrow = false,\n} = defineProps<Props>();\n\nconst dropdownRef = ref<any>(null);\nconst dropdown = ref<any>(null);\n\nwatch(\n  () => dropdownRef,\n  (newRef) => {\n    if (newRef) {\n      create();\n    }\n  },\n  { deep: true }\n);\n\ntype Emits = {\n  close: any;\n  closed: any;\n  prevented: any;\n  open: any;\n  opened: any;\n};\nconst emit = defineEmits<Emits>();\n\nconst onClose = (e) => {\n  emit(\"close\", e);\n};\n\nconst onClosed = (e) => {\n  emit(\"closed\", e);\n};\n\nconst onOpen = (e) => {\n  emit(\"open\", e);\n};\n\nconst onOpened = (e) => {\n  emit(\"opened\", e);\n};\n\nconst create = () => {\n  dropdown.value = new Dropdown(dropdownRef.value, { autoClose, offset });\n  dropdownRef.value.addEventListener(\"hide.bs.dropdown\", onClose);\n  dropdownRef.value.addEventListener(\"hidden.bs.dropdown\", onClosed);\n  dropdownRef.value.addEventListener(\"show.bs.dropdown\", onOpen);\n  dropdownRef.value.addEventListener(\"shown.bs.dropdown\", onOpened);\n};\n\nconst open = () => {\n  dropdown.value?.show?.();\n};\n\nconst close = () => {\n  dropdown.value?.hide?.();\n};\n\nconst dispose = () => {\n  dropdownRef.value.removeEventListener(\"hide.bs.dropdown\", onClose);\n  dropdownRef.value.removeEventListener(\"hidden.bs.dropdown\", onClosed);\n  dropdownRef.value.removeEventListener(\"show.bs.dropdown\", onOpen);\n  dropdownRef.value.removeEventListener(\"shown.bs.dropdown\", onOpened);\n  dropdown.value?.dispose?.();\n};\n\nconst update = () => {\n  dropdown.value?.update?.();\n};\n\ndefineExpose({\n  open,\n  close,\n  dispose,\n  update,\n  tagName: () => (div ? \"div\" : \"ul\"),\n});\n\nconst menuClasses = computed(() => {\n  return {\n    \"dropdown-menu\": true,\n    [`dropdown-menu-${alignment}`]: true,\n    ...(smStart ? { \"dropdown-menu-sm-start\": true } : {}),\n    ...(mdStart ? { \"dropdown-menu-md-start\": true } : {}),\n    ...(lgStart ? { \"dropdown-menu-lg-start\": true } : {}),\n    ...(xlStart ? { \"dropdown-menu-xl-start\": true } : {}),\n    ...(xxlStart ? { \"dropdown-menu-xxl-start\": true } : {}),\n    ...(smEnd ? { \"dropdown-menu-sm-end\": true } : {}),\n    ...(mdEnd ? { \"dropdown-menu-md-end\": true } : {}),\n    ...(lgEnd ? { \"dropdown-menu-lg-end\": true } : {}),\n    ...(xlEnd ? { \"dropdown-menu-xl-end\": true } : {}),\n    ...(xxlEnd ? { \"dropdown-menu-xxl-end\": true } : {}),\n  };\n});\n\nonMounted(() => {\n  // create();\n});\n\nonUnmounted(() => {\n  dispose();\n});\n</script>\n<template>\n  <Wrapper\n    :tag=\"flat ? 'div' : false\"\n    :class=\"{\n      'btn-group': true,\n      [`drop${direction}${center ? '-center' : ''}`]: true,\n    }\"\n  >\n    <Button\n      :class=\"{ 'dropdown-toggle': !split, 'no-arrow': noArrow }\"\n      :data-bs-toggle=\"!split ? 'dropdown' : false\"\n      aria-expanded=\"false\"\n      @click=\"open\"\n      :ref=\"\n        (el: any) => {\n          if (!split && el) {\n            dropdownRef = el.element();\n          }\n        }\n      \"\n      v-binds=\"$attrs\"\n    >\n      <slot name=\"button\"> {{ title }} </slot>\n    </Button>\n    <template v-if=\"split\">\n      <Button\n        class=\"dropdown-toggle dropdown-toggle-split\"\n        :class=\"{ 'no-arrow': noArrow }\"\n        data-bs-toggle=\"dropdown\"\n        aria-expanded=\"false\"\n        @click=\"open\"\n        v-binds=\"$attrs\"\n        :ref=\"(el: any) => {\n          if (!split && el) {\n            dropdownRef = el.element();\n          }\n        }\"\n      >\n        <span class=\"visually-hidden\">Toggle Dropdown</span>\n      </Button>\n    </template>\n    <component\n      :is=\"div ? 'div' : 'ul'\"\n      :class=\"menuClasses\"\n      v-binds=\"menuOptions\"\n    >\n      <slot></slot>\n    </component>\n  </Wrapper>\n</template>\n<style scoped lang=\"scss\">\n.dropdown-toggle {\n  &.no-arrow {\n    &:after {\n      display: none;\n    }\n  }\n}\n\n.dropdown-menu {\n  max-height: 300px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  content-visibility: auto;\n  contain-intrinsic-size: 0 300px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { getCurrentInstance, computed } from \"vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n});\n\nconst instance = getCurrentInstance();\n\nconst type = computed(\n  () =>\n    instance?.parent?.subTree?.children?.[2]?.type\n      ?.toString?.()\n      ?.toLowerCase?.() ?? null\n);\n</script>\n<template>\n  <template v-if=\"type === 'ul'\">\n    <li>\n      <a class=\"dropdown-item\" href=\"#\" v-bind=\"$attrs\" @click.prevent>\n        <slot></slot>\n      </a>\n    </li>\n  </template>\n  <template v-if=\"type === 'div'\">\n    <a class=\"dropdown-item\" href=\"#\" v-bind=\"$attrs\" @click.prevent>\n      <slot></slot>\n    </a>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { ref, onMounted, onUnmounted } from \"vue\";\nimport { ModalSize, ModalFullscreen } from \"../types\";\nimport CloseButton from \"./CloseButton.vue\";\nimport Modal from \"bootstrap/js/src/modal\";\nimport Icon from \"@/components/Icon.vue\";\nimport { mdiClose } from \"@mdi/js\";\nimport Button from \"./Button.vue\";\n\ndefineOptions({\n  inheritAttrs: false,\n});\n\nexport type Slots = {\n  default?: any;\n  title?: any;\n  header?: any;\n  buttons?: any;\n};\ndefineSlots<Slots>();\n\nexport type Expose = {\n  open: () => void;\n  close: () => void;\n  dispose: () => void;\n  update: () => void;\n};\n\nexport type Props = {\n  title?: null | string;\n  center?: boolean;\n  scrollable?: boolean;\n  size?: null | ModalSize;\n  fullscreen?: boolean | ModalFullscreen;\n  backdrop?: boolean | \"static\";\n  focus?: boolean;\n  keyboard?: boolean;\n  noHeader?: boolean;\n  noFooter?: boolean;\n  noClose?: boolean;\n  controller?: any;\n  closeText?: string;\n  tag?: string;\n  padding?: string;\n};\nconst {\n  title = null,\n  center = false,\n  scrollable = false,\n  size = null,\n  fullscreen = false,\n  backdrop = \"static\",\n  focus = false,\n  keyboard = false,\n  noHeader = false,\n  noFooter = false,\n  noClose = false,\n  controller = null,\n  closeText = \"Close\",\n  tag = \"div\",\n  padding = \"1rem\",\n} = defineProps<Props>();\n\nconst modalRef = ref<any>(null);\nconst modal = ref<any>(null);\n\ntype Emits = {\n  close: any;\n  closed: any;\n  prevented: any;\n  open: any;\n  opened: any;\n  dismiss: any;\n};\nconst emit = defineEmits<Emits>();\n\nconst onClose = (e) => {\n  emit(\"close\", e);\n};\n\nconst onClosed = (e) => {\n  emit(\"closed\", e);\n  if (controller) {\n    controller.removeController();\n  }\n};\n\nconst onPrevented = (e) => {\n  emit(\"prevented\", e);\n};\n\nconst onOpen = (e) => {\n  emit(\"open\", e);\n};\n\nconst onOpened = (e) => {\n  emit(\"opened\", e);\n};\n\nconst dismiss = (e) => {\n  emit(\"dismiss\", e);\n};\n\nconst create = () => {\n  modal.value = new Modal(modalRef.value, {\n    backdrop,\n    focus,\n    keyboard,\n  });\n  modalRef.value?.addEventListener?.(\"hide.bs.modal\", onClose);\n  modalRef.value?.addEventListener?.(\"hidden.bs.modal\", onClosed);\n  modalRef.value?.addEventListener?.(\"hidePrevented.bs.modal\", onPrevented);\n  modalRef.value?.addEventListener?.(\"show.bs.modal\", onOpen);\n  modalRef.value?.addEventListener?.(\"shown.bs.modal\", onOpened);\n};\n\nconst open = () => {\n  modal.value?.show?.();\n};\n\nconst close = () => {\n  modal.value?.hide?.();\n};\n\nconst dispose = () => {\n  modalRef.value?.removeEventListener?.(\"hide.bs.modal\", onClose);\n  modalRef.value?.removeEventListener?.(\"hidden.bs.modal\", onClosed);\n  modalRef.value?.removeEventListener?.(\"hidePrevented.bs.modal\", onPrevented);\n  modalRef.value?.removeEventListener?.(\"show.bs.modal\", onOpen);\n  modalRef.value?.removeEventListener?.(\"shown.bs.modal\", onOpened);\n  modalRef.value?.dispose?.();\n};\n\nconst update = () => {\n  modal.value?.handleUpdate?.();\n};\n\ndefineExpose<Expose>({ open, close, dispose, update });\n\nonMounted(() => {\n  create();\n});\n\nonUnmounted(() => {\n  dispose();\n});\n</script>\n<template>\n  <Teleport to=\"body\">\n    <component\n      :is=\"tag\"\n      ref=\"modalRef\"\n      class=\"modal fade\"\n      tabindex=\"-1\"\n      v-bind=\"$attrs\"\n    >\n      <div\n        class=\"modal-dialog\"\n        :class=\"{\n          'modal-dialog-centered': center,\n          'modal-dialog-scrollable': scrollable,\n          ...(size ? { [`modal-${size}`]: true } : {}),\n          ...(fullscreen\n            ? {\n                [`modal-fullscreen${\n                  typeof fullscreen === 'string' ? `-${fullscreen}-down` : ''\n                }`]: true,\n              }\n            : {}),\n        }\"\n      >\n        <div class=\"modal-content\">\n          <div v-if=\"!noHeader\" class=\"modal-header\">\n            <slot name=\"title\">\n              <h5 class=\"modal-title\" v-html=\"title\"></h5>\n            </slot>\n            <slot name=\"header\"></slot>\n            <template v-if=\"!noClose\">\n              <CloseButton\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n                @click=\"dismiss\"\n              />\n            </template>\n          </div>\n          <div\n            v-if=\"$slots.default\"\n            class=\"modal-body\"\n            :style=\"{ '--bs-modal-padding': padding }\"\n          >\n            <slot></slot>\n          </div>\n          <div v-if=\"!noFooter\" class=\"modal-footer\">\n            <div class=\"d-flex flex-row gap-3\">\n              <template v-if=\"!noClose\">\n                <Button color=\"dark\" data-bs-dismiss=\"modal\" @click=\"dismiss\">\n                  <Icon :path=\"mdiClose\" />{{ closeText }}\n                </Button>\n              </template>\n              <slot name=\"buttons\"></slot>\n            </div>\n          </div>\n        </div>\n      </div>\n    </component>\n  </Teleport>\n</template>\n"],"names":["dropdownRef","ref","dropdown","watch","newRef","create","onClose","e","emit","onClosed","onOpen","onOpened","Dropdown","__props","open","_b","_a","close","dispose","__expose","menuClasses","computed","onMounted","onUnmounted","instance","getCurrentInstance","type","_h","_g","_f","_e","_d","_c","modalRef","modal","onPrevented","dismiss","Modal","_j","_i","_l","_k"],"mappings":"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"}