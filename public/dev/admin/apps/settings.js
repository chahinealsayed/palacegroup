import{a as D}from"../chunk/app.js";import{s as K}from"../chunk/index.js";import{d as L,c as B,a as l,b as _,e as g,r as N,z as j,j as z,q,o as P,f as h,v as $,k as F,A as O,y as G,p as U,F as A,g as V}from"../chunk/mc55b2a42316522d6.js";import{_ as w}from"../chunk/_plugin-vue_export-helper.js";import{w as T}from"../chunk/m78c574d5c3843a3d.js";import{c as W,M as H}from"../chunk/StringInput.js";import{A as J,C as Q}from"../chunk/ContentLoader.js";import{B as R}from"../chunk/Button.js";import{I as X}from"../chunk/Icon.js";import{C as Y}from"../chunk/m6cd080c8112b9076.js";import{a as E,s as Z}from"../chunk/api.js";import{r as S,u as I}from"../chunk/m6bdda40d8bd2cf5a.js";import{K as M}from"../chunk/ma6cfd38af5d4c661.js";import"../chunk/m21bbc25c9f3922b4.js";import"../chunk/m64d389f71fee61f4.js";import"../chunk/m14e047058b3edf4a.js";import"../chunk/TextInput.js";import"../chunk/RadioInput.js";import"../chunk/Modal.js";import"../chunk/m3fc8d974e5d8216d.js";import"../chunk/m110db13e4dc1cf62.js";import"../chunk/CloseButton.js";import"../chunk/md74f29767a891470.js";import"../chunk/m0006e5d5f2f1d6ce.js";import"../chunk/m1f9feaba4f71d948.js";import"../chunk/mf9318287aef1aff7.js";import"../chunk/md825331c71ee2150.js";import"../chunk/m3f31cae271cb9419.js";import"../chunk/m70a804eabc7aca6a.js";import"../chunk/mb498c278f04b6af0.js";import"../chunk/m9d53afba68c66192.js";import"../chunk/EditorView.js";import"../chunk/me2dc73ba3ddff3a0.js";import"../chunk/m91cc365b03266d60.js";import"../chunk/m83ea0bef6cab8431.js";import"../chunk/m2386e084f602c82c.js";import"../chunk/mb8063646094169aa.js";import"../chunk/m739ab1bf02c2db17.js";import"../chunk/mdbebdd5e57731077.js";import"../chunk/mab64b07d054bfd6d.js";import"../chunk/m7d7a7c6d011d9316.js";import"../chunk/mfe9c7759b05c1c34.js";import"../chunk/m00b1a7b3e0dbba07.js";import"../chunk/m89ff8ec026ac6cd4.js";import"../chunk/m5ac4d662e96449dd.js";import"../chunk/m80659984369ac5fa.js";import"../chunk/mf3f120fc158c659b.js";import"../chunk/ma0e3fbddd3785020.js";const x=L({inheritAttrs:!1,__name:"ListGroup",props:{type:{default:"items"},flush:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1}},setup(n){const u=B(()=>n.type==="actions"?"div":n.type==="orders"?"ol":"ul");return(o,i)=>(l(),_(z(u.value),j({class:["list-group",{"list-group-numbered":u.value==="ol","list-group-flush":o.flush,"list-group-horizontal":o.horizontal}]},o.$attrs),{default:g(()=>[N(o.$slots,"default")]),_:3},16,["class"]))}}),ee=w(x,[["__file","ListGroup.vue"]]),te=L({inheritAttrs:!1,__name:"ListGroupItem",props:{active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{default:"light"}},setup(n){const u=q(),o=B(()=>{var t,m,f,r,c,d;return((d=(c=(r=(f=(m=(t=u==null?void 0:u.parent)==null?void 0:t.props)==null?void 0:m.type)==null?void 0:f.toString)==null?void 0:r.call(f))==null?void 0:c.toLowerCase)==null?void 0:d.call(c))??null}),i=B(()=>o.value==="actions");return(t,m)=>(l(),_(z(i.value?"a":"li"),j({href:i.value?"#":null,class:["list-group-item",{"list-group-item-action":i.value,[`list-group-item-${t.color}`]:!0,active:t.active,disabled:t.disabled}],"aria-current":t.active?"true":void 0,"aria-disabled":t.disabled?"true":void 0,onClick:m[0]||(m[0]=T(()=>{},["prevent"]))},t.$attrs),{default:g(()=>[N(t.$slots,"default")]),_:3},16,["href","class","aria-current","aria-disabled"]))}}),ae=w(te,[["__file","ListGroupItem.vue"]]),oe=["onSubmit"],se={class:"mb-3"},re=L({__name:"SettingField",props:{item:{},category:{},value:{default:()=>{}}},setup(n){const u=S(null);class o extends H{get item(){return this.field(n.item.key??`${n.category.name}.${n.item.name}`,n.item.label,n.value??n.item.defaultValue)}get rules(){return[]}}const[i,t,m]=W(o),f=async()=>{var c,d,v,b,k;await((c=i.value)==null?void 0:c.validate())&&((v=(d=u.value)==null?void 0:d.start)==null||v.call(d),E().post("/settings/system",{name:(b=i.value)==null?void 0:b.item.name,value:(k=i.value)==null?void 0:k.item.value}).then(()=>{Z(n.item.label,"Saved Successfully")}).finally(()=>{var y,e;(e=(y=u.value)==null?void 0:y.stop)==null||e.call(y)}))};return t(),P(()=>{m()}),(r,c)=>(l(),h("form",{onSubmit:T(f,["prevent"])},[$("div",se,[I(i)?(l(),_(J,{key:0,type:r.item.type,field:I(i).item,attributes:r.item.attributes,props:r.item.props,icon:r.item.icon},{buttonAfter:g(({field:d})=>[F(R,{type:"submit",ref_key:"btn",ref:u,color:"secondary",outline:""},{default:g(()=>[F(X,{path:I(Y)},null,8,["path"]),O("Save ")]),_:1},512)]),_:1},8,["type","field","attributes","props","icon"])):G("",!0)])],40,oe))}}),ie=w(re,[["__file","SettingField.vue"]]),le={class:"row"},ne={class:"col-md-3"},ue={key:0,class:"col-md-9"},me={class:"display-6 mb-3"},pe={key:1,class:"p-3 text-muted"},ce=L({__name:"Settings",setup(n){var v,b,k,y;const u=(b=(v=K())==null?void 0:v.map)==null?void 0:b.call(v,e=>(e.items=e.items.map(p=>({...p,key:`${e.name}.${p.name}`})),e)),o=S(u),i=S((y=(k=o.value)==null?void 0:k.at(0))==null?void 0:y.name),t=S(null),m=S(null),f=e=>{i.value=e.name},r=B(()=>{var e;return(e=o.value)==null?void 0:e.find(p=>p.name===i.value)}),c=()=>{var e,p;(p=(e=m.value)==null?void 0:e.start)==null||p.call(e),E().get("/settings/system").then(({data:a})=>{t.value=a.reduce((s,C)=>(s[C.name]=C.value,s),{}),d()}).finally(()=>{var a,s;(s=(a=m.value)==null?void 0:a.stop)==null||s.call(a)})},d=()=>{var e;if(!Object.is(t.value,null)&&Array.isArray(o.value)){const p=[];(e=o.value)==null||e.forEach(s=>{s.items.forEach(C=>{p.push(`${s.name}.${C.name}`)})});const a=Object.keys(t.value).filter(s=>!p.includes(s)).map(s=>({type:"string",key:s,name:s,label:s,defaultValue:t.value[s]}));o.value.push({name:"other",label:"Others",items:a})}};return U(()=>{c()}),(e,p)=>(l(),h(A,null,[$("pre",null,M(typeof t.value),1),Array.isArray(o.value)?(l(),_(Q,{key:0,ref_key:"loader",ref:m,title:"Settings"},{default:g(()=>[$("div",le,[$("div",ne,[F(ee,{type:"actions"},{default:g(()=>[(l(!0),h(A,null,V(o.value,a=>(l(),_(ae,{key:a.name,active:i.value===a.name,onClick:s=>f(a)},{default:g(()=>[O(M(a.label),1)]),_:2},1032,["active","onClick"]))),128))]),_:1})]),r.value?(l(),h("div",ue,[$("div",me,M(r.value.label),1),(l(!0),h(A,null,V(r.value.items,a=>(l(),h(A,{key:`${r.value.name}-${a.name}`},[Object.is(t.value,null)?G("",!0):(l(),_(ie,{key:0,item:a,category:r.value,value:t.value[`${a.key}`]},null,8,["item","category","value"]))],64))),128))])):G("",!0)])]),_:1},512)):(l(),h("div",pe,"There are no settings"))],64))}}),de=w(ce,[["__file","Settings.vue"]]),fe=D("settings",de);fe.mount();
//# sourceMappingURL=settings.js.map
