var Fe=Object.defineProperty;var Be=(a,e,t)=>e in a?Fe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var ie=(a,e,t)=>(Be(a,typeof e!="symbol"?e+"":e,t),t);import{c as Ae,a as Oe}from"../chunk/app.js";import{c as te,u as Le,l as ae,t as he}from"../chunk/index.js";import{M as de,c as Re,F as J,C as je,f as Pe}from"../chunk/ModalForm.js";import{u as ze,B as z,n as We,a as ue,i as Ue}from"../chunk/Button.js";import{I as B}from"../chunk/Icon.js";import{b as Ve,a as le,c as qe,d as He,e as Ge,f as Ke,m as ye,g as _e,h as be,j as Xe,k as Ye,l as Je}from"../chunk/m6cd080c8112b9076.js";import{M as Y,a as $e,S as Q}from"../chunk/StringInput.js";import{S as ke}from"../chunk/string.js";import{a as L,s as ce}from"../chunk/api.js";import{w as fe,u as Qe}from"../chunk/m78c574d5c3843a3d.js";import{d as N,a as p,f as $,F as O,g as G,v as g,r as j,k as i,A as w,y as S,b as A,o as Ze,i as et,e as h,n as Z,B as tt,C as Ce,T as at,D as lt,E as st,p as nt,q as it,z as De,c as U,G as xe}from"../chunk/mc55b2a42316522d6.js";import{r as C,u as k}from"../chunk/m6bdda40d8bd2cf5a.js";import{n as W,K as P,y as X}from"../chunk/ma6cfd38af5d4c661.js";import{_ as E}from"../chunk/_plugin-vue_export-helper.js";import{T as Me}from"../chunk/TextInput.js";import{A as rt,C as Te,d as ot,E as ut,a as ct,c as dt}from"../chunk/ContentLoader.js";import{R as Ie}from"../chunk/RadioInput.js";import{M as Se}from"../chunk/Modal.js";import{T as ft}from"../chunk/m3fc8d974e5d8216d.js";import{S as pt}from"../chunk/Seo.js";import{E as vt}from"../chunk/EditorView.js";import"../chunk/m21bbc25c9f3922b4.js";import"../chunk/m64d389f71fee61f4.js";import"../chunk/m14e047058b3edf4a.js";import"../chunk/CloseButton.js";import"../chunk/ma0e3fbddd3785020.js";import"../chunk/m0006e5d5f2f1d6ce.js";import"../chunk/md74f29767a891470.js";import"../chunk/m1f9feaba4f71d948.js";import"../chunk/mf9318287aef1aff7.js";import"../chunk/md825331c71ee2150.js";import"../chunk/m3f31cae271cb9419.js";import"../chunk/m70a804eabc7aca6a.js";import"../chunk/mb498c278f04b6af0.js";import"../chunk/m9d53afba68c66192.js";import"../chunk/me2dc73ba3ddff3a0.js";import"../chunk/m91cc365b03266d60.js";import"../chunk/m83ea0bef6cab8431.js";import"../chunk/m2386e084f602c82c.js";import"../chunk/mb8063646094169aa.js";import"../chunk/m739ab1bf02c2db17.js";import"../chunk/mdbebdd5e57731077.js";import"../chunk/mab64b07d054bfd6d.js";import"../chunk/m7d7a7c6d011d9316.js";import"../chunk/mfe9c7759b05c1c34.js";import"../chunk/m00b1a7b3e0dbba07.js";import"../chunk/m89ff8ec026ac6cd4.js";import"../chunk/m5ac4d662e96449dd.js";import"../chunk/m80659984369ac5fa.js";import"../chunk/mf3f120fc158c659b.js";import"../chunk/m110db13e4dc1cf62.js";const[me,ht]=Ae({});class V extends Y{static generate(e,t,l={},c="content"){var b,D,m,T;let n=e,u=e.split(/\[(.*)\](.*)/).filter(y=>y);u.length>1&&(n=u[1]);const s=((T=(m=(D=(b=te())==null?void 0:b[c][n])==null?void 0:D.attrs)==null?void 0:m.find(y=>`${y.column}`==`${t}`))==null?void 0:T.fields)??[];return new V(l,y=>{ht(y,s)})}get attrs(){return me(this)}beforeCreate(){me(this).forEach(t=>{var c;this.createField(t.name,t.label,((c=this.initData)==null?void 0:c[t.name])??t.defaultValue??"");const l=this[t.name];this.setField(l)})}get rules(){return[]}}class mt extends Y{constructor(){super(...arguments);ie(this,"type","default")}get id(){var t;return this.field("id","ID",((t=this.initData)==null?void 0:t.id)??null)}get contentId(){var t;return this.field("content_id","Content ID",((t=this.initData)==null?void 0:t.content_id)??null)}get language(){var t;return this.field("language","Language",((t=this.initData)==null?void 0:t.language)??"en")}get title(){var t;return this.field("title","Title",((t=this.initData)==null?void 0:t.title)??"")}get excerpt(){var t;return this.field("excerpt","Excerpt",((t=this.initData)==null?void 0:t.excerpt)??"")}get blocks(){var t;return this.field("blocks","Text",((t=this.initData)==null?void 0:t.blocks)??{})}get attrs(){return this.hasOne("attrs",t=>V.generate(this.type,"local",t))}get rules(){return[[[this.title],ke],[[this.title],$e]]}}class gt extends Y{get id(){var e;return this.field("id","ID",((e=this.initData)==null?void 0:e.id)??null)}get type(){var e;return this.field("type","Type",((e=this.initData)==null?void 0:e.type)??"default")}get status(){var e;return this.field("status","Status",((e=this.initData)==null?void 0:e.status)??"active")}get position(){var e;return this.field("position","Position",((e=this.initData)==null?void 0:e.position)??"0")}get categories(){var e;return this.field("categories","Categories",((e=this.initData)==null?void 0:e.categories)??[])}get attrs1(){return this.hasOne("attrs1",e=>{var t;return V.generate(((t=this.initData)==null?void 0:t.type)??"default","1",this.initData.attrs)})}get attrs2(){return this.hasOne("attrs2",e=>{var t;return V.generate(((t=this.initData)==null?void 0:t.type)??"default","2",this.initData.attrs)})}get attrs3(){return this.hasOne("attrs3",e=>{var t;return V.generate(((t=this.initData)==null?void 0:t.type)??"default","3",this.initData.attrs)})}get locals(){return this.hasLocals(e=>new mt(e,t=>{t.type=this.initData.type??"default"}))}get rules(){return[]}controlData(e){return e.attrs={...e.attrs1,...e.attrs2,...e.attrs3},delete e.attrs1,delete e.attrs2,delete e.attrs3,e}}const yt=["id","onClick","disabled"],_t=N({__name:"Navs",props:{type:{default:"nav"},tabs:{},alignment:{default:"start"},vertical:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},justified:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:e}){var c;const t=C(((c=a.tabs[0])==null?void 0:c.name)??""),l=n=>{t.value=n.name,e("select",n)};return(n,u)=>(p(),$("ul",{class:W(["nav",{"nav-tabs":n.type==="tabs","nav-pills":n.type==="pills","nav-fill":n.fill,"nav-justified":n.justified,"flex-column":n.vertical,"justify-content-start":n.alignment==="start","justify-content-center":n.alignment==="center","justify-content-end":n.alignment==="end","flex-sm-row":n.responsive}]),role:"tablist"},[(p(!0),$(O,null,G(n.tabs,(s,o)=>(p(),$("li",{key:o,class:W(["nav-item",{"flex-sm-fill":n.responsive,"text-sm-center":n.responsive}])},[g("a",{href:"#",class:W(["nav-link",{disabled:s.disabled??!1,active:t.value===s.name}]),id:`tab-${s.name}`,"aria-current":"page",onClick:fe(b=>l(s),["prevent"]),disabled:s.disabled},[j(n.$slots,`${s.name}-tab`,{tab:s},()=>[s.icon?(p(),$(O,{key:0},[i(B,{path:s.icon},null,8,["path"]),w(" Â ")],64)):S("",!0),g("span",null,P(s.label),1)])],10,yt)],2))),128))],2))}}),pe=E(_t,[["__file","Navs.vue"]]),bt={class:"tab-content"},$t=["aria-labelledby","tabindex"],kt=N({__name:"TabContent",props:{type:{default:"nav"},tabs:{},alignment:{default:"start"},vertical:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},justified:{type:Boolean,default:!1},responsive:{type:Boolean,default:!1},disableNavs:{type:Boolean,default:!1}},setup(a,{expose:e}){var c;const t=C(((c=a.tabs[0])==null?void 0:c.name)??""),l=n=>{t.value=n.name};return e({select:l}),(n,u)=>(p(),$(O,null,[n.disableNavs?S("",!0):(p(),A(pe,{key:0,type:n.type,tabs:n.tabs,alignment:n.alignment,vertical:n.vertical,fill:n.fill,justified:n.justified,responsive:n.responsive,onSelect:l},null,8,["type","tabs","alignment","vertical","fill","justified","responsive"])),g("div",bt,[(p(!0),$(O,null,G(n.tabs,(s,o)=>(p(),$("div",{key:o,class:W(["tab-pane fade",{show:t.value===s.name,active:t.value===s.name}]),role:"tabpanel","aria-labelledby":`tab-${s.name}`,tabindex:o},[j(n.$slots,s.name,{tab:s},void 0,!0)],10,$t))),128))])],64))}});const we=E(kt,[["__scopeId","data-v-f4ea6047"],["__file","TabContent.vue"]]),Ct=N({inheritAttrs:!1,__name:"AttrsInput",props:{model:{}},setup(a){return(e,t)=>(p(!0),$(O,null,G(e.model.attrs,l=>{var c;return p(),$("div",{key:l.name,class:"mb-3"},[i(rt,{type:l.type,field:(c=e.model)==null?void 0:c[l.name],attributes:l.attributes,props:l.props},null,8,["type","field","attributes","props"])])}),128))}}),K=E(Ct,[["__file","AttrsInput.vue"]]),Dt=N({__name:"Wait",props:{time:{}},setup(a){const e=C(!1),t=setTimeout(()=>{e.value=!0},a.time);return Ze(()=>{clearTimeout(t)}),(l,c)=>e.value?j(l.$slots,"default",{key:0}):S("",!0)}}),xt=E(Dt,[["__file","Wait.vue"]]),Mt=a=>{let e=a,t=null,l=a.split(/\[(.*)\](.*)/).filter(c=>c);return l.length>1&&(t=+l[0],e=l[1]),{id:t,name:e}};function Tt(a){var l;const{name:e}=Mt(a);let t=!0;return Object.entries((l=te())==null?void 0:l.content).forEach(([c,n])=>{var s,o,b;c.split(".")[0]===e&&(t=t&&((b=(o=(s=te())==null?void 0:s.content)==null?void 0:o[c])==null?void 0:b.max)>0)}),t}class It extends Y{constructor(){super(...arguments);ie(this,"type","default")}get id(){var t;return this.field("id","ID",((t=this.initData)==null?void 0:t.id)??null)}get categoryId(){var t;return this.field("category_id","Category ID",((t=this.initData)==null?void 0:t.category_id)??null)}get language(){var t;return this.field("language","Language",((t=this.initData)==null?void 0:t.language)??"en")}get title(){var t;return this.field("title","Title",((t=this.initData)==null?void 0:t.title)??"")}get excerpt(){var t;return this.field("excerpt","Excerpt",((t=this.initData)==null?void 0:t.excerpt)??"")}get attrs(){return this.hasOne("attrs",t=>V.generate(this.type,"local",t,"category"))}get rules(){return[[[this.title],ke],[[this.title],$e]]}}class St extends Y{get id(){var e;return this.field("id","ID",((e=this.initData)==null?void 0:e.id)??null)}get type(){var e;return this.field("type","Type",((e=this.initData)==null?void 0:e.type)??"default")}get parentId(){var e;return this.field("parent_id","Parent ID",((e=this.initData)==null?void 0:e.parent_id)??null)}get path(){var e;return this.field("path","Path",((e=this.initData)==null?void 0:e.path)??null)}get status(){var e;return this.field("status","Status",((e=this.initData)==null?void 0:e.status)??"active")}get position(){var e;return this.field("position","Position",((e=this.initData)==null?void 0:e.position)??"0")}get locals(){return this.hasLocals(e=>new It(e,t=>{t.type=this.initData.type??"default"}))}get attrs(){return this.hasOne("attrs",e=>{var t;return V.generate(((t=this.initData)==null?void 0:t.type)??"default","settings",this.initData.attrs,"category")})}get rules(){return[]}}const wt={class:"node-header"},Nt={class:"prefix"},Et=["onClick"],Ft={class:"title"},Bt={key:0,class:"node-body"},At={key:1,class:"text-muted px-3"},Ot=N({__name:"Node",props:{model:{},index:{},refresh:{type:Function},level:{default:0},defaultMsg:{type:Boolean,default:!1}},setup(a){const e=C(!1),t=C([]),l=C(null),c=()=>{e.value=!e.value,Z(()=>{e.value&&!t.length&&u()})},n=et("dataFactory"),u=()=>{var o;(o=l.value)==null||o.start(),n({parent:a.model,level:a.level+1,index:a.index},b=>{var D;t.value=b,(D=l.value)==null||D.stop()})},s=()=>{t.value=[],Z(()=>{u()})};return(o,b)=>(p(),$("div",{class:W(["node",{expanded:e.value}])},[g("div",wt,[g("div",Nt,[g("div",{class:"toggle-icon",onClick:fe(c,["stop"])},[i(B,{path:e.value?k(Ve):k(le)},null,8,["path"])],8,Et)]),g("div",Ft,[j(o.$slots,"default",{model:o.model,level:o.level,index:o.index,refresh:o.refresh},void 0,!0)])]),e.value?(p(),$("div",Bt,[i(Te,{ref_key:"loader",ref:l,title:"Data",class:"ps-4"},{default:h(()=>[t.value.length>0?(p(),A(Ne,{key:0,parent:o.model,children:t.value,level:o.level+1,"default-msg":o.defaultMsg,refresh:s},{default:h(({model:D,level:m,index:T,refresh:y})=>[j(o.$slots,"default",{model:D,level:m,index:T,refresh:y},void 0,!0)]),_:3},8,["parent","children","level","default-msg"])):o.defaultMsg?(p(),$("div",At,"There are no children yet")):S("",!0)]),_:3},512)])):S("",!0)],2))}});const Lt=E(Ot,[["__scopeId","data-v-8b779731"],["__file","Node.vue"]]),Rt={key:0,class:"nodes"},jt=N({__name:"Nodes",props:{parent:{default:null},children:{},level:{default:0},defaultMsg:{type:Boolean,default:!1},refresh:{type:Function}},setup(a){return(e,t)=>e.children.length>0?(p(),$("div",Rt,[(p(!0),$(O,null,G(e.children,(l,c)=>(p(),A(Lt,{key:c,model:l,index:c,level:e.level,"default-msg":e.defaultMsg,refresh:e.refresh},{default:h(({model:n,level:u,index:s,refresh:o})=>[j(e.$slots,"default",{model:n,level:u,index:s,refresh:o},void 0,!0)]),_:2},1032,["model","index","level","default-msg","refresh"]))),128))])):S("",!0)}});const Ne=E(jt,[["__scopeId","data-v-bb41fc34"],["__file","Nodes.vue"]]),Pt={key:0,class:"tree"},zt=N({__name:"Tree",props:{dataFactory:{type:Function},defaultMsg:{type:Boolean,default:!1}},setup(a,{expose:e}){tt("dataFactory",a.dataFactory);const t=C([]),l=()=>{a.dataFactory({parent:null,level:0,index:0},n=>{t.value=n})},c=()=>{t.value=[],Z(()=>{l()})};return l(),e({refresh:c}),(n,u)=>t.value.length>0?(p(),$("div",Pt,[i(Ne,{children:t.value,refresh:c,"default-msg":n.defaultMsg},{default:h(({model:s,level:o,index:b,refresh:D})=>[j(n.$slots,"default",{model:s,level:o,index:b,refresh:D},void 0,!0)]),_:3},8,["children","default-msg"])])):S("",!0)}});const Wt=E(zt,[["__scopeId","data-v-c60a5bd6"],["__file","Tree.vue"]]),Ut={beforeMount(a,e,t){a.clickOutsideEvent=function(l){!(a===l.target||a.contains(l.target))&&e.value&&e.value(l,a)},document.addEventListener("click",a.clickOutsideEvent),document.addEventListener("touchstart",a.clickOutsideEvent)},unmounted(a){document.removeEventListener("click",a.clickOutsideEvent),document.removeEventListener("touchstart",a.clickOutsideEvent)}},Vt=Ut,qt=a=>(lt("data-v-7a001ff1"),a=a(),st(),a),Ht=qt(()=>g("div",{class:"fallback"},"No content found",-1)),Gt=N({__name:"ContextMenu",emits:["open","close"],setup(a,{expose:e,emit:t}){Qe(m=>({"15147f59":s.value,"15147f58":u.value}));const l=C(!1),c=C(null),n=C(null),u=C(0),s=C(0),o=m=>{l.value=!0,document.body.click(),Z(()=>{D(m.clientX,m.clientY),t("open")})},b=()=>{l.value=!1,t("close")},D=(m,T)=>{u.value=m,s.value=T;const y=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),v=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);if(c.value){const{width:_,height:r}=c.value.getBoundingClientRect();_+u.value>y&&u.value-_<0?u.value=Math.ceil((_+u.value)/2):_+u.value>y&&(u.value-=_),r+s.value>v&&s.value-r<0?s.value=Math.ceil((r+s.value)/2):r+s.value>v&&(s.value-=r)}u.value=`${u.value}px`,s.value=`${s.value}px`};return e({open:o,close:b}),(m,T)=>(p(),$(O,null,[j(m.$slots,"default",{ref_key:"element",ref:n,open:y=>o(y)},void 0,!0),(p(),A(at,{to:"body"},[l.value?Ce((p(),$("div",{key:0,ref_key:"contextMenu",ref:c,class:"context-menu"},[j(m.$slots,"contextmenu",{},()=>[Ht],!0)])),[[k(Vt),b]]):S("",!0)]))],64))}});const Kt=E(Gt,[["__scopeId","data-v-7a001ff1"],["__file","ContextMenu.vue"]]),re=new Map,Xt={beforeMount(a,e,t){var c;let l={};typeof e.value=="object"?(a.setAttribute("title",((c=e.value)==null?void 0:c.title)??null),l={...l,...e.value}):typeof e.value=="string"&&(a.setAttribute("title",e.value),l.title=e.value),re.set(a,new ft(a,l))},beforeUnmount(a){var e;(e=re.get(a))==null||e.dispose(),re.delete(a)}},Yt=Xt,Jt=["onContextmenu"],Qt={key:0,class:"text-danger"},Zt={key:0,class:"list-group list-group-flush"},ea=["onClick"],ta={class:"item"},aa={class:"name"},la={key:1,class:"text-muted"},oe={},ge=[],sa=N({__name:"Ref",props:{value:{},startWith:{}},setup(a,{expose:e}){const t=it();ge.push(t);const l=C(null),c=C(null),n=C(null),u=C(null),s=(m=!1)=>new Promise(T=>{var y;(y=c.value)==null||y.start(),l.value=null,!m&&Object.hasOwn(oe,a.startWith)?Z(()=>{var v;l.value=[...oe[a.startWith]],b(),(v=c.value)==null||v.stop(),T(l.value)}):L().get(`/settings/references?startWith=${a.startWith}`).then(({data:v})=>{l.value=oe[a.startWith]=v.map(_=>o(_)),b(),T(l.value)}).finally(()=>{var v;(v=c.value)==null||v.stop()})}),o=m=>({...m,label:m.name.split(".").reverse().map(T=>ze(T)).join(" ")}),b=()=>{n.value=null,l.value.forEach(m=>{+m.value==+a.value&&(n.value={...o(m)})})},D=m=>{var v;const T=((v=n.value)==null?void 0:v.id)??0,y=m.id;T!==y&&(L().post("/settings/references",{oldId:T,newId:y,value:a.value}).finally(()=>{var _;(_=u.value)==null||_.close(),s(!0).then(()=>{ge.forEach((r,I)=>{var F;(r==null?void 0:r.uid)!==(t==null?void 0:t.uid)&&((F=r==null?void 0:r.exposed)==null||F.fetch())})})}),n.value={...m,value:a.value})};return nt(()=>{s()}),e({fetch:s}),(m,T)=>k(Le)().type==="developer"?(p(),A(Kt,{key:0,ref_key:"contextMenu",ref:u},{default:h(({open:y})=>[g("span",{onContextmenu:fe(v=>y(v),["right","prevent"])},[j(m.$slots,"default",{},()=>[w(P(m.value),1)],!0),n.value&&+n.value.value==+m.value?Ce((p(),$("sup",Qt,[w("*")])),[[k(Yt),`${n.value.label}
${n.value.name}`]]):S("",!0)],40,Jt)]),contextmenu:h(()=>[i(Te,{ref_key:"loader",ref:c,title:"References"},{default:h(()=>[l.value&&l.value.length>0?(p(),$("ul",Zt,[(p(!0),$(O,null,G(l.value,y=>(p(),$("li",{key:y.id,class:"list-group-item p-0",onClick:v=>D(y)},[g("div",ta,[n.value&&+n.value.value==+y.value?(p(),A(B,{key:0,path:k(qe),color:"success"},null,8,["path"])):(p(),A(B,{key:1,path:k(He),color:"muted"},null,8,["path"])),g("span",aa,P(y.label),1)])],8,ea))),128))])):(p(),$("div",la,"There are no references yet"))]),_:1},512)]),_:3},512)):j(m.$slots,"default",{key:1},()=>[w(P(m.value),1)],!0)}});const Ee=E(sa,[["__scopeId","data-v-57e576fc"],["__file","Ref.vue"]]),na=N({inheritAttrs:!1,__name:"FriendlyUrlModal",props:{target:{},name:{},route:{},params:{}},setup(a){const e=C(null),t=C(null);class l extends Y{get id(){var s;return this.field("id","ID",((s=this.initData)==null?void 0:s.id)??null)}get target(){var s;return this.field("target","Target",((s=this.initData)==null?void 0:s.target)??"default")}get name(){var s;return this.field("name","Name",((s=this.initData)==null?void 0:s.name)??"")}get pattern(){var s;return this.field("pattern","Pattern",((s=this.initData)==null?void 0:s.pattern)??"")}get route(){var s;return this.field("route","Route",((s=this.initData)==null?void 0:s.route)??"")}get params(){var s;return this.field("params","Params",((s=this.initData)==null?void 0:s.params)??{})}get rules(){return[]}}const c=()=>{var u,s;(s=(u=e.value)==null?void 0:u.start)==null||s.call(u),L().get(`/friendlyUrl?filter[target]=${a.target}`).then(({data:o})=>{var b,D;(D=(b=t.value)==null?void 0:b.open)==null||D.call(b,o[0]??{target:a.target,name:a.name,route:a.route,params:a.params})}).finally(()=>{var o,b;(b=(o=e.value)==null?void 0:o.stop)==null||b.call(o)})},n=(u,s)=>{let o;u.isNewRecord?o=L().post("/friendlyUrl",u.data):o=L().put(`/friendlyUrl/${u.id.value}`,u.data),o.then(()=>{ce(`${a.name} url Saved Successfully`),s()}).catch(b=>{var D;s(!0),(D=u==null?void 0:u.addRemoteErrors)==null||D.call(u,b)})};return(u,s)=>(p(),$(O,null,[i(z,De({ref_key:"btn",ref:e,onClick:c},u.$attrs,{"spinner-small":""}),{default:h(()=>[i(B,{path:k(Ge)},null,8,["path"]),w("Url")]),_:1},16),i(de,{ref_key:"modal",ref:t,name:k(We)(u.name),"model-class":l,onSave:n},{default:h(({model:o})=>[i(Q,{field:o.pattern},null,8,["field"])]),_:1},8,["name"])],64))}}),se=E(na,[["__file","FriendlyUrlModal.vue"]]),ia=N({inheritAttrs:!1,__name:"SeoModal",props:{target:{default:""},title:{default:""}},setup(a){const e=C(null),t=()=>{var l;(l=e.value)==null||l.open()};return(l,c)=>(p(),$(O,null,[i(z,De(l.$attrs,{onClick:t}),{default:h(()=>[i(B,{path:k(Ke)},null,8,["path"]),w(" Seo ")]),_:1},16),i(Se,{ref_key:"modal",ref:e,title:`${l.title??l.target} SEO`,size:"xl"},{default:h(()=>[i(pt,{target:l.target},null,8,["target"])]),_:1},8,["title"])],64))}}),ne=E(ia,[["__file","SeoModal.vue"]]),ra={class:"actions d-flex flex-row gap-3"},oa={class:"categories"},ua={class:"category-node"},ca={class:"name"},da={class:"node-actions"},fa={class:"box mb-3"},pa={class:"h6"},va={class:"mb-3"},ha={class:"mb-3"},ma={class:"mb-3"},ga={class:"mb-3"},ya=N({__name:"Categories",props:{type:{},id:{default:0}},setup(a){const e=C(null),t=C(null),l=C(null),c=C(null),n=(v,_)=>{u(v.parent).then(r=>{_(r)})},u=v=>new Promise(_=>{L().get(`/categories?expand=local,locals&filter[type][like]=${a.id>0?`[${a.id}]`:""}${a.type}&filter[parent_id]=${(v==null?void 0:v.id)??null}&sort=position,local.name`).then(({data:r})=>{_(r)})}),s=(v,_=null)=>{var r,I;l.value=v,(I=(r=e.value)==null?void 0:r.open)==null||I.call(r,{type:`${a.id>0?`[${a.id}]`:""}${a.type}`,parent_id:(_==null?void 0:_.id)??null,path:_!=null&&_.id?`${[_.id].reduce((F,q)=>(F.push(q),F),_.path?_.path.split(","):[]).join(",")}`:null})},o=(v,_)=>{var r,I;l.value=v,(I=(r=e.value)==null?void 0:r.open)==null||I.call(r,_)},b=(v,_)=>{let r;v.isNewRecord?r=L().post("/categories",v.data):r=L().put(`/categories/${v.id.value}`,v.data),r.then(()=>{_(),l.value&&(l.value(),l.value=null)})},D=U(()=>[...ae().map(v=>({name:v.value,label:v.label,icon:_e})),{name:"settings",label:"Settings",icon:be}]),m=U(()=>[{value:"active",label:"Active"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"deleted",label:"Deleted"}]),T=v=>{c.value.select(v)},y=U(()=>`${a.id>0?`[${a.id}]`:""}${a.type}`);return(v,_)=>(p(),$(O,null,[g("div",ra,[t.value?(p(),A(z,{key:0,color:"primary",onClick:_[0]||(_[0]=r=>s(t.value.refresh))},{default:h(()=>[i(B,{path:k(le)},null,8,["path"]),w("Add New Category ")]),_:1})):S("",!0),i(se,{target:`content:${y.value}`,name:v.type,route:"/default/categories",params:{type:y.value}},null,8,["target","name","params"]),i(ne,{target:`categories:${y.value}-`,title:v.type,color:"primary"},null,8,["target","title"])]),g("div",oa,[i(Wt,{ref_key:"tree",ref:t,"data-factory":n,"default-msg":""},{default:h(({model:r,level:I,index:F,refresh:q})=>{var ee,H;return[g("div",ua,[g("div",ca,[(p(),A(Ee,{key:r.id,value:r.id,"start-with":`cms.categories.${y.value}`},{default:h(()=>[w(P(r.local.title),1)]),_:2},1032,["value","start-with"]))]),g("div",da,[i(se,{target:`category:${r.id}`,name:((ee=r.local)==null?void 0:ee.title)??k(ue)(),route:"/default/content",params:{id:r.id},color:"danger",size:"sm"},null,8,["target","name","params"]),i(ne,{target:`category:${r.id}-`,title:(H=r==null?void 0:r.local)==null?void 0:H.title,color:"warning",size:"sm"},null,8,["target","title"]),i(z,{color:"success",size:"sm",onClick:f=>s(q,r)},{default:h(()=>[i(B,{path:k(le)},null,8,["path"])]),_:2},1032,["onClick"]),i(z,{color:"info",size:"sm",onClick:f=>o(q,r)},{default:h(()=>[i(B,{path:k(ye)},null,8,["path"])]),_:2},1032,["onClick"])])])]}),_:1},512)]),i(de,{name:"Category","model-class":k(St),size:"lg",ref_key:"modal",ref:e,onSave:b},{header:h(()=>[i(pe,{type:"pills",tabs:D.value,alignment:"center",onSelect:T,style:{flex:"auto"}},null,8,["tabs"])]),default:h(({model:r})=>[i(we,{tabs:D.value,type:"tabs","disable-navs":"",ref_key:"tabContent",ref:c},xe({navs:h(()=>[]),settings:h(({tab:I})=>[i(K,{model:r.attrs},null,8,["model"]),g("div",ma,[i(Q,{field:r.position,type:"number"},null,8,["field"])]),g("div",ga,[i(Ie,{field:r.status,options:m.value,inline:""},null,8,["field","options"])])]),_:2},[G(k(ae)(),(I,F)=>({name:I.value,fn:h(({tab:q})=>[g("div",fa,[g("div",pa,P(I.label),1),g("div",{style:X([I.value==="ar"?{direction:"rtl"}:{direction:"ltr"}])},[g("div",va,[i(Q,{field:r.locals[F].title,style:X([I.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"}])},null,8,["field","style"])]),g("div",ha,[i(Me,{field:r.locals[F].excerpt,style:X([I.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"}])},null,8,["field","style"])]),i(K,{model:r.locals[F].attrs},null,8,["model"])],4)])])}))]),1032,["tabs"])]),_:1},8,["model-class"])],64))}});const _a=E(ya,[["__scopeId","data-v-e669fa06"],["__file","Categories.vue"]]),ba={class:"col-md-3"},$a={class:"position-sticky top-0"},ka={class:"mb-3"},Ca={class:"mb-3"},Da={class:"row h-100"},xa={class:"categories-checks"},Ma={class:"mb-3"},Ta={class:"mb-3"},Ia=N({__name:"Contents",props:{type:{},id:{default:0}},setup(a){const e=C(null),t=C(null),l=C(null),c=C(null),n=C(null),u=C([]),s=Re({type:J.Number,name:"id",label:"ID",fitable:!0,sortable:!0,searchable:!0},{type:J.String,name:"title",label:"Title",searchable:!0,sortable:!0},{type:J.String,name:"status",label:"Status",fitable:!0,searchable:!0,sortable:!0},{type:J.Number,name:"position",label:"Position",fitable:!0,searchable:!0,sortable:!0},{type:J.Number,name:"type",label:"Type",fitable:!0,searchable:!0,sortable:!0}),o=U(()=>{var f,M,d;return((d=(M=(f=te())==null?void 0:f.type)==null?void 0:M.find(x=>x.name===a.type))==null?void 0:d.label)??a.type}),b=()=>{var f,M;(M=(f=t.value)==null?void 0:f.open)==null||M.call(f,{type:`${a.id>0?`[${a.id}]`:""}${a.type}`})},D=f=>{var d,x;const M={...f};M.categories&&(M.categories=M.categories.map(R=>R.id)),(x=(d=t.value)==null?void 0:d.open)==null||x.call(d,M)},m=(f,M)=>{let d;f.isNewRecord?d=L().post("/contents",f.data):d=L().put(`/contents/${f.id.value}`,f.data),d.then(()=>{var x;ce(`${o.value} ${f.locals[0].title.value} Saved Successfully`),(x=e.value)==null||x.refresh(),M()})},T=f=>{dt(`Delete ${f.locals[0].title}`).then(M=>{M&&L().delete(`/contents/${f.id}`).then(()=>{var d;ce(`Content "${f.locals[0].title}" deleted successfully`),(d=e.value)==null||d.refresh()})})},y=U(()=>[...ae().map(f=>({name:f.value,label:f.label,icon:_e})),{name:"settings",label:"Settings",icon:be}]),v=f=>{c.value.select(f)},_=f=>{u.value.push(f)},r=U(()=>[{value:"active",label:"Active"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"deleted",label:"Deleted"}]),I=U(()=>Array.isArray(n.value)&&n.value.length>0?"col-md-3":"col-md-4"),F=()=>{n.value=[],L().get(`/categories?expand=local&filter[type]=${a.type}&sort=position,local.name`).then(async({data:f})=>{n.value=ot((M,d,x,R)=>({value:M.id,label:`${d}&nbsp;${M.local.title}`,title:M.local.title}),f,{delimiter:Ue({path:Je})})})},q=()=>{var f,M;(M=(f=l.value)==null?void 0:f.open)==null||M.call(f)},ee=()=>{F()},H=U(()=>`${a.id>0?`[${a.id}]`:""}${a.type}`);return F(),(f,M)=>(p(),$(O,null,[i(je,{ref_key:"crud",ref:e,fields:k(s),fetch:k(Pe)("/contents","local,locals,categories",{filter:{type:{like:H.value}}})},{topActions:h(()=>[k(Tt)(f.type)?S("",!0):(p(),$(O,{key:0},[i(se,{target:`content:${H.value}`,name:f.type,route:"/default/contents",params:{type:H.value}},null,8,["target","name","params"]),i(ne,{target:`contents:${H.value}-`,title:f.type,color:"primary"},null,8,["target","title"]),i(z,{color:"primary",onClick:q},{default:h(()=>[i(B,{path:k(Xe),color:"info"},null,8,["path"]),w(P(k(he)("Categories")),1)]),_:1}),i(z,{color:"primary",onClick:b},{default:h(()=>[i(B,{path:k(le),color:"info"},null,8,["path"]),w(P(`${k(he)("Add New")} ${o.value}`),1)]),_:1})],64))]),actions:h(({item:d})=>{var x,R;return[i(se,{target:`content:${d.id}`,name:((x=d.local)==null?void 0:x.title)??k(ue)(),route:"/default/content",params:{id:d.id},color:"success",size:"sm"},null,8,["target","name","params"]),i(ne,{target:`content:${d.id}-`,title:(R=d==null?void 0:d.local)==null?void 0:R.title,color:"warning",size:"sm"},null,8,["target","title"]),i(z,{color:"info",class:"text-light",onClick:ve=>D(d),size:"sm"},{default:h(()=>[i(B,{path:k(ye),color:"light"},null,8,["path"]),w("Edit ")]),_:2},1032,["onClick"]),i(z,{color:"danger",class:"text-light",onClick:ve=>T(d),size:"sm"},{default:h(()=>[i(B,{path:k(Ye),color:"light"},null,8,["path"]),w("Delete ")]),_:2},1032,["onClick"])]}),idValue:h(({item:d})=>[d.id?(p(),A(Ee,{key:d.id,value:d.id,"start-with":`cms.contents.${f.id>0?`${f.id}.`:""}${f.type}`},{default:h(()=>[w(P(d.id),1)]),_:2},1032,["value","start-with"])):S("",!0)]),titleValue:h(({item:d})=>{var x;return[w(P(((x=d.local)==null?void 0:x.title)??k(ue)()),1)]}),details:h(({item:d})=>{var x;return[i(vt,{content:(x=d.local)==null?void 0:x.blocks},null,8,["content"])]}),_:1},8,["fields","fetch"]),i(de,{name:o.value,"model-class":k(gt),fullscreen:"",ref_key:"modal",ref:t,onSave:m},{header:h(()=>[i(pe,{type:"pills",tabs:y.value,alignment:"center",onSelect:v,style:{flex:"auto"}},null,8,["tabs"])]),default:h(({model:d})=>[i(we,{tabs:y.value,type:"tabs","disable-navs":"",ref_key:"tabContent",ref:c},xe({settings:h(({tab:x})=>[g("div",Da,[n.value.length>0?(p(),$("div",{key:0,class:W({[I.value]:!0})},[g("div",xa,[n.value.length>0?(p(),A(ct,{key:0,field:d.categories,options:n.value},null,8,["field","options"])):S("",!0)])],2)):S("",!0),g("div",{class:W({[I.value]:!0})},[i(K,{model:d.attrs1},null,8,["model"]),g("div",Ma,[i(Q,{field:d.position},null,8,["field"])]),g("div",Ta,[i(Ie,{field:d.status,inline:"",options:r.value},null,8,["field","options"])])],2),d.attrs2.length>0?(p(),$("div",{key:1,class:W({[I.value]:!0})},[i(K,{model:d.attrs2},null,8,["model"])],2)):S("",!0),d.attrs3.length>0?(p(),$("div",{key:2,class:W({[I.value]:!0})},[i(K,{model:d.attrs3},null,8,["model"])],2)):S("",!0)])]),_:2},[G(k(ae)(),(x,R)=>({name:x.value,fn:h(({tab:ve})=>[g("div",{class:"row h-100",style:X([x.value==="ar"?{direction:"rtl"}:{direction:"ltr"}])},[g("div",ba,[g("div",$a,[g("div",ka,[i(Q,{field:d.locals[R].title,style:X([x.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"}])},null,8,["field","style"])]),g("div",Ca,[i(Me,{field:d.locals[R].excerpt,style:X([x.value==="ar"?{direction:"rtl","text-align":"right"}:{direction:"ltr","text-align":"left"},{height:"300px"}])},null,8,["field","style"])]),i(K,{model:d.locals[R].attrs},null,8,["model"])])]),g("div",{class:"col-md-9",ref:_},[u.value[R]?(p(),A(xt,{key:0,time:800},{default:h(()=>[i(ut,{field:d.locals[R].blocks,rtl:x.value==="ar",altitude:u.value[0].clientHeight-18,"no-label":""},null,8,["field","rtl","altitude"])]),_:2},1024)):S("",!0)])],4)])}))]),1032,["tabs"])]),_:1},8,["name","model-class"]),i(Se,{ref_key:"categoriesModal",ref:l,title:`Categories of ${o.value} `,size:"lg",onClose:ee},{default:h(()=>[i(_a,{type:f.type,id:f.id},null,8,["type","id"])]),_:1},8,["title"])],64))}}),Sa=E(Ia,[["__file","Contents.vue"]]),wa=N({__name:"Contents",props:{type:{}},setup(a){return(e,t)=>(p(),A(Sa,{type:e.type},null,8,["type"]))}}),Na=E(wa,[["__file","Contents.vue"]]),Ea=Oe("contents",Na);Ea.mount();
//# sourceMappingURL=contents.js.map
